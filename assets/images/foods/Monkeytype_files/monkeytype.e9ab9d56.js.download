(()=>{"use strict";var e,t={9835:(e,t,o)=>{o.r(t)},6144:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CLIENT_VERSION=void 0,t.CLIENT_VERSION="2022.07.15_14.30.58f68765b",$(document.body).on("click",".version",(e=>{e.shiftKey&&alert(t.CLIENT_VERSION)}))},6617:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Auth=t.app=void 0;const n=o(5503),a=o(2974),i=o(3660);try{t.app=(0,n.initializeApp)(i.firebaseConfig),t.Auth=(0,a.getAuth)(t.app)}catch(e){console.error(e),$("body").text("Failed to initialize Firebase. Are you sure you have the correct config in the firebase-config.ts file?")}},2681:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.update=t.clear=void 0;const s=i(o(6350)),r=i(o(3388));t.clear=function(){$(".pageAccount .globalTimeTyping .val").text("-"),$(".pageAccount .globalTestsStarted .val").text("-"),$(".pageAccount .globalTestsCompleted .val").text("-")},t.update=function(){var e,t;const o=s.getSnapshot();if(void 0!==o.typingStats){const n=null!==(t=null===(e=null==o?void 0:o.typingStats)||void 0===e?void 0:e.timeTyping)&&void 0!==t?t:0;let a="";a=0===n?"-":r.secondsToString(Math.round(n),!0,!0),$(".pageAccount .globalTimeTyping .val").text(a)}void 0!==o.typingStats&&$(".pageAccount .globalTestsStarted .val").text(o.typingStats.startedTests),void 0!==o.typingStats&&$(".pageAccount .globalTestsCompleted .val").text(o.typingStats.completedTests)}},6472:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.updateData=t.show=t.updatePosition=void 0;const r=i(o(1833)),d=s(o(6705)),u=r.result.options.scales;t.updatePosition=function(e,t){$(".pageAccount .miniResultChartWrapper").css({top:t,left:e})},t.show=function(){$(".pageAccount .miniResultChartWrapper").stop(!0,!0).fadeIn(125),$(".pageAccount .miniResultChartBg").stop(!0,!0).fadeIn(125)},t.updateData=function(e){const t=[];for(let o=1;o<=e.wpm.length;o++)t.push(o.toString());r.miniResult.data.labels=t,r.miniResult.data.datasets[0].data=e.wpm,r.miniResult.data.datasets[1].data=e.raw,r.miniResult.data.datasets[2].data=e.err;const o=Math.max(Math.max(...e.wpm),Math.max(...e.raw)),n=Math.min(Math.min(...e.wpm),Math.min(...e.raw));u.wpm.max=Math.round(o),u.raw.max=Math.round(o),d.default.startGraphsAtZero?(u.wpm.min=0,u.raw.min=0):(u.wpm.min=Math.round(n),u.raw.min=Math.round(n)),r.miniResult.updateColors()},$(document).on("click",".pageAccount .miniResultChartBg",(()=>{$(".pageAccount .miniResultChartWrapper").stop(!0,!0).fadeOut(125),$(".pageAccount .miniResultChartBg").stop(!0,!0).fadeOut(125)}))},140:function(e,t,o){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.update=void 0;const a=n(o(6705)),i=n(o(9546));function s(e,t,o){let n,s="",r="";const d=a.default.alwaysShowCPM?5:1,u=`${o} ${"time"===t?"seconds":"words"}`;try{n=e[t][o].sort(((e,t)=>t.wpm-e.wpm))[0];const a=new Date(n.timestamp);n.timestamp&&(r=(0,i.default)(a,"dd MMM yyyy")),s=`<div class="quick">\n      <div class="test">${u}</div>\n      <div class="wpm">${Math.round(n.wpm*d)}</div>\n      <div class="acc">${void 0===n.acc?"-":Math.floor(n.acc)+"%"}</div>\n    </div>\n    <div class="fullTest">\n      <div>${u}</div>\n      <div>${Math.round(n.wpm*d)} wpm</div>\n      <div>${Math.round(n.raw*d)} raw</div>\n      <div>${void 0===n.acc?"-":Math.floor(n.acc)} acc</div>\n      <div>${void 0===n.consistency?"-":Math.floor(n.consistency)} con</div>\n      <div>${r}</div>\n    </div>`}catch(e){s=`<div class="quick">\n    <div class="test">${u}</div>\n    <div class="wpm">-</div>\n    <div class="acc">-</div>\n  </div>`}return`\n  <div class="group">\n  ${s}\n  </div>\n  `}t.update=function(e,t=!1){if(function(e){const t=e?"Profile":"Account",o=e?"":'<div  \n  class="showAllButton button"\n  data-balloon-pos="left"\n  aria-label="Show all personal bests"\n>\n  <i class="fas fa-ellipsis-v"></i>\n</div>';$(`.page${t} .profile .pbsWords`).html(`\n      <div class="group">\n      <div class="quick">\n        <div class="test">10 words</div>\n        <div class="wpm">-</div>\n        <div class="acc">-</div>\n      </div>\n    </div>\n    <div class="group">\n      <div class="quick">\n        <div class="test">25 words</div>\n        <div class="wpm">-</div>\n        <div class="acc">-</div>\n      </div>\n    </div>\n    <div class="group">\n      <div class="quick">\n        <div class="test">50 words</div>\n        <div class="wpm">-</div>\n        <div class="acc">-</div>\n      </div>\n    </div>\n    <div class="group">\n      <div class="quick">\n        <div class="test">100 words</div>\n        <div class="wpm">-</div>\n        <div class="acc">-</div>\n      </div>\n    </div>\n    ${o}\n  `),$(`.page${t} .profile .pbsTime`).html(`\n      <div class="group">\n      <div class="quick">\n        <div class="test">15 seconds</div>\n        <div class="wpm">-</div>\n        <div class="acc">-</div>\n      </div>\n    </div>\n    <div class="group">\n      <div class="quick">\n        <div class="test">30 seconds</div>\n        <div class="wpm">-</div>\n        <div class="acc">-</div>\n      </div>\n    </div>\n    <div class="group">\n      <div class="quick">\n        <div class="test">60 seconds</div>\n        <div class="wpm">-</div>\n        <div class="acc">-</div>\n      </div>\n    </div>\n    <div class="group">\n      <div class="quick">\n        <div class="test">120 seconds</div>\n        <div class="wpm">-</div>\n        <div class="acc">-</div>\n      </div>\n    </div>\n    ${o}\n  `)}(t),void 0===e)return;let o="";const n=t?"Profile":"Account";$(`.page${n} .profile .pbsTime`).html(""),$(`.page${n} .profile .pbsWords`).html(""),o="",[15,30,60,120].forEach((t=>{o+=s(e,"time",t)}));const a=t?"":'<div class="buttonGroup"><div\n      class="showAllButton button"\n      data-balloon-pos="left"\n      aria-label="Show all personal bests"\n    >\n      <i class="fas fa-ellipsis-v"></i>\n    </div></div>';$(`.page${n} .profile .pbsTime`).append(o+a),o="",[10,25,50,100].forEach((t=>{o+=s(e,"words",t)})),$(`.page${n} .profile .pbsWords`).append(o+a)}},1329:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.updateTags=t.toggle=t.updateActive=t.reset=t.loadTags=t.getFilter=t.getGroup=t.getFilters=t.deleteFilterPreset=t.startCreateFilterPreset=t.setFilterPreset=t.updateFilterPresets=t.load=t.filters=t.defaultResultFilters=void 0;const d=i(o(3388)),u=i(o(6350)),l=r(o(6705)),c=i(o(3368)),p=r(o(7355)),f=i(o(9817)),h=o(2710);function m(){window.localStorage.setItem("resultFilters",JSON.stringify(t.filters))}function g(){return s(this,void 0,void 0,(function*(){$(".pageAccount .presetFilterButtons .filterBtns").html(""),u.getSnapshot().filterPresets.map((e=>(e.name=e.name.replace(/_/g," "),e))).length>0?($(".pageAccount .presetFilterButtons").show(),u.getSnapshot().filterPresets.forEach((e=>{$(".pageAccount .group.presetFilterButtons .filterBtns").append(`<div class="filterPresets">\n          <div class="select-filter-preset button" data-id="${e._id}">${e.name} </div>\n          <div class="button delete-filter-preset" data-id="${e._id}">\n            <i class="fas fa-fw fa-trash"></i>\n          </div>\n        </div>`)}))):$(".pageAccount .presetFilterButtons").hide()}))}function v(e){return JSON.parse(JSON.stringify(e))}function y(){return s(this,void 0,void 0,(function*(){(0,h.showNewResultFilterPresetPopup)((e=>function(e){return s(this,void 0,void 0,(function*(){e=e.replace(/ /g,"_"),f.show();const o=yield p.default.users.addResultFilterPreset(Object.assign(Object.assign({},t.filters),{name:e}));f.hide(),200===o.status?(function(e){const t=u.getSnapshot();u.setSnapshot(Object.assign(Object.assign({},t),{filterPresets:[...t.filterPresets,v(e)]}))}(Object.assign(Object.assign({},t.filters),{name:e,_id:o.data})),g(),c.add("Filter preset created",1)):(c.add("Error creating filter preset: "+o.message,-1),console.log("error creating filter preset: "+o.message))}))}(e)))}))}function b(e){return s(this,void 0,void 0,(function*(){f.show();const t=yield p.default.users.removeResultFilterPreset(e);f.hide(),200===t.status?(function(e){const t=u.getSnapshot(),o=[...t.filterPresets],n=o.findIndex((t=>t._id===e));n>-1&&o.splice(n,1),u.setSnapshot(Object.assign(Object.assign({},t),{filterPresets:o}))}(e),g(),k(),c.add("Filter preset deleted",1)):(c.add("Error deleting filter preset: "+t.message,-1),console.log("error deleting filter preset",t.message))}))}function w(){$(".pageAccount .group.presetFilterButtons .filterBtns .filterPresets .select-filter-preset").removeClass("active")}function C(){return t.filters}function S(e){return t.filters[e]}function _(e,o){return t.filters[e][o]}function k(){t.filters=t.defaultResultFilters,m()}function x(){var e,t,o,n;const a={};function i(e){var t,o,n,i,s;let r="";return r+="<div class='group'>","difficulty"==e?r+='<span aria-label="Difficulty" data-balloon-pos="up"><i class="fas fa-fw fa-star"></i>':"mode"==e?r+='<span aria-label="Mode" data-balloon-pos="up"><i class="fas fa-fw fa-bars"></i>':"punctuation"==e?r+='<span aria-label="Punctuation" data-balloon-pos="up"><span class="punc" style="font-weight: 900;\n      width: 1.25rem;\n      text-align: center;\n      display: inline-block;\n      letter-spacing: -.1rem;">!?</span>':"numbers"==e?r+='<span aria-label="Numbers" data-balloon-pos="up"><span class="numbers" style="font-weight: 900;\n        width: 1.25rem;\n        text-align: center;\n        margin-right: .1rem;\n        display: inline-block;\n        letter-spacing: -.1rem;">15</span>':"words"==e?r+='<span aria-label="Words" data-balloon-pos="up"><i class="fas fa-fw fa-font"></i>':"time"==e?r+='<span aria-label="Time" data-balloon-pos="up"><i class="fas fa-fw fa-clock"></i>':"date"==e?r+='<span aria-label="Date" data-balloon-pos="up"><i class="fas fa-fw fa-calendar"></i>':"tags"==e?r+='<span aria-label="Tags" data-balloon-pos="up"><i class="fas fa-fw fa-tags"></i>':"language"==e?r+='<span aria-label="Language" data-balloon-pos="up"><i class="fas fa-fw fa-globe-americas"></i>':"funbox"==e&&(r+='<span aria-label="Funbox" data-balloon-pos="up"><i class="fas fa-fw fa-gamepad"></i>'),(null===(t=a[e])||void 0===t?void 0:t.all)?r+="all":r+="tags"===e?null===(n=null===(o=a.tags)||void 0===o?void 0:o.array)||void 0===n?void 0:n.map((e=>{var t,o;if("none"==e)return e;const n=u.getSnapshot(),a=null===(t=n.tags)||void 0===t?void 0:t.filter((t=>t._id==e))[0];return void 0!==a?null===(o=n.tags)||void 0===o?void 0:o.filter((t=>t._id==e))[0].display:a})).join(", "):null===(s=null===(i=a[e])||void 0===i?void 0:i.array)||void 0===s?void 0:s.join(", ").replace(/_/g," "),r+="</span></div>",r}Object.keys(C()).forEach((e=>{"_id"!==e&&"name"!==e&&(a[e]={all:!0,array:[]},Object.keys(S(e)).forEach((t=>{var o;const n=a[e];if(void 0===n)return;let i;_(e,t)?null===(o=n.array)||void 0===o||o.push(t):void 0!==n.all&&(n.all=!1),i="date"===e?$(`.pageAccount .group.topFilters .filterGroup[group="${e}"] .button[filter="${t}"]`):$(`.pageAccount .group.filterButtons .filterGroup[group="${e}"] .button[filter="${t}"]`),_(e,t)?i.addClass("active"):i.removeClass("active")})))}));let s="";s+=i("date"),s+='<div class="spacer"></div>',s+=i("mode"),s+='<div class="spacer"></div>',(null===(t=null===(e=a.mode)||void 0===e?void 0:e.array)||void 0===t?void 0:t.includes("time"))&&(s+=i("time"),s+='<div class="spacer"></div>'),(null===(n=null===(o=a.mode)||void 0===o?void 0:o.array)||void 0===n?void 0:n.includes("words"))&&(s+=i("words"),s+='<div class="spacer"></div>'),s+=i("difficulty"),s+='<div class="spacer"></div>',s+=i("punctuation"),s+='<div class="spacer"></div>',s+=i("numbers"),s+='<div class="spacer"></div>',s+=i("language"),s+='<div class="spacer"></div>',s+=i("funbox"),s+='<div class="spacer"></div>',s+=i("tags"),setTimeout((()=>{$(".pageAccount .group.chart .above").html(s)}),0)}function T(e,o){w();try{"date"===e&&Object.keys(S("date")).forEach((e=>{t.filters.date[e]=!1})),t.filters[e][o]=!t.filters[e][o],m()}catch(e){c.add("Something went wrong toggling filter. Reverting to defaults.",0),console.log("toggling filter error"),console.error(e),k(),x()}}t.defaultResultFilters={_id:"default-result-filters-id",name:"default result filters",difficulty:{normal:!0,expert:!0,master:!0},mode:{words:!0,time:!0,quote:!0,zen:!0,custom:!0},words:{10:!0,25:!0,50:!0,100:!0,custom:!0},time:{15:!0,30:!0,60:!0,120:!0,custom:!0},quoteLength:{short:!0,medium:!0,long:!0,thicc:!0},punctuation:{on:!0,off:!0},numbers:{on:!0,off:!0},date:{last_day:!1,last_week:!1,last_month:!1,last_3months:!1,all:!0},tags:{none:!0},language:{},funbox:{none:!0}},t.filters=t.defaultResultFilters,t.load=function(){return s(this,void 0,void 0,(function*(){console.log("loading filters");try{const e=window.localStorage.getItem("resultFilters");null!=e&&""!==e&&Object.keys(JSON.parse(e)).length>=Object.keys(t.defaultResultFilters).length?t.filters=JSON.parse(e):t.filters=t.defaultResultFilters;const o={none:!1};Object.keys(t.defaultResultFilters.tags).forEach((e=>{void 0!==t.filters.tags[e]?o[e]=t.filters.tags[e]:o[e]=!0})),t.filters.tags=o,yield g(),m()}catch(e){console.log("error in loading result filters"),t.filters=t.defaultResultFilters,m()}}))},t.updateFilterPresets=g,t.setFilterPreset=function(e){return s(this,void 0,void 0,(function*(){const o=u.getSnapshot().filterPresets.find((t=>t._id===e));o&&(t.filters=v(o),m(),x()),$(".pageAccount .group.presetFilterButtons .filterBtns .filterPresets .select-filter-preset").removeClass("active"),$(`.pageAccount .group.presetFilterButtons .filterBtns .filterPresets .select-filter-preset[data-id=${e}]`).addClass("active")}))},t.startCreateFilterPreset=y,t.deleteFilterPreset=b,t.getFilters=C,t.getGroup=S,t.getFilter=_,t.loadTags=function(e){console.log("loading tags"),e.forEach((e=>{t.defaultResultFilters.tags[e._id]=!0}))},t.reset=k,t.updateActive=x,t.toggle=T,t.updateTags=function(){var e,t;$(".pageAccount .content .filterButtons .buttonsAndTitle.tags .buttons").empty();const o=u.getSnapshot();(null===(e=o.tags)||void 0===e?void 0:e.length)?($(".pageAccount .content .filterButtons .buttonsAndTitle.tags").removeClass("hidden"),$(".pageAccount .content .filterButtons .buttonsAndTitle.tags .buttons").append('<div class="button" filter="none">no tag</div>'),null===(t=o.tags)||void 0===t||t.forEach((e=>{$(".pageAccount .content .filterButtons .buttonsAndTitle.tags .buttons").append(`<div class="button" filter="${e._id}">${e.display}</div>`)}))):$(".pageAccount .content .filterButtons .buttonsAndTitle.tags").addClass("hidden")},$(".pageAccount .filterButtons .buttonsAndTitle .buttons, .pageAccount .group.topFilters .buttonsAndTitle.testDate .buttons").on("click",".button",(e=>{const o=$(e.target).parents(".buttons").attr("group"),n=$(e.target).attr("filter");$(e.target).hasClass("allFilters")?(Object.keys(C()).forEach((e=>{"_id"!==e&&"name"!==e&&Object.keys(S(e)).forEach((o=>{"date"===e?t.filters[e][o]=!1:void 0!==t.filters[e]&&(t.filters[e][o]=!0)}))})),t.filters.date.all=!0):$(e.target).hasClass("noFilters")?Object.keys(C()).forEach((e=>{"_id"!==e&&"name"!==e&&"date"!==e&&Object.keys(S(e)).forEach((o=>{t.filters[e][o]=!1}))})):$(e.target).hasClass("button")&&(e.shiftKey?(Object.keys(S(o)).forEach((e=>{t.filters[o][e]=!1})),t.filters[o][n]=!0):T(o,n)),x(),m()})),$(".pageAccount .topFilters .button.allFilters").on("click",(()=>{w(),Object.keys(C()).forEach((e=>{"_id"!==e&&"name"!==e&&Object.keys(S(e)).forEach((o=>{t.filters[e][o]="date"!==e}))})),t.filters.date.all=!0,x(),m()})),$(".pageAccount .topFilters .button.currentConfigFilter").on("click",(()=>{var e;if(w(),Object.keys(C()).forEach((e=>{"_id"!==e&&"name"!==e&&Object.keys(S(e)).forEach((o=>{t.filters[e][o]=!1}))})),t.filters.difficulty[l.default.difficulty]=!0,t.filters.mode[l.default.mode]=!0,"time"===l.default.mode)if([15,30,60,120].includes(l.default.time)){const e=l.default.time;t.filters.time[e]=!0}else t.filters.time.custom=!0;else if("words"===l.default.mode)if([10,25,50,100,200].includes(l.default.words)){const e=l.default.words;t.filters.words[e]=!0}else t.filters.words.custom=!0;else"quote"===l.default.mode&&["short","medium","long","thicc"].forEach(((e,o)=>{l.default.quoteLength.includes(o)?t.filters.quoteLength[e]=!0:t.filters.quoteLength[e]=!1}));l.default.punctuation?t.filters.punctuation.on=!0:t.filters.punctuation.off=!0,l.default.numbers?t.filters.numbers.on=!0:t.filters.numbers.off=!0,"quote"===l.default.mode&&/english.*/.test(l.default.language)?t.filters.language.english=!0:t.filters.language[l.default.language]=!0,"none"===l.default.funbox?t.filters.funbox.none=!0:t.filters.funbox[l.default.funbox]=!0,t.filters.tags.none=!0,null===(e=u.getSnapshot().tags)||void 0===e||e.forEach((e=>{!0===e.active&&(t.filters.tags.none=!1,t.filters.tags[e._id]=!0)})),t.filters.date.all=!0,x(),m()})),$(".pageAccount .topFilters .button.toggleAdvancedFilters").on("click",(()=>{$(".pageAccount .filterButtons").slideToggle(250),$(".pageAccount .topFilters .button.toggleAdvancedFilters").toggleClass("active")})),d.getLanguageList().then((e=>{e.forEach((e=>{$(".pageAccount .content .filterButtons .buttonsAndTitle.languages .buttons").append(`<div class="button" filter="${e}">${e.replace("_"," ")}</div>`)}))})),$(".pageAccount .content .filterButtons .buttonsAndTitle.funbox .buttons").append('<div class="button" filter="none">none</div>'),d.getFunboxList().then((e=>{e.forEach((e=>{$(".pageAccount .content .filterButtons .buttonsAndTitle.funbox .buttons").append(`<div class="button" filter="${e.name}">${e.name.replace(/_/g," ")}</div>`)}))})),$(".pageAccount .topFilters .button.createFilterPresetBtn").on("click",(()=>{y()})),$(document).on("click",".pageAccount .group.presetFilterButtons .filterBtns .filterPresets .delete-filter-preset",(e=>{b($(e.currentTarget).data("id"))}))},8452:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=void 0,t.show=function(){$(".signOut").stop(!0,!0).removeClass("hidden").css({opacity:0,transition:"0s"}).animate({opacity:1},125,(()=>{$(".signOut").css({transition:"0.25s"})}))},t.hide=function(){$(".signOut").stop(!0,!0).css({opacity:1,transition:"0s"}).animate({opacity:0},125,(()=>{$(".signOut").css({transition:"0.25s"}),$(".signOut").addClass("hidden")}))}},3271:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.buildHttpClient=void 0;const i=o(6617),s=o(2974),r=a(o(9669));function d(e,t){return(o,a={})=>n(this,void 0,void 0,(function*(){var d,u,l;let c="";try{const r=yield function(e){return n(this,void 0,void 0,(function*(){const t=i.Auth.currentUser,o=t&&(yield(0,s.getIdToken)(t));return{params:e.searchQuery,data:e.payload,headers:Object.assign(Object.assign(Object.assign({},e.headers),{Accept:"application/json","Content-Type":"application/json"}),o&&{Authorization:`Bearer ${o}`})}}))}(a);let d;d="get"===t||"delete"===t?yield e(o,r):yield e(o,r.data,r);const{message:u,data:l}=d.data;return{status:d.status,message:u,data:l}}catch(e){console.error(e);const t=e;if(c=t.message,r.default.isAxiosError(t))return Object.assign({status:null!==(u=null===(d=t.response)||void 0===d?void 0:d.status)&&void 0!==u?u:500,message:t.message},null===(l=t.response)||void 0===l?void 0:l.data)}return{status:500,message:c}}))}t.buildHttpClient=function(e,t){const o=r.default.create({baseURL:e,timeout:t});return{get:d(o.get,"get"),post:d(o.post,"post"),put:d(o.put,"put"),patch:d(o.patch,"patch"),delete:d(o.delete,"delete")}}},6510:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n="/ape-keys";t.default=class{constructor(e){this.httpClient=e,this.httpClient=e}get(){return o(this,void 0,void 0,(function*(){return yield this.httpClient.get(n)}))}generate(e,t){return o(this,void 0,void 0,(function*(){const o={name:e,enabled:t};return yield this.httpClient.post(n,{payload:o})}))}update(e,t){return o(this,void 0,void 0,(function*(){const o=Object.assign({},t);return yield this.httpClient.patch(`/ape-keys/${e}`,{payload:o})}))}delete(e){return o(this,void 0,void 0,(function*(){return yield this.httpClient.delete(`/ape-keys/${e}`)}))}}},4146:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n="/configs";t.default=class{constructor(e){this.httpClient=e,this.httpClient=e}get(){return o(this,void 0,void 0,(function*(){return yield this.httpClient.get(n)}))}save(e){return o(this,void 0,void 0,(function*(){return yield this.httpClient.patch(n,{payload:{config:e}})}))}}},1571:function(e,t,o){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(o(4146)),i=n(o(7771)),s=n(o(472)),r=n(o(3870)),d=n(o(3082)),u=n(o(8413)),l=n(o(9303)),c=n(o(6510));t.default={Configs:a.default,Leaderboards:i.default,Presets:s.default,Psas:r.default,Quotes:d.default,Results:u.default,Users:l.default,ApeKeys:c.default}},7771:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n="/leaderboards";t.default=class{constructor(e){this.httpClient=e,this.httpClient=e}get(e){return o(this,void 0,void 0,(function*(){const{language:t,mode:o,mode2:a,isDaily:i,skip:s=0,limit:r=50,daysBefore:d}=e,u=i&&d,l=Object.assign({language:t,mode:o,mode2:a,skip:Math.max(s,0),limit:Math.max(Math.min(r,50),0)},u&&{daysBefore:d}),c=`${n}/${i?"daily":""}`;return yield this.httpClient.get(c,{searchQuery:l})}))}getRank(e){return o(this,void 0,void 0,(function*(){const{language:t,mode:o,mode2:a,isDaily:i,daysBefore:s}=e,r=i&&s,d=Object.assign({language:t,mode:o,mode2:a},r&&{daysBefore:s}),u=`${n}${i?"/daily":""}/rank`;return yield this.httpClient.get(u,{searchQuery:d})}))}}},472:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n="/presets";t.default=class{constructor(e){this.httpClient=e,this.httpClient=e}get(){return o(this,void 0,void 0,(function*(){return yield this.httpClient.get(n)}))}add(e,t){return o(this,void 0,void 0,(function*(){const o={name:e,config:t};return yield this.httpClient.post(n,{payload:o})}))}edit(e,t,a){return o(this,void 0,void 0,(function*(){const o={_id:e,name:t,config:a};return yield this.httpClient.patch(n,{payload:o})}))}delete(e){return o(this,void 0,void 0,(function*(){return yield this.httpClient.delete(`/presets/${e}`)}))}}},3870:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const a=o(6144);t.default=class{constructor(e){this.httpClient=e,this.httpClient=e}get(){return n(this,void 0,void 0,(function*(){return yield this.httpClient.get("/psas",{headers:{"Client-Version":a.CLIENT_VERSION}})}))}}},3082:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n="/quotes";t.default=class{constructor(e){this.httpClient=e,this.httpClient=e}get(){return o(this,void 0,void 0,(function*(){return yield this.httpClient.get(n)}))}submit(e,t,a,i){return o(this,void 0,void 0,(function*(){const o={text:e,source:t,language:a,captcha:i};return yield this.httpClient.post(n,{payload:o})}))}approveSubmission(e,t,n){return o(this,void 0,void 0,(function*(){const o={quoteId:e,editText:t,editSource:n};return yield this.httpClient.post("/quotes/approve",{payload:o})}))}rejectSubmission(e){return o(this,void 0,void 0,(function*(){return yield this.httpClient.post("/quotes/reject",{payload:{quoteId:e}})}))}getRating(e){return o(this,void 0,void 0,(function*(){const t={quoteId:e.id,language:e.language};return yield this.httpClient.get("/quotes/rating",{searchQuery:t})}))}addRating(e,t){return o(this,void 0,void 0,(function*(){const o={quoteId:e.id,rating:t,language:e.language};return yield this.httpClient.post("/quotes/rating",{payload:o})}))}report(e,t,n,a,i){return o(this,void 0,void 0,(function*(){const o={quoteId:e,quoteLanguage:t,reason:n,comment:a,captcha:i};return yield this.httpClient.post("/quotes/report",{payload:o})}))}}},8413:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const a=o(6144),i="/results";t.default=class{constructor(e){this.httpClient=e,this.httpClient=e}get(){return n(this,void 0,void 0,(function*(){return yield this.httpClient.get(i)}))}save(e){return n(this,void 0,void 0,(function*(){return yield this.httpClient.post(i,{payload:{result:e},headers:{"Client-Version":a.CLIENT_VERSION}})}))}updateTags(e,t){return n(this,void 0,void 0,(function*(){return yield this.httpClient.patch("/results/tags",{payload:{resultId:e,tagIds:t}})}))}deleteAll(){return n(this,void 0,void 0,(function*(){return yield this.httpClient.delete(i)}))}}},9303:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n="/users";t.default=class{constructor(e){this.httpClient=e,this.httpClient=e}getData(){return o(this,void 0,void 0,(function*(){return yield this.httpClient.get(n)}))}create(e,t,n){return o(this,void 0,void 0,(function*(){const o={email:t,name:e,uid:n};return yield this.httpClient.post("/users/signup",{payload:o})}))}getNameAvailability(e){return o(this,void 0,void 0,(function*(){return yield this.httpClient.get(`/users/checkName/${e}`)}))}delete(){return o(this,void 0,void 0,(function*(){return yield this.httpClient.delete(n)}))}reset(){return o(this,void 0,void 0,(function*(){return yield this.httpClient.patch("/users/reset")}))}updateName(e){return o(this,void 0,void 0,(function*(){return yield this.httpClient.patch("/users/name",{payload:{name:e}})}))}updateLeaderboardMemory(e,t,n,a){return o(this,void 0,void 0,(function*(){const o={mode:e,mode2:t,language:n,rank:a};return yield this.httpClient.patch("/users/leaderboardMemory",{payload:o})}))}updateEmail(e,t){return o(this,void 0,void 0,(function*(){const o={newEmail:e,previousEmail:t};return yield this.httpClient.patch("/users/email",{payload:o})}))}deletePersonalBests(){return o(this,void 0,void 0,(function*(){return yield this.httpClient.delete("/users/personalBests")}))}addResultFilterPreset(e){return o(this,void 0,void 0,(function*(){return yield this.httpClient.post("/users/resultFilterPresets",{payload:e})}))}removeResultFilterPreset(e){return o(this,void 0,void 0,(function*(){return yield this.httpClient.delete(`/users/resultFilterPresets/${e}`)}))}getTags(){return o(this,void 0,void 0,(function*(){return yield this.httpClient.get("/users/tags")}))}createTag(e){return o(this,void 0,void 0,(function*(){return yield this.httpClient.post("/users/tags",{payload:{tagName:e}})}))}editTag(e,t){return o(this,void 0,void 0,(function*(){const o={tagId:e,newName:t};return yield this.httpClient.patch("/users/tags",{payload:o})}))}deleteTag(e){return o(this,void 0,void 0,(function*(){return yield this.httpClient.delete(`/users/tags/${e}`)}))}deleteTagPersonalBest(e){return o(this,void 0,void 0,(function*(){return yield this.httpClient.delete(`/users/tags/${e}/personalBest`)}))}getCustomThemes(){return o(this,void 0,void 0,(function*(){return yield this.httpClient.get("/users/customThemes")}))}editCustomTheme(e,t){return o(this,void 0,void 0,(function*(){const o={themeId:e,theme:{name:t.name,colors:t.colors}};return yield this.httpClient.patch("/users/customThemes",{payload:o})}))}deleteCustomTheme(e){return o(this,void 0,void 0,(function*(){const t={themeId:e};return yield this.httpClient.delete("/users/customThemes",{payload:t})}))}addCustomTheme(e){return o(this,void 0,void 0,(function*(){const t={name:e.name,colors:e.colors};return yield this.httpClient.post("/users/customThemes",{payload:t})}))}linkDiscord(e,t){return o(this,void 0,void 0,(function*(){return yield this.httpClient.post("/users/discord/link",{payload:{tokenType:e,accessToken:t}})}))}unlinkDiscord(){return o(this,void 0,void 0,(function*(){return yield this.httpClient.post("/users/discord/unlink")}))}addQuoteToFavorites(e,t){return o(this,void 0,void 0,(function*(){const o={language:e,quoteId:t};return yield this.httpClient.post("/users/favoriteQuotes",{payload:o})}))}removeQuoteFromFavorites(e,t){return o(this,void 0,void 0,(function*(){const o={language:e,quoteId:t};return yield this.httpClient.delete("/users/favoriteQuotes",{payload:o})}))}getProfile(e){return o(this,void 0,void 0,(function*(){return yield this.httpClient.get(`/users/${e}/profile`)}))}updateProfile(e,t){return o(this,void 0,void 0,(function*(){return yield this.httpClient.patch("/users/profile",{payload:Object.assign(Object.assign({},e),{selectedBadgeId:t})})}))}}},7355:function(e,t,o){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(o(1571)),i=o(3271),s=""+("localhost"===window.location.hostname?"http://localhost:5005":"https://api.monkeytype.com"),r=(0,i.buildHttpClient)(s,1e4),d={users:new a.default.Users(r),configs:new a.default.Configs(r),results:new a.default.Results(r),psas:new a.default.Psas(r),quotes:new a.default.Quotes(r),leaderboards:new a.default.Leaderboards(r),presets:new a.default.Presets(r),apeKeys:new a.default.ApeKeys(r)};t.default=d},4332:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.isConfigValueValidAsync=t.isConfigValueValid=t.isConfigKeyValid=void 0;const r=i(o(3388)),d=i(o(3368));function u(e,t,o){void 0===o?d.add(`Invalid value for ${e} (${t}). Please try to change this setting again.`,-1):d.add(`Invalid value for ${e} (${t}). ${o}`,-1),console.error(`Invalid value key ${e} value ${t} type ${typeof t}`)}function l(e){return e instanceof Array}t.isConfigKeyValid=function(e){return null!=e&&""!==e&&!(e.length>30)&&/^[0-9a-zA-Z_.\-#+]+$/.test(e)},t.isConfigValueValid=function(e,t,o){let n=!1;for(const e of o)switch(e){case"boolean":"boolean"==typeof t&&(n=!0);break;case"null":null===t&&(n=!0);break;case"number":"number"==typeof t&&(n=!0);break;case"numberArray":l(t)&&t.every((e=>"number"==typeof e))&&(n=!0);break;case"string":"string"==typeof t&&(n=!0);break;case"stringArray":l(t)&&t.every((e=>"string"==typeof e))&&(n=!0);break;case"undefined":void 0!==t&&void 0!==t||(n=!0);break;default:l(e)&&e.includes(t)&&(n=!0)}return n||u(e,t,undefined),n},t.isConfigValueValidAsync=function(e,t,o){return s(this,void 0,void 0,(function*(){let n,a=!1;for(const e of o)switch(e){case"layoutfluid":{if("string"!=typeof t)break;const e=t.split(/[# ]+/);if(e.length<2||e.length>5)break;const o=yield Promise.all(e.map((e=>r.getLayout(e))));if(!o.every((e=>void 0!==e))){n=`The following inputted layouts do not exist: ${e.map(((e,t)=>[e,o[t]])).filter((([e,t])=>void 0===t)).map((([e])=>e)).join(", ")}`;break}a=!0;break}}return a||u(e,t,n),a}))}},6705:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.setShowLiveBurst=t.setShowLiveAcc=t.setShowLiveWpm=t.setShowTimerProgress=t.setPaceCaretStyle=t.setCaretStyle=t.setPageWidth=t.setOppositeShiftMode=t.setStrictSpace=t.setColorfulMode=t.setFlipTestColors=t.setRepeatQuotes=t.setEnableAds=t.setQuickEnd=t.setShowAllLines=t.setCapsLockWarning=t.setSingleListCommandLine=t.setAlwaysShowWordsHistory=t.setMinBurstCustomSpeed=t.setMinBurst=t.setMinAccCustom=t.setMinAcc=t.setMinWpmCustomSpeed=t.setMinWpm=t.setRepeatedPace=t.setPaceCaretCustomSpeed=t.setPaceCaret=t.setShowOutOfFocusWarning=t.setAlwaysShowCPM=t.setAlwaysShowDecimalPlaces=t.setStopOnError=t.setChartStyle=t.setChartAccuracy=t.setBlindMode=t.setFunbox=t.setFavThemes=t.setDifficulty=t.setSoundVolume=t.setPlaySoundOnClick=t.setPlaySoundOnError=t.setMode=t.setPunctuation=t.setNumbers=t.saveFullConfigToLocalStorage=t.setChangedBeforeDb=t.setDbConfigLoaded=t.setLocalStorageConfig=t.changedBeforeDb=t.dbConfigLoaded=t.localStorageConfig=void 0,t.loadPromise=t.setConfig=t.getConfigChanges=t.loadFromLocalStorage=t.reset=t.apply=t.setBurstHeatmap=t.setMonkeyPowerLevel=t.setCustomBackgroundFilter=t.setCustomBackgroundSize=t.setCustomLayoutfluid=t.setCustomBackground=t.setFontSize=t.setLayout=t.setKeymapLayout=t.setKeymapStyle=t.setKeymapLegendStyle=t.setKeymapMode=t.setMonkey=t.setLanguage=t.setCustomThemeColors=t.setLazyMode=t.setBritishEnglish=t.setRandomTheme=t.setThemeDark=t.setThemeLight=t.setTheme=t.setCustomTheme=t.setAutoSwitchTheme=t.setIndicateTypos=t.setConfidenceMode=t.setFreedomMode=t.setFontFamily=t.previewFontFamily=t.setQuickRestartMode=t.setSmoothLineScroll=t.setStartGraphsAtZero=t.setSmoothCaret=t.setWordCount=t.setQuoteLength=t.setTimeConfig=t.setKeyTips=t.setTimerOpacity=t.setTimerColor=t.setTimerStyle=t.setHideExtraLetters=t.setTapeMode=t.setHighlightMode=t.setShowAverage=void 0;const d=i(o(6350)),u=i(o(1333)),l=i(o(3368)),c=o(4332),p=i(o(1446)),f=r(o(2191)),h=o(6617),m=i(o(3326)),g=o(2189);function v(e){t.changedBeforeDb=e}let y;t.dbConfigLoaded=!1,t.changedBeforeDb=!1,t.setLocalStorageConfig=function(e){t.localStorageConfig=e},t.setDbConfigLoaded=function(e){t.dbConfigLoaded=e},t.setChangedBeforeDb=v;let b=Object.assign({},f.default),w={};const C=(0,g.debounce)(1e3,(()=>{delete w.resultFilters,Object.keys(w).length>0&&d.saveConfig(w),w={}}));function S(e,o=!1,n=!1){return s(this,void 0,void 0,(function*(){if(t.dbConfigLoaded||n||o||v(!0),o)return;const a=b;delete a.resultFilters;const i=JSON.stringify(a);window.localStorage.setItem("config",i),n||(w[e]=b[e],yield C()),p.dispatch("saveToLocalStorage",i)}))}function _(e=!1){return s(this,void 0,void 0,(function*(){t.dbConfigLoaded||e||v(!0);const o=b;delete o.resultFilters;const n=JSON.stringify(o);window.localStorage.setItem("config",n),e||(yield d.saveConfig(o)),p.dispatch("saveToLocalStorage",n)}))}function k(e,t){return!!(0,c.isConfigValueValid)("numbers",e,["boolean"])&&("quote"===b.mode&&(e=!1),b.numbers=e,b.numbers?$("#top .config .numbersMode .textButton").addClass("active"):$("#top .config .numbersMode .textButton").removeClass("active"),S("numbers",t),p.dispatch("numbers",b.numbers),!0)}function x(e,t){return!!(0,c.isConfigValueValid)("punctuation",e,["boolean"])&&("quote"===b.mode&&(e=!1),b.punctuation=e,b.punctuation?$("#top .config .punctuationMode .textButton").addClass("active"):$("#top .config .punctuationMode .textButton").removeClass("active"),S("punctuation",t),p.dispatch("punctuation",b.punctuation),!0)}function T(e,t){if(!(0,c.isConfigValueValid)("mode",e,[["time","words","quote","zen","custom"]]))return!1;if("words"!==e&&"memory"===b.funbox)return l.add("Memory funbox can only be used with words mode.",0),!1;const o=b.mode;return b.mode=e,"custom"==b.mode||"quote"==b.mode?(x(!1,!0),k(!1,!0)):"zen"==b.mode&&"off"!=b.paceCaret&&l.add("Pace caret will not work with zen mode.",0),S("mode",t),p.dispatch("mode",b.mode,t,o),!0}function P(e,t){return!!(0,c.isConfigValueValid)("play sound on error",e,["boolean"])&&(b.playSoundOnError=e,S("playSoundOnError",t),p.dispatch("playSoundOnError",b.playSoundOnError),!0)}function M(e,t){return!!(0,c.isConfigValueValid)("play sound on click",e,[["off","1","2","3","4","5","6","7"]])&&(b.playSoundOnClick=e,S("playSoundOnClick",t),p.dispatch("playSoundOnClick",b.playSoundOnClick),!0)}function O(e,t){return!!(0,c.isConfigValueValid)("sound volume",e,[["0.1","0.5","1.0"]])&&(b.soundVolume=e,S("soundVolume",t),p.dispatch("soundVolume",b.soundVolume),!0)}function L(e,t){return!!(0,c.isConfigValueValid)("difficulty",e,[["normal","expert","master"]])&&(b.difficulty=e,S("difficulty",t),p.dispatch("difficulty",b.difficulty,t),!0)}function W(e,t){return!!(0,c.isConfigValueValid)("favorite themes",e,["stringArray"])&&(b.favThemes=e,S("favThemes",t),p.dispatch("favThemes",b.favThemes),!0)}function A(e,t){if(!(0,c.isConfigValueValid)("funbox",e,["string"]))return!1;const o=e||"none";return b.funbox=o,S("funbox",t),p.dispatch("funbox",b.funbox),!0}function B(e,t){return!!(0,c.isConfigValueValid)("blind mode",e,["boolean"])&&(b.blindMode=e,S("blindMode",t),p.dispatch("blindMode",b.blindMode,t),!0)}function E(e,t){return!!(0,c.isConfigValueValid)("chart accuracy",e,["boolean"])&&(b.chartAccuracy=e,S("chartAccuracy",t),p.dispatch("chartAccuracy",b.chartAccuracy),!0)}function j(e,t){return!!(0,c.isConfigValueValid)("chart style",e,[["line","scatter"]])&&(b.chartStyle=e,S("chartStyle",t),p.dispatch("chartStyle",b.chartStyle),!0)}function R(e,t){return!!(0,c.isConfigValueValid)("stop on error",e,[["off","word","letter"]])&&(b.stopOnError=e,"off"!==b.stopOnError&&(b.confidenceMode="off"),S("stopOnError",t),p.dispatch("stopOnError",b.stopOnError,t),!0)}function I(e,t){return!!(0,c.isConfigValueValid)("always show decimal places",e,["boolean"])&&(b.alwaysShowDecimalPlaces=e,S("alwaysShowDecimalPlaces",t),p.dispatch("alwaysShowDecimalPlaces",b.alwaysShowDecimalPlaces),!0)}function D(e,t){return!!(0,c.isConfigValueValid)("always show CPM",e,["boolean"])&&(b.alwaysShowCPM=e,S("alwaysShowCPM",t),p.dispatch("alwaysShowCPM",b.alwaysShowCPM),!0)}function q(e,t){return!!(0,c.isConfigValueValid)("show out of focus warning",e,["boolean"])&&(b.showOutOfFocusWarning=e,b.showOutOfFocusWarning||u.hide(),S("showOutOfFocusWarning",t),p.dispatch("showOutOfFocusWarning",b.showOutOfFocusWarning),!0)}function F(e,t){return!!(0,c.isConfigValueValid)("pace caret",e,[["custom","off","average","pb","last"]])&&("complete"===document.readyState&&"pb"==e&&null===h.Auth.currentUser?(l.add("PB pace caret is unavailable without an account",0),!1):(b.paceCaret=e,S("paceCaret",t),p.dispatch("paceCaret",b.paceCaret,t),!0))}function V(e,t){return!!(0,c.isConfigValueValid)("pace caret custom speed",e,["number"])&&(b.paceCaretCustomSpeed=e,S("paceCaretCustomSpeed",t),p.dispatch("paceCaretCustomSpeed",b.paceCaretCustomSpeed),!0)}function K(e,t){return!!(0,c.isConfigValueValid)("repeated pace",e,["boolean"])&&(b.repeatedPace=e,S("repeatedPace",t),p.dispatch("repeatedPace",b.repeatedPace),!0)}function H(e,t){return!!(0,c.isConfigValueValid)("min WPM",e,[["off","custom"]])&&(b.minWpm=e,S("minWpm",t),p.dispatch("minWpm",b.minWpm,t),!0)}function z(e,t){return!!(0,c.isConfigValueValid)("min WPM custom speed",e,["number"])&&(b.minWpmCustomSpeed=e,S("minWpmCustomSpeed",t),p.dispatch("minWpmCustomSpeed",b.minWpmCustomSpeed),!0)}function N(e,t){return!!(0,c.isConfigValueValid)("min acc",e,[["off","custom"]])&&(b.minAcc=e,S("minAcc",t),p.dispatch("minAcc",b.minAcc,t),!0)}function Q(e,t){return!!(0,c.isConfigValueValid)("min acc custom",e,["number"])&&(b.minAccCustom=e,S("minAccCustom",t),p.dispatch("minAccCustom",b.minAccCustom),!0)}function U(e,t){return!!(0,c.isConfigValueValid)("min burst",e,[["off","fixed","flex"]])&&(b.minBurst=e,S("minBurst",t),p.dispatch("minBurst",b.minBurst,t),!0)}function G(e,t){return!!(0,c.isConfigValueValid)("min burst custom speed",e,["number"])&&(b.minBurstCustomSpeed=e,S("minBurstCustomSpeed",t),p.dispatch("minBurstCustomSpeed",b.minBurstCustomSpeed),!0)}function J(e,t){return!!(0,c.isConfigValueValid)("always show words history",e,["boolean"])&&(b.alwaysShowWordsHistory=e,S("alwaysShowWordsHistory",t),p.dispatch("alwaysShowWordsHistory",b.alwaysShowWordsHistory),!0)}function Z(e,t){return!!(0,c.isConfigValueValid)("single list command line",e,[["manual","on"]])&&(b.singleListCommandLine=e,S("singleListCommandLine",t),p.dispatch("singleListCommandLine",b.singleListCommandLine),!0)}function Y(e,t){return!!(0,c.isConfigValueValid)("caps lock warning",e,["boolean"])&&(b.capsLockWarning=e,S("capsLockWarning",t),p.dispatch("capsLockWarning",b.capsLockWarning),!0)}function X(e,t){return!!(0,c.isConfigValueValid)("show all lines",e,["boolean"])&&(e&&"off"!==b.tapeMode?(l.add("Show all lines doesn't support tape mode",0),!1):(b.showAllLines=e,S("showAllLines",t),p.dispatch("showAllLines",b.showAllLines,t),!0))}function ee(e,t){return!!(0,c.isConfigValueValid)("quick end",e,["boolean"])&&(b.quickEnd=e,S("quickEnd",t),p.dispatch("quickEnd",b.quickEnd),!0)}function te(e,t){return!!(0,c.isConfigValueValid)("enable ads",e,[["on","off","max"]])&&(b.enableAds="off",t||(S("enableAds",t),l.add("Ads have been temporarily disabled",0)),!0)}function oe(e,t){return!!(0,c.isConfigValueValid)("repeat quotes",e,[["off","typing"]])&&(b.repeatQuotes=e,S("repeatQuotes",t),p.dispatch("repeatQuotes",b.repeatQuotes),!0)}function ne(e,t){return!!(0,c.isConfigValueValid)("flip test colors",e,["boolean"])&&(b.flipTestColors=e,S("flipTestColors",t),p.dispatch("flipTestColors",b.flipTestColors),!0)}function ae(e,t){return!!(0,c.isConfigValueValid)("colorful mode",e,["boolean"])&&(b.colorfulMode=e,S("colorfulMode",t),p.dispatch("colorfulMode",b.colorfulMode),!0)}function ie(e,t){return!!(0,c.isConfigValueValid)("strict space",e,["boolean"])&&(b.strictSpace=e,S("strictSpace",t),p.dispatch("strictSpace",b.strictSpace),!0)}function se(e,t){return!!(0,c.isConfigValueValid)("opposite shift mode",e,[["off","on","keymap"]])&&(b.oppositeShiftMode=e,S("oppositeShiftMode",t),p.dispatch("oppositeShiftMode",b.oppositeShiftMode),!0)}function re(e,t){return!!(0,c.isConfigValueValid)("page width",e,[["max","100","125","150","200"]])&&(b.pageWidth=e,$("#centerContent").removeClass("wide125"),$("#centerContent").removeClass("wide150"),$("#centerContent").removeClass("wide200"),$("#centerContent").removeClass("widemax"),"100"!==e&&$("#centerContent").addClass("wide"+e),S("pageWidth",t),p.dispatch("pageWidth",b.pageWidth),!0)}function de(e,t){return!!(0,c.isConfigValueValid)("caret style",e,[["off","default","block","outline","underline","carrot","banana"]])&&(b.caretStyle=e,$("#caret").removeClass("off"),$("#caret").removeClass("default"),$("#caret").removeClass("underline"),$("#caret").removeClass("outline"),$("#caret").removeClass("block"),$("#caret").removeClass("carrot"),$("#caret").removeClass("banana"),"off"==e?$("#caret").addClass("off"):"default"==e?$("#caret").addClass("default"):"block"==e?$("#caret").addClass("block"):"outline"==e?$("#caret").addClass("outline"):"underline"==e?$("#caret").addClass("underline"):"carrot"==e?$("#caret").addClass("carrot"):"banana"==e&&$("#caret").addClass("banana"),S("caretStyle",t),p.dispatch("caretStyle",b.caretStyle),!0)}function ue(e,t){return!!(0,c.isConfigValueValid)("pace caret style",e,[["off","default","block","outline","underline","carrot","banana"]])&&(b.paceCaretStyle=e,$("#paceCaret").removeClass("off"),$("#paceCaret").removeClass("default"),$("#paceCaret").removeClass("underline"),$("#paceCaret").removeClass("outline"),$("#paceCaret").removeClass("block"),$("#paceCaret").removeClass("carrot"),$("#paceCaret").removeClass("banana"),"default"==e?$("#paceCaret").addClass("default"):"block"==e?$("#paceCaret").addClass("block"):"outline"==e?$("#paceCaret").addClass("outline"):"underline"==e?$("#paceCaret").addClass("underline"):"carrot"==e?$("#paceCaret").addClass("carrot"):"banana"==e&&$("#paceCaret").addClass("banana"),S("paceCaretStyle",t),p.dispatch("paceCaretStyle",b.paceCaretStyle),!0)}function le(e,t){return!!(0,c.isConfigValueValid)("show timer progress",e,["boolean"])&&(b.showTimerProgress=e,S("showTimerProgress",t),p.dispatch("showTimerProgress",b.showTimerProgress),!0)}function ce(e,t){return!!(0,c.isConfigValueValid)("show live WPM",e,["boolean"])&&(b.showLiveWpm=e,S("showLiveWpm",t),p.dispatch("showLiveWpm",b.showLiveWpm),!0)}function pe(e,t){return!!(0,c.isConfigValueValid)("show live acc",e,["boolean"])&&(b.showLiveAcc=e,S("showLiveAcc",t),p.dispatch("showLiveAcc",b.showLiveAcc),!0)}function fe(e,t){return!!(0,c.isConfigValueValid)("show live burst",e,["boolean"])&&(b.showLiveBurst=e,S("showLiveBurst",t),p.dispatch("showLiveBurst",b.showLiveBurst),!0)}function he(e,t){return!!(0,c.isConfigValueValid)("show average",e,[["off","wpm","acc","both"]])&&(b.showAverage=e,S("showAverage",t),p.dispatch("showAverage",b.showAverage,t),!0)}function me(e,t){return!!(0,c.isConfigValueValid)("highlight mode",e,[["off","letter","word"]])&&("word"!==e||"nospace"!==b.funbox&&"read_ahead"!==b.funbox&&"read_ahead_easy"!==b.funbox&&"read_ahead_hard"!==b.funbox&&"tts"!==b.funbox&&"arrows"!==b.funbox?(b.highlightMode=e,S("highlightMode",t),p.dispatch("highlightMode",b.highlightMode),!0):(l.add("Can't use word highlight with this funbox",0),!1))}function ge(e,t){return!!(0,c.isConfigValueValid)("tape mode",e,[["off","letter","word"]])&&("off"!==e&&!0===b.showAllLines&&X(!1,!0),b.tapeMode=e,S("tapeMode",t),p.dispatch("tapeMode",b.tapeMode),!0)}function ve(e,t){return!!(0,c.isConfigValueValid)("hide extra letters",e,["boolean"])&&(b.hideExtraLetters=e,S("hideExtraLetters",t),p.dispatch("hideExtraLetters",b.hideExtraLetters),!0)}function ye(e,t){return!!(0,c.isConfigValueValid)("timer style",e,[["bar","text","mini"]])&&(b.timerStyle=e,S("timerStyle",t),p.dispatch("timerStyle",b.timerStyle),!0)}function be(e,t){return!!(0,c.isConfigValueValid)("timer color",e,[["black","sub","text","main"]])&&(b.timerColor=e,$("#timer").removeClass("timerSub"),$("#timer").removeClass("timerText"),$("#timer").removeClass("timerMain"),$("#timerNumber").removeClass("timerSub"),$("#timerNumber").removeClass("timerText"),$("#timerNumber").removeClass("timerMain"),$("#largeLiveWpmAndAcc").removeClass("timerSub"),$("#largeLiveWpmAndAcc").removeClass("timerText"),$("#largeLiveWpmAndAcc").removeClass("timerMain"),$("#miniTimerAndLiveWpm").removeClass("timerSub"),$("#miniTimerAndLiveWpm").removeClass("timerText"),$("#miniTimerAndLiveWpm").removeClass("timerMain"),"main"===e?($("#timer").addClass("timerMain"),$("#timerNumber").addClass("timerMain"),$("#largeLiveWpmAndAcc").addClass("timerMain"),$("#miniTimerAndLiveWpm").addClass("timerMain")):"sub"===e?($("#timer").addClass("timerSub"),$("#timerNumber").addClass("timerSub"),$("#largeLiveWpmAndAcc").addClass("timerSub"),$("#miniTimerAndLiveWpm").addClass("timerSub")):"text"===e&&($("#timer").addClass("timerText"),$("#timerNumber").addClass("timerText"),$("#largeLiveWpmAndAcc").addClass("timerText"),$("#miniTimerAndLiveWpm").addClass("timerText")),S("timerColor",t),p.dispatch("timerColor",b.timerColor),!0)}function we(e,t){return!!(0,c.isConfigValueValid)("timer opacity",e,[["0.25","0.5","0.75","1"]])&&(b.timerOpacity=e,S("timerOpacity",t),p.dispatch("timerOpacity",b.timerOpacity),!0)}function $e(e,t){return!!(0,c.isConfigValueValid)("key tips",e,["boolean"])&&(b.showKeyTips=e,b.showKeyTips?$("#bottom .keyTips").removeClass("hidden"):$("#bottom .keyTips").addClass("hidden"),S("showKeyTips",t),p.dispatch("showKeyTips",b.showKeyTips),!0)}function Ce(e,t){if(!(0,c.isConfigValueValid)("time",e,["number"]))return!1;const o=isNaN(e)||e<0?f.default.time:e;$("#top .config .time .textButton").removeClass("active");const n=[15,30,60,120].includes(o)?o:"custom";return b.time=o,$("#top .config .time .textButton[timeConfig='"+n+"']").addClass("active"),S("time",t),p.dispatch("time",b.time),!0}function Se(e,t,o){return!!(0,c.isConfigValueValid)("quote length",e,[[-3,-2,-1,0,1,2,3],"numberArray"])&&(Array.isArray(e)?(1===e.length&&-1===e[0]&&(e=[1]),b.quoteLength=e):(Array.isArray(b.quoteLength)||(b.quoteLength=[]),(null===e||isNaN(e)||e<-3||e>3)&&(e=1),e=parseInt(e.toString()),o?b.quoteLength.includes(e)?b.quoteLength.length>1&&(b.quoteLength=b.quoteLength.filter((t=>t!==e))):b.quoteLength.push(e):b.quoteLength=[e]),$("#top .config .quoteLength .textButton").removeClass("active"),b.quoteLength.forEach((e=>{$("#top .config .quoteLength .textButton[quoteLength='"+e+"']").addClass("active")})),S("quoteLength",t),p.dispatch("quoteLength",b.quoteLength),!0)}function _e(e,t){if(!(0,c.isConfigValueValid)("words",e,["number"]))return!1;const o=e<0||e>1e5?f.default.words:e;$("#top .config .wordCount .textButton").removeClass("active");const n=[10,25,50,100,200].includes(o)?o:"custom";return b.words=o,$("#top .config .wordCount .textButton[wordCount='"+n+"']").addClass("active"),S("words",t),p.dispatch("words",b.words),!0}function ke(e,t){return!!(0,c.isConfigValueValid)("smooth caret",e,["boolean"])&&(b.smoothCaret=e,e?$("#caret").css("animation-name","caretFlashSmooth"):$("#caret").css("animation-name","caretFlashHard"),S("smoothCaret",t),p.dispatch("smoothCaret",b.smoothCaret),!0)}function xe(e,t){return!!(0,c.isConfigValueValid)("start graphs at zero",e,["boolean"])&&(b.startGraphsAtZero=e,S("startGraphsAtZero",t),p.dispatch("startGraphsAtZero",b.startGraphsAtZero),!0)}function Te(e,t){return!!(0,c.isConfigValueValid)("smooth line scroll",e,["boolean"])&&(b.smoothLineScroll=e,S("smoothLineScroll",t),p.dispatch("smoothLineScroll",b.smoothLineScroll),!0)}function Pe(e,t){return!!(0,c.isConfigValueValid)("quick restart mode",e,[["off","esc","tab"]])&&("off"===e?$(".pageTest #restartTestButton").removeClass("hidden"):$(".pageTest #restartTestButton").addClass("hidden"),b.quickRestart=e,S("quickRestart",t),p.dispatch("quickRestart",b.quickRestart),!0)}function Me(e,t){return!!(0,c.isConfigValueValid)("font family",e,["string"])&&(""===e&&(e="roboto_mono",l.add("Empty input received, reverted to the default font.",0,3,"Custom font")),(0,c.isConfigKeyValid)(e)?(b.fontFamily=e,document.documentElement.style.setProperty("--font",`"${e.replace(/_/g," ")}", "Roboto Mono", "Vazirmatn"`),S("fontFamily",t),p.dispatch("fontFamily",b.fontFamily),!0):(l.add(`Invalid font name value: "${e}".`,-1,3,"Custom font"),!1))}function Oe(e,t){return!!(0,c.isConfigValueValid)("freedom mode",e,["boolean"])&&(null==e&&(e=!1),b.freedomMode=e,b.freedomMode&&"off"!==b.confidenceMode&&(b.confidenceMode="off"),S("freedomMode",t),p.dispatch("freedomMode",b.freedomMode),!0)}function Le(e,t){return!!(0,c.isConfigValueValid)("confidence mode",e,[["off","on","max"]])&&(b.confidenceMode=e,"off"!==b.confidenceMode&&(b.freedomMode=!1,b.stopOnError="off"),S("confidenceMode",t),p.dispatch("confidenceMode",b.confidenceMode,t),!0)}function We(e,t){return!!(0,c.isConfigValueValid)("indicate typos",e,[["off","below","replace"]])&&(b.indicateTypos=e,S("indicateTypos",t),p.dispatch("indicateTypos",b.indicateTypos),!0)}function Ae(e,t){return!!(0,c.isConfigValueValid)("custom theme",e,["boolean"])&&(b.customTheme=e,S("customTheme",t),p.dispatch("customTheme",b.customTheme),!0)}function Be(e,t){return!!(0,c.isConfigValueValid)("theme light",e,["string"])&&(b.themeLight=e,S("themeLight",t),p.dispatch("themeLight",b.themeLight,t),!0)}function Ee(e,t){return!!(0,c.isConfigValueValid)("theme dark",e,["string"])&&(b.themeDark=e,S("themeDark",t),p.dispatch("themeDark",b.themeDark,t),!0)}function je(e,t){if(!(0,c.isConfigValueValid)("random theme",e,[["off","on","fav","light","dark","custom"]]))return!1;if("custom"===e){if(null===h.Auth.currentUser)return b.randomTheme=e,!1;if(!d.getSnapshot())return!0;if(0===d.getSnapshot().customThemes.length)return l.add("You need to create a custom theme first",0),b.randomTheme="off",!1}return b.randomTheme=e,S("randomTheme",t),p.dispatch("randomTheme",b.randomTheme),!0}function Re(e,t){return!!(0,c.isConfigValueValid)("british english",e,["boolean"])&&(e||(e=!1),b.britishEnglish=e,S("britishEnglish",t),p.dispatch("britishEnglish",b.britishEnglish),!0)}function Ie(e,t){return!!(0,c.isConfigValueValid)("lazy mode",e,["boolean"])&&(e||(e=!1),b.lazyMode=e,S("lazyMode",t),p.dispatch("lazyMode",b.lazyMode,t),!0)}function De(e,t){return!!(0,c.isConfigValueValid)("language",e,["string"])&&(b.language=e,m.log("changedLanguage",{language:e}),S("language",t),p.dispatch("language",b.language),!0)}function qe(e,t){return!!(0,c.isConfigValueValid)("monkey",e,["boolean"])&&(b.monkey=e,S("monkey",t),p.dispatch("monkey",b.monkey),!0)}function Fe(e,t){return!!(0,c.isConfigValueValid)("keymap mode",e,[["off","static","react","next"]])&&($(".activeKey").removeClass("activeKey"),$(".keymapKey").attr("style",""),b.keymapMode=e,S("keymapMode",t),p.dispatch("keymapMode",b.keymapMode,t),!0)}function Ve(e,t){return!!(0,c.isConfigValueValid)("keymap legend style",e,[["lowercase","uppercase","blank","dynamic"]])&&(["lowercase","uppercase","blank","dynamic"].forEach((e=>{$(".keymapLegendStyle").removeClass(e)})),e=e||"lowercase",$(".keymapKey > .letter").css("display",""),$(".keymapKey > .letter").css("text-transform",""),"uppercase"===e&&$(".keymapKey > .letter").css("text-transform","capitalize"),"blank"===e&&$(".keymapKey > .letter").css("display","none"),$(".keymapLegendStyle").addClass(e),b.keymapLegendStyle=e,S("keymapLegendStyle",t),p.dispatch("keymapLegendStyle",b.keymapLegendStyle),!0)}function Ke(e,t){return!!(0,c.isConfigValueValid)("keymap style",e,[["staggered","alice","matrix","split","split_matrix"]])&&(e=e||"staggered",b.keymapStyle=e,S("keymapStyle",t),p.dispatch("keymapStyle",b.keymapStyle),!0)}function He(e,t){return!!(0,c.isConfigValueValid)("keymap layout",e,["string"])&&(b.keymapLayout=e,S("keymapLayout",t),p.dispatch("keymapLayout",b.keymapLayout),!0)}function ze(e,t){return!!(0,c.isConfigValueValid)("layout",e,["string"])&&(b.layout=e,S("layout",t),p.dispatch("layout",b.layout,t),!0)}function Ne(e,t){return!!(0,c.isConfigValueValid)("font size",e,[["1","125","15","2","3","4"]])&&(b.fontSize=e,$("#words").removeClass("size125"),$("#caret, #paceCaret").removeClass("size125"),$("#words").removeClass("size15"),$("#caret, #paceCaret").removeClass("size15"),$("#words").removeClass("size2"),$("#caret, #paceCaret").removeClass("size2"),$("#words").removeClass("size3"),$("#caret, #paceCaret").removeClass("size3"),$("#words").removeClass("size35"),$("#caret, #paceCaret").removeClass("size35"),$("#words").removeClass("size4"),$("#caret, #paceCaret").removeClass("size4"),$("#miniTimerAndLiveWpm").removeClass("size125"),$("#miniTimerAndLiveWpm").removeClass("size15"),$("#miniTimerAndLiveWpm").removeClass("size2"),$("#miniTimerAndLiveWpm").removeClass("size3"),$("#miniTimerAndLiveWpm").removeClass("size35"),$("#miniTimerAndLiveWpm").removeClass("size4"),"125"==e?($("#words").addClass("size125"),$("#caret, #paceCaret").addClass("size125"),$("#miniTimerAndLiveWpm").addClass("size125")):"15"==e?($("#words").addClass("size15"),$("#caret, #paceCaret").addClass("size15"),$("#miniTimerAndLiveWpm").addClass("size15")):"2"==e?($("#words").addClass("size2"),$("#caret, #paceCaret").addClass("size2"),$("#miniTimerAndLiveWpm").addClass("size2")):"3"==e?($("#words").addClass("size3"),$("#caret, #paceCaret").addClass("size3"),$("#miniTimerAndLiveWpm").addClass("size3")):"4"==e&&($("#words").addClass("size4"),$("#caret, #paceCaret").addClass("size4"),$("#miniTimerAndLiveWpm").addClass("size4")),S("fontSize",t),p.dispatch("fontSize",b.fontSize),!0)}function Qe(e,t){return!!(0,c.isConfigValueValid)("custom background",e,["string"])&&(e=e.trim(),/(https|http):\/\/(www\.|).+\..+\/.+(\.png|\.gif|\.jpeg|\.jpg)/gi.test(e)&&!/[<>]/.test(e)||""==e?(b.customBackground=e,S("customBackground",t),p.dispatch("customBackground",b.customBackground)):l.add("Invalid custom background URL",0),!0)}function Ue(e,t){return s(this,void 0,void 0,(function*(){const o=e.trim();if(!(yield(0,c.isConfigValueValidAsync)("layoutfluid",o,["layoutfluid"])))return!1;const n=o.replace(/ /g,"#");return b.customLayoutfluid=n,$(".pageSettings .section.customLayoutfluid input").val(n.replace(/#/g," ")),S("customLayoutfluid",t),p.dispatch("customLayoutFluid",b.customLayoutfluid),!0}))}function Ge(e,t){return!!(0,c.isConfigValueValid)("custom background size",e,[["max","cover","contain"]])&&("cover"!=e&&"contain"!=e&&"max"!=e&&(e="cover"),b.customBackgroundSize=e,S("customBackgroundSize",t),p.dispatch("customBackgroundSize",b.customBackgroundSize),!0)}function Je(e,t){return!!(0,c.isConfigValueValid)("custom background filter",e,["numberArray"])&&(b.customBackgroundFilter=e,S("customBackgroundFilter",t),p.dispatch("customBackgroundFilter",b.customBackgroundFilter),!0)}function Ze(e,t){return!!(0,c.isConfigValueValid)("monkey power level",e,[["off","1","2","3","4"]])&&(["off","1","2","3","4"].includes(e)||(e="off"),b.monkeyPowerLevel=e,S("monkeyPowerLevel",t),p.dispatch("monkeyPowerLevel",b.monkeyPowerLevel),!0)}function Ye(e,t){return!!(0,c.isConfigValueValid)("burst heatmap",e,["boolean"])&&(e||(e=!1),b.burstHeatmap=e,S("burstHeatmap",t),p.dispatch("burstHeatmap",b.burstHeatmap),!0)}function Xe(e){if(!e)return;const t=e;if(Object.keys(f.default).forEach((e=>{if(void 0===t[e]){const o=f.default[e];t[e]=o}})),null!=t){Be(t.themeLight,!0),Ee(t.themeDark,!0),o=t.theme,n=t.customTheme,a=t.customThemeColors,i=t.autoSwitchTheme,!0,(0,c.isConfigValueValid)("themes",o,["string"])&&(9===a.length&&(n&&l.add("Missing sub alt color. Please edit it in the custom theme settings and save your changes.",0,7),a.splice(4,0,"#000000")),b.customThemeColors=a,b.theme=o,b.customTheme=n,b.autoSwitchTheme=i,S("theme",true),p.dispatch("setThemes",n)),Ue(t.customLayoutfluid,!0),Qe(t.customBackground,!0),Ge(t.customBackgroundSize,!0),Je(t.customBackgroundFilter,!0),Pe(t.quickRestart,!0),$e(t.showKeyTips,!0),Ce(t.time,!0),Se(t.quoteLength,!0),_e(t.words,!0),De(t.language,!0),ze(t.layout,!0),Ne(t.fontSize,!0),Oe(t.freedomMode,!0),de(t.caretStyle,!0),ue(t.paceCaretStyle,!0),L(t.difficulty,!0),B(t.blindMode,!0),ee(t.quickEnd,!0),ne(t.flipTestColors,!0),ae(t.colorfulMode,!0),Le(t.confidenceMode,!0),We(t.indicateTypos,!0),ye(t.timerStyle,!0),be(t.timerColor,!0),we(t.timerOpacity,!0),Fe(t.keymapMode,!0),Ke(t.keymapStyle,!0),Ve(t.keymapLegendStyle,!0),He(t.keymapLayout,!0),Me(t.fontFamily,!0),ke(t.smoothCaret,!0),Te(t.smoothLineScroll,!0),ce(t.showLiveWpm,!0),pe(t.showLiveAcc,!0),fe(t.showLiveBurst,!0),le(t.showTimerProgress,!0),I(t.alwaysShowDecimalPlaces,!0),J(t.alwaysShowWordsHistory,!0),Z(t.singleListCommandLine,!0),Y(t.capsLockWarning,!0),P(t.playSoundOnError,!0),M(t.playSoundOnClick,!0),O(t.soundVolume,!0),R(t.stopOnError,!0),W(t.favThemes,!0),A(t.funbox,!0),je(t.randomTheme,!0),X(t.showAllLines,!0),q(t.showOutOfFocusWarning,!0),F(t.paceCaret,!0),V(t.paceCaretCustomSpeed,!0),K(t.repeatedPace,!0),re(t.pageWidth,!0),E(t.chartAccuracy,!0),j(t.chartStyle,!0),U(t.minBurst,!0),G(t.minBurstCustomSpeed,!0),H(t.minWpm,!0),z(t.minWpmCustomSpeed,!0),N(t.minAcc,!0),Q(t.minAccCustom,!0),k(t.numbers,!0),x(t.punctuation,!0),me(t.highlightMode,!0),D(t.alwaysShowCPM,!0),ve(t.hideExtraLetters,!0),xe(t.startGraphsAtZero,!0),ie(t.strictSpace,!0),se(t.oppositeShiftMode,!0),T(t.mode,!0),qe(t.monkey,!0),oe(t.repeatQuotes,!0),Ze(t.monkeyPowerLevel,!0),Ye(t.burstHeatmap,!0),Re(t.britishEnglish,!0),Ie(t.lazyMode,!0),he(t.showAverage,!0),ge(t.tapeMode,!0);try{te(t.enableAds,!0),"max"===b.enableAds||"on"===b.enableAds?("max"===b.enableAds?($("#ad_rich_media").removeClass("hidden"),$("#ad_rich_media").html()):$("#ad_rich_media").remove(),$("#ad_footer").html(),$("#ad_footer").removeClass("hidden"),$("#ad_about1").html(),$("#ad_about1").removeClass("hidden"),$("#ad_about2").html(),$("#ad_about2").removeClass("hidden"),$("#ad_settings0").html(),$("#ad_settings0").removeClass("hidden"),$("#ad_settings1").html(),$("#ad_settings1").removeClass("hidden"),$("#ad_settings2").html(),$("#ad_settings2").removeClass("hidden"),$("#ad_settings3").html(),$("#ad_settings3").removeClass("hidden"),$("#ad_account").html(),$("#ad_account").removeClass("hidden"),$(".footerads").removeClass("hidden")):($("#adScript").remove(),$(".footerads").remove(),$("#ad_left").remove(),$("#ad_right").remove(),$("#ad_footer").remove(),$("#ad_footer2").remove(),$("#ad_footer3").remove(),$("#ad_settings0").remove(),$("#ad_settings1").remove(),$("#ad_settings2").remove(),$("#ad_settings3").remove(),$("#ad_account").remove(),$("#ad_about1").remove(),$("#ad_about2").remove())}catch(e){l.add("Error initialising ads: "+e.message),console.log("error initialising ads "+e.message),$(".footerads").remove(),$("#ad_left").remove(),$("#ad_right").remove(),$("#ad_footer").remove(),$("#ad_footer2").remove(),$("#ad_footer3").remove(),$("#ad_settings0").remove(),$("#ad_settings1").remove(),$("#ad_settings2").remove(),$("#ad_settings3").remove(),$("#ad_account").remove(),$("#ad_about1").remove(),$("#ad_about2").remove()}p.dispatch("configApplied",void 0,void 0,void 0,b)}var o,n,a,i}t.saveFullConfigToLocalStorage=_,t.setNumbers=k,t.setPunctuation=x,t.setMode=T,t.setPlaySoundOnError=P,t.setPlaySoundOnClick=M,t.setSoundVolume=O,t.setDifficulty=L,t.setFavThemes=W,t.setFunbox=A,t.setBlindMode=B,t.setChartAccuracy=E,t.setChartStyle=j,t.setStopOnError=R,t.setAlwaysShowDecimalPlaces=I,t.setAlwaysShowCPM=D,t.setShowOutOfFocusWarning=q,t.setPaceCaret=F,t.setPaceCaretCustomSpeed=V,t.setRepeatedPace=K,t.setMinWpm=H,t.setMinWpmCustomSpeed=z,t.setMinAcc=N,t.setMinAccCustom=Q,t.setMinBurst=U,t.setMinBurstCustomSpeed=G,t.setAlwaysShowWordsHistory=J,t.setSingleListCommandLine=Z,t.setCapsLockWarning=Y,t.setShowAllLines=X,t.setQuickEnd=ee,t.setEnableAds=te,t.setRepeatQuotes=oe,t.setFlipTestColors=ne,t.setColorfulMode=ae,t.setStrictSpace=ie,t.setOppositeShiftMode=se,t.setPageWidth=re,t.setCaretStyle=de,t.setPaceCaretStyle=ue,t.setShowTimerProgress=le,t.setShowLiveWpm=ce,t.setShowLiveAcc=pe,t.setShowLiveBurst=fe,t.setShowAverage=he,t.setHighlightMode=me,t.setTapeMode=ge,t.setHideExtraLetters=ve,t.setTimerStyle=ye,t.setTimerColor=be,t.setTimerOpacity=we,t.setKeyTips=$e,t.setTimeConfig=Ce,t.setQuoteLength=Se,t.setWordCount=_e,t.setSmoothCaret=ke,t.setStartGraphsAtZero=xe,t.setSmoothLineScroll=Te,t.setQuickRestartMode=Pe,t.previewFontFamily=function(e){return!!(0,c.isConfigValueValid)("preview font family",e,["string"])&&(document.documentElement.style.setProperty("--font",'"'+e.replace(/_/g," ")+'", "Roboto Mono", "Vazirmatn"'),!0)},t.setFontFamily=Me,t.setFreedomMode=Oe,t.setConfidenceMode=Le,t.setIndicateTypos=We,t.setAutoSwitchTheme=function(e,t){return!!(0,c.isConfigValueValid)("auto switch theme",e,["boolean"])&&(e=null!=e?e:f.default.autoSwitchTheme,b.autoSwitchTheme=e,S("autoSwitchTheme",t),p.dispatch("autoSwitchTheme",b.autoSwitchTheme),!0)},t.setCustomTheme=Ae,t.setTheme=function(e,t){return!!(0,c.isConfigValueValid)("theme",e,["string"])&&(b.theme=e,!0===b.customTheme&&Ae(!1),S("theme",t),p.dispatch("theme",b.theme),!0)},t.setThemeLight=Be,t.setThemeDark=Ee,t.setRandomTheme=je,t.setBritishEnglish=Re,t.setLazyMode=Ie,t.setCustomThemeColors=function(e,t){return!!(0,c.isConfigValueValid)("custom theme colors",e,["stringArray"])&&(9===e.length&&(l.add("Missing sub alt color. Please edit it in the custom theme settings and save your changes.",0,7),e.splice(4,0,"#000000")),void 0!==e&&(b.customThemeColors=e),S("customThemeColors",t),p.dispatch("customThemeColors",b.customThemeColors,t),!0)},t.setLanguage=De,t.setMonkey=qe,t.setKeymapMode=Fe,t.setKeymapLegendStyle=Ve,t.setKeymapStyle=Ke,t.setKeymapLayout=He,t.setLayout=ze,t.setFontSize=Ne,t.setCustomBackground=Qe,t.setCustomLayoutfluid=Ue,t.setCustomBackgroundSize=Ge,t.setCustomBackgroundFilter=Je,t.setMonkeyPowerLevel=Ze,t.setBurstHeatmap=Ye,t.apply=Xe,t.reset=function(){p.dispatch("fullConfigChange"),Xe(f.default),_()},t.loadFromLocalStorage=function(){console.log("loading localStorage config");const e=window.localStorage.getItem("config");let o;if(null!=e&&""!==e){try{o=JSON.parse(e)}catch(e){o={}}Xe(o),console.log("applying localStorage config"),t.localStorageConfig=o,_(!0),console.log("saving localStorage config")}y()},t.getConfigChanges=function(){const e={};return Object.keys(b).filter((e=>b[e]!=f.default[e])).forEach((t=>{e[t]=b[t]})),e},t.setConfig=function(e){b=e},t.loadPromise=new Promise((e=>{y=e})),t.default=b},2191:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default={theme:"serika_dark",themeLight:"serika",themeDark:"serika_dark",autoSwitchTheme:!1,customTheme:!1,customThemeColors:["#323437","#e2b714","#e2b714","#646669","#2c2e31","#d1d0c5","#ca4754","#7e2a33","#ca4754","#7e2a33"],favThemes:[],showKeyTips:!0,showLiveWpm:!1,showTimerProgress:!0,smoothCaret:!0,quickRestart:"off",punctuation:!1,numbers:!1,words:50,time:30,mode:"time",quoteLength:[1],language:"english",fontSize:"15",freedomMode:!1,resultFilters:null,difficulty:"normal",blindMode:!1,quickEnd:!1,caretStyle:"default",paceCaretStyle:"default",flipTestColors:!1,layout:"default",funbox:"none",confidenceMode:"off",indicateTypos:"off",timerStyle:"mini",colorfulMode:!1,randomTheme:"off",timerColor:"main",timerOpacity:"1",stopOnError:"off",showAllLines:!1,keymapMode:"off",keymapStyle:"staggered",keymapLegendStyle:"lowercase",keymapLayout:"overrideSync",fontFamily:"Roboto_Mono",smoothLineScroll:!1,alwaysShowDecimalPlaces:!1,alwaysShowWordsHistory:!1,singleListCommandLine:"manual",capsLockWarning:!0,playSoundOnError:!1,playSoundOnClick:"off",soundVolume:"0.5",startGraphsAtZero:!0,showOutOfFocusWarning:!0,paceCaret:"off",paceCaretCustomSpeed:100,repeatedPace:!0,pageWidth:"125",chartAccuracy:!0,chartStyle:"line",minWpm:"off",minWpmCustomSpeed:100,highlightMode:"letter",alwaysShowCPM:!1,enableAds:"off",hideExtraLetters:!1,strictSpace:!1,minAcc:"off",minAccCustom:90,showLiveAcc:!1,showLiveBurst:!1,monkey:!1,repeatQuotes:"off",oppositeShiftMode:"off",customBackground:"",customBackgroundSize:"cover",customBackgroundFilter:[0,1,1,1,1],customLayoutfluid:"qwerty#dvorak#colemak",monkeyPowerLevel:"off",minBurst:"off",minBurstCustomSpeed:100,burstHeatmap:!1,britishEnglish:!1,lazyMode:!1,showAverage:"off",tapeMode:"off"}},8361:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultSnap=void 0,t.defaultSnap={results:void 0,personalBests:{time:{},words:{},zen:{zen:[]},quote:{custom:[]},custom:{custom:[]}},name:"",customThemes:[],presets:[],tags:[],favouriteThemes:[],banned:void 0,verified:void 0,emailVerified:void 0,lbMemory:{time:{15:{english:0},60:{english:0}}},typingStats:{timeTyping:0,startedTests:0,completedTests:0},quoteRatings:void 0,quoteMod:!1,favoriteQuotes:{},addedAt:0,filterPresets:[]}},3660:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.firebaseConfig=void 0,t.firebaseConfig={apiKey:"AIzaSyB5m_AnO575kvWriahcF1SFIWp8Fj3gQno",authDomain:"monkey-type.firebaseapp.com",databaseURL:"https://monkey-type.firebaseio.com",projectId:"monkey-type",storageBucket:"monkey-type.appspot.com",messagingSenderId:"789788471140",appId:"1:789788471140:web:7e31b15959d68ac0a51471",measurementId:"G-PFV65WPEWF"}},4674:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.signOut=t.addPasswordAuth=t.addGoogleAuth=t.signInWithGoogle=t.forgotPassword=t.signIn=t.loadUser=t.getDataAndInit=t.sendVerificationEmail=t.gmailProvider=void 0;const d=r(o(7355)),u=i(o(3368)),l=i(o(6705)),c=l,p=i(o(5344)),f=i(o(3388)),h=i(o(8835)),m=i(o(2681)),g=i(o(6350)),v=i(o(3013)),y=i(o(8911)),b=i(o(9817)),w=i(o(5705)),C=i(o(7346)),S=i(o(6443)),_=i(o(4335)),k=i(o(2588)),x=i(o(1329)),T=i(o(5886)),P=i(o(2400)),M=i(o(9343)),O=i(o(3875)),L=i(o(9608)),W=i(o(7520)),A=o(2974),B=o(6617),E=o(8361),j=o(5701),R=o(5513),I=o(7193);t.gmailProvider=new A.GoogleAuthProvider;let D=!0;function q(){b.show();const e=B.Auth.currentUser;null!==e&&(0,A.sendEmailVerification)(e).then((()=>{b.hide(),u.add("Email sent to "+e.email,4e3)})).catch((e=>{b.hide(),u.add("Error: "+e.message,3e3),console.error(e.message)}))}function F(){return s(this,void 0,void 0,(function*(){try{console.log("getting account data"),"/account"!==window.location.pathname?_.updateBar(90):_.updateBar(45),_.updateText("Downloading user data..."),yield _.showBar(),yield g.initSnapshot()}catch(e){const t=e;p.loading(!1),429===t.responseCode&&(u.add("Doing so will save you bandwidth, make the next test be ready faster and will not sign you out (which could mean your new personal best would not save to your account).",0,0),u.add("You will run into this error if you refresh the website to restart the test. It is NOT recommended to do that. Instead, use tab + enter or just tab (with quick tab mode enabled) to restart the test.",0,0));const o=t.message||t;return u.add("Failed to get user data: "+o,-1),$("#top #menu .account").css("opacity",1),!1}"loading"==C.get()?_.updateBar(100):_.updateBar(45),_.updateText("Applying settings...");const e=g.getSnapshot();if($("#menu .textButton.account .text").text(e.name),(0,R.showFavoriteQuoteLength)(),x.loadTags(e.tags),Promise.all([f.getLanguageList(),f.getFunboxList()]).then((e=>{const[t,o]=e;t.forEach((e=>{x.defaultResultFilters.language[e]=!0})),o.forEach((e=>{x.defaultResultFilters.funbox[e.name]=!0})),x.load()})),e.needsToChangeName&&u.addBanner("Your name was reset. <a class='openNameChange'>Click here</a> to change it and learn more about why.",-1,void 0,!0,void 0,!0),c.changedBeforeDb)console.log("config changed before db"),p.loading(!1);else{if(null===c.localStorageConfig&&e.config)console.log("no local config, applying db"),p.loading(!1),c.apply(e.config),h.update(),c.saveFullConfigToLocalStorage(!0),v.restart(!1,!0);else if(void 0!==e.config){let t=!1;Object.keys(l.default).forEach((o=>{var n,a;const i=o;if(!t)try{"resultFilters"!==i&&(Array.isArray(l.default[i])?l.default[i].forEach(((o,n)=>{var a;const s=(null===(a=null==e?void 0:e.config)||void 0===a?void 0:a[i])[n];o!=s&&(t=!0,console.log(`.config is different: ${o} != ${s}`))})):l.default[i]!=(null===(n=null==e?void 0:e.config)||void 0===n?void 0:n[i])&&(t=!0,console.log(`..config is different ${i}: ${l.default[i]} != ${null===(a=null==e?void 0:e.config)||void 0===a?void 0:a[i]}`)))}catch(e){console.log(e),t=!0,console.log("...config is different")}})),t&&(console.log("configs are different, applying config from db"),p.loading(!1),c.apply(e.config),h.update(),c.saveFullConfigToLocalStorage(!0),"test"==C.get()&&v.restart(!1,!0),g.saveConfig(l.default))}c.setDbConfigLoaded(!0)}return"pb"!==l.default.paceCaret&&"average"!==l.default.paceCaret||S.get()||T.init(),p.loading(!1),x.updateTags(),P.updateTagCommands(),M.loadActiveFromLocalStorage(),O.updateButtons(),h.showAccountSection(),"/account"===window.location.pathname?yield W.downloadResults():y.set(!1),"/login"===window.location.pathname?(0,I.navigate)("/account"):(0,I.navigate)(),!0}))}function V(e){return s(this,void 0,void 0,(function*(){$(".pageAccount .content p.accountVerificatinNotice").remove(),!1===e.emailVerified&&$(".pageAccount .content").prepend('<p class="accountVerificatinNotice" style="text-align:center">Your account is not verified. <a class="sendVerificationEmail">Send the verification email again</a>.'),w.set(!1),p.loading(!0),!1===(yield F())&&U();const{discordId:t,discordAvatar:o}=g.getSnapshot();if(p.update(t,o),k.hidePreloader(),null!==v.notSignedInLastResult){v.setNotSignedInUid(e.uid);const t=yield d.default.results.save(v.notSignedInLastResult);if(200!==t.status)return u.add("Failed to save last result: "+t.message,-1);v.clearNotSignedInResult(),u.add("Last test result saved",1)}}))}t.sendVerificationEmail=q,t.getDataAndInit=F,t.loadUser=V;const K=B.Auth.onAuthStateChanged((function(e){return s(this,void 0,void 0,(function*(){const t=window.location.search,o=window.location.hash;console.log(`auth state changed, user ${!!e}`),e?yield V(e):("/account"==window.location.pathname&&window.history.replaceState("","","/login"),w.set(!1)),e||((0,I.navigate)(),setTimeout((()=>{y.set(!1)}),62.5)),L.loadCustomThemeFromUrl(t),L.loadTestSettingsFromUrl(t),L.linkDiscord(o),/challenge_.+/g.test(window.location.pathname)&&u.add("Challenge links temporarily disabled. Please use the command line to load the challenge manually",0,7)}))}));function H(){c.setChangedBeforeDb(!1),K(),k.showPreloader(),k.disableInputs(),k.disableSignUpButton(),k.disableSignInButton();const e=$(".pageLogin .login input")[0].value,t=$(".pageLogin .login input")[1].value,o=$(".pageLogin .login #rememberMe input").prop("checked")?A.browserLocalPersistence:A.browserSessionPersistence;(0,A.setPersistence)(B.Auth,o).then((function(){return(0,A.signInWithEmailAndPassword)(B.Auth,e,t).then((e=>s(this,void 0,void 0,(function*(){yield V(e.user)})))).catch((function(e){let t=e.message;"auth/wrong-password"===e.code?t="Incorrect password":"auth/user-not-found"===e.code?t="User not found":"auth/invalid-email"===e.code&&(t="Invalid email format (make sure you are using your email to login - not your username)"),u.add(t,-1),k.hidePreloader(),k.enableInputs(),k.enableSignInButton(),k.updateSignupButton()}))}))}function z(e){return s(this,void 0,void 0,(function*(){if(!D)return u.add("Please wait before requesting another password reset link",0,5e3);if(!e)return u.add("Please enter an email!",-1);try{yield(0,A.sendPasswordResetEmail)(B.Auth,e),u.add("Email sent",1,2)}catch(e){u.add(f.createErrorMessage(e,"Failed to send email"),-1)}D=!1,setTimeout((function(){D=!0}),1e4)}))}function N(){return s(this,void 0,void 0,(function*(){c.setChangedBeforeDb(!1),k.showPreloader(),k.disableInputs(),k.disableSignUpButton(),k.disableSignInButton(),K();const e=$(".pageLogin .login #rememberMe input").prop("checked")?A.browserLocalPersistence:A.browserSessionPersistence;yield(0,A.setPersistence)(B.Auth,e),(0,A.signInWithPopup)(B.Auth,t.gmailProvider).then((e=>s(this,void 0,void 0,(function*(){var t;(null===(t=(0,A.getAdditionalUserInfo)(e))||void 0===t?void 0:t.isNewUser)?(0,j.dispatch)(e,!0):yield V(e.user)})))).catch((e=>{let t=e.message;"auth/wrong-password"===e.code?t="Incorrect password":"auth/user-not-found"===e.code?t="User not found":"auth/invalid-email"===e.code?t="Invalid email format (make sure you are using your email to login - not your username)":"auth/popup-closed-by-user"===e.code&&(t="Popup closed by user"),u.add(t,-1),k.hidePreloader(),k.enableInputs(),k.enableSignInButton(),k.updateSignupButton()}))}))}function Q(){return s(this,void 0,void 0,(function*(){b.show(),null!==B.Auth.currentUser&&(0,A.linkWithPopup)(B.Auth.currentUser,t.gmailProvider).then((function(){b.hide(),u.add("Google authentication added",1),h.updateAuthSections()})).catch((function(e){b.hide(),u.add("Failed to add Google authentication: "+e.message,-1)}))}))}function U(){B.Auth.currentUser&&B.Auth.signOut().then((function(){u.add("Signed out",0,2),m.clear(),h.hideAccountSection(),p.update(),(0,I.navigate)("/login"),g.setSnapshot(E.defaultSnap),$(".pageLogin .button").removeClass("disabled"),$(".pageLogin input").prop("disabled",!1),(0,R.hideFavoriteQuoteLength)()})).catch((function(e){u.add(e.message,-1)}))}function G(){return s(this,void 0,void 0,(function*(){k.disableInputs(),k.disableSignUpButton(),k.showPreloader();const e=$(".pageLogin .register input")[0].value,t=$(".pageLogin .register input")[1].value,o=$(".pageLogin .register input")[2].value,n=$(".pageLogin .register input")[3].value,a=$(".pageLogin .register input")[4].value;if(""===e||""===t||""===o||""===n)return k.hidePreloader(),k.enableInputs(),k.updateSignupButton(),void u.add("Please fill in all fields",0);if(!t.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/))return u.add("Invalid email",0,3),k.hidePreloader(),k.enableInputs(),void k.updateSignupButton();if(t!==o)return u.add("Emails do not match",0,3),k.hidePreloader(),k.enableInputs(),void k.updateSignupButton();if(n.length<8)return u.add("Password must be at least 8 characters",0,3),k.hidePreloader(),k.enableInputs(),void k.updateSignupButton();const i=n.match(/[A-Z]/),s=n.match(/[\d]/),r=n.match(/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]/);if(!i||!s||!r)return u.add("Password must contain at least one capital letter, number, and special character",0,3),k.hidePreloader(),k.enableInputs(),void k.updateSignupButton();if(n!==a)return u.add("Passwords do not match",0,3),k.hidePreloader(),k.enableInputs(),void k.updateSignupButton();let l;K();try{l=yield(0,A.createUserWithEmailAndPassword)(B.Auth,t,n);const o=yield d.default.users.create(e,t,l.user.uid);if(200!==o.status)throw o;if(yield(0,A.updateProfile)(l.user,{displayName:e}),yield(0,A.sendEmailVerification)(l.user),m.clear(),$("#menu .textButton.account .text").text(e),$(".pageLogin .button").removeClass("disabled"),$(".pageLogin input").prop("disabled",!1),k.hidePreloader(),yield V(l.user),null!==v.notSignedInLastResult&&(v.setNotSignedInUid(l.user.uid),200===(yield d.default.results.save(v.notSignedInLastResult)).status)){const e=v.notSignedInLastResult;g.saveLocalResult(e),g.updateLocalStats(1,e.testDuration+e.incompleteTestSeconds-e.afkDuration)}u.add("Account created",1,3)}catch(e){l&&(yield d.default.users.delete(),yield l.user.delete()),console.log(e);const t=f.createErrorMessage(e,"Failed to create account");return u.add(t,-1),k.hidePreloader(),k.enableInputs(),k.updateSignupButton(),void U()}}))}t.signIn=H,t.forgotPassword=z,t.signInWithGoogle=N,t.addGoogleAuth=Q,t.addPasswordAuth=function(e,o){return s(this,void 0,void 0,(function*(){b.show();const n=B.Auth.currentUser;if(null===n)return;if(n.providerData.find((e=>"google.com"===e.providerId)))try{yield(0,A.reauthenticateWithPopup)(n,t.gmailProvider)}catch(e){b.hide();const t=f.createErrorMessage(e,"Failed to reauthenticate");return u.add(t,-1)}const a=A.EmailAuthProvider.credential(e,o);(0,A.linkWithCredential)(n,a).then((function(){b.hide(),u.add("Password authentication added",1),h.updateAuthSections()})).catch((function(e){b.hide(),u.add("Failed to add password authentication: "+e.message,-1)}))}))},t.signOut=U,$(".pageLogin #forgotPasswordButton").on("click",(()=>{const e=$(".pageLogin .login input")[0].value||"";z(prompt("Email address",e))})),$(".pageLogin .login input").keyup((e=>{"Enter"===e.key&&(c.setChangedBeforeDb(!1),H())})),$(".pageLogin .login .button.signIn").on("click",(()=>{c.setChangedBeforeDb(!1),H()})),$(".pageLogin .login .button.signInWithGoogle").on("click",(()=>{c.setChangedBeforeDb(!1),N()})),$(".signOut").on("click",(()=>{U()})),$(".pageLogin .register input").keyup((e=>{$(".pageLogin .register .button").hasClass("disabled")||"Enter"===e.key&&G()})),$(".pageLogin .register .button").on("click",(()=>{$(".pageLogin .register .button").hasClass("disabled")||G()})),$(".pageSettings #addGoogleAuth").on("click",(()=>s(void 0,void 0,void 0,(function*(){Q()})))),$(document).on("click",".pageAccount .sendVerificationEmail",(()=>{q()}))},3326:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.activateAnalytics=t.log=t.Analytics=void 0;const a=o(5296),i=o(5296),s=o(6617);t.log=function(e,o){return n(this,void 0,void 0,(function*(){try{(0,i.logEvent)(t.Analytics,e,o)}catch(e){console.log("Analytics unavailable")}}))};const r=localStorage.getItem("acceptedCookies");let d;function u(){t.Analytics=(0,a.getAnalytics)(s.app),(0,i.setAnalyticsCollectionEnabled)(t.Analytics,!0),$("body").append('\n    <script\n    async\n    src="https://www.googletagmanager.com/gtag/js?id=UA-165993088-1"\n  ><\/script>\n  <script>\n    window.dataLayer = window.dataLayer || [];\n    function gtag() {\n      dataLayer.push(arguments);\n    }\n    gtag("js", new Date());\n\n    gtag("config", "UA-165993088-1");\n  <\/script>')}d=r?JSON.parse(r):null,null!==d&&!0===d.analytics&&u(),t.activateAnalytics=u},7401:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getHTMLById=void 0;const o={1:{id:1,name:"Developer",description:"I made this",icon:"fa-rocket",color:"white",customStyle:"animation: rgb-bg 10s linear infinite;"},2:{id:2,name:"Collaborator",description:"I helped make this",icon:"fa-code",color:"white",customStyle:"animation: rgb-bg 10s linear infinite;"},3:{id:3,name:"Server Mod",description:"Discord server moderator",icon:"fa-hammer",color:"white",customStyle:"animation: rgb-bg 10s linear infinite;"},4:{id:4,name:"OG Account",description:"First 1000 users on the site",icon:"fa-baby",color:"var(--bg-color)",background:"var(--main-color)"},5:{id:5,name:"OG Discordian",description:"First 1000 Discord server members",icon:"fa-baby",color:"var(--bg-color)",background:"var(--main-color)"},6:{id:6,name:"Supporter",description:"Donated money",icon:"fa-heart",color:"var(--text-color)",background:"var(--sub-color)"},7:{id:7,name:"Sugar Daddy",description:"Donated a lot of money",icon:"fa-gem",color:"var(--bg-color)",background:"var(--main-color)"},8:{id:8,name:"Monkey Supporter",description:"Donated more money",icon:"fa-heart",color:"var(--bg-color)",background:"var(--main-color)"},9:{id:9,name:"White Hat",description:"Reported critical vulnerabilities on the site",icon:"fa-user-secret",color:"var(--bg-color)",background:"var(--main-color)"},10:{id:10,name:"Bug Hunter",description:"Reported bugs on the site",icon:"fa-bug",color:"var(--text-color)",background:"var(--sub-color)"},11:{id:11,name:"Content Creator",description:"Verified content creator",icon:"fa-video",color:"var(--text-color)",background:"var(--sub-color)"}};t.getHTMLById=function(e,t=!1,n=!1){const a=o[e];if(!a)return"";let i="";a.background&&(i+=`background: ${a.background};`),a.color&&(i+=`color: ${a.color};`),a.customStyle&&(i+=a.customStyle);const s=(t?a.name+": ":"")+a.description;let r="";return n||(r=`aria-label="${s}" data-balloon-pos="right"`),`<div class="badge" ${r} style="${i}">${a.icon?`<i class="fas ${a.icon}"></i>`:""}${t?"":`<div class="text">${a.name}</div>`}</div>`}},6953:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getResponse=t.reset=t.render=void 0;const o={};t.render=function(e,t){if(void 0!==o[t]&&null!==o[t])return;const n=grecaptcha.render(e,{sitekey:"6Lc-V8McAAAAAJ7s6LGNe7MBZnRiwbsbiWts87aj"});o[t]=n},t.reset=function(e){void 0!==o[e]&&null!==o[e]&&grecaptcha.reset(o[e])},t.getResponse=function(e){return void 0===o[e]||null===o[e]?"":grecaptcha.getResponse(o[e])}},7567:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.verify=t.clearActive=void 0;const r=i(o(3388)),d=i(o(3368)),u=i(o(2203)),l=i(o(8248)),c=i(o(8059)),p=i(o(6705)),f=p,h=i(o(8673)),m=i(o(1446)),g=i(o(1322));let v=!1;function y(){!g.activeChallenge||v||h.testRestarting||(d.add("Challenge cleared",0),g.setActiveChallenge(null))}t.clearActive=y,t.verify=function(e){try{if(g.activeChallenge){const t=e.afkDuration/e.testDuration*100;if(t>10)return d.add("Challenge failed: AFK time is greater than 10%",0),null;if(g.activeChallenge.requirements){let o=!0;const n=[];for(const a in g.activeChallenge.requirements){if(0==o)return null;const i=g.activeChallenge.requirements[a];if("wpm"==a){const t=Object.keys(i)[0];"exact"==t?Math.round(e.wpm)!=i.exact&&(o=!1,n.push(`WPM not ${i.exact}`)):"min"==t&&e.wpm<i.min&&(o=!1,n.push(`WPM below ${i.min}`))}else if("acc"==a){const t=Object.keys(i)[0];"exact"==t?e.acc!=i.exact&&(o=!1,n.push(`Accuracy not ${i.exact}`)):"min"==t&&e.acc<i.min&&(o=!1,n.push(`Accuracy below ${i.min}`))}else if("afk"==a)"max"==Object.keys(i)[0]&&Math.round(t)>i.max&&(o=!1,n.push(`AFK percentage above ${i.max}`));else if("time"==a)"min"==Object.keys(i)[0]&&Math.round(e.testDuration)<i.min&&(o=!1,n.push(`Test time below ${i.min}`));else if("funbox"==a){const t=i.exact;t!=e.funbox&&(o=!1,n.push(`${t} funbox not active`))}else if("raw"==a)"exact"==Object.keys(i)[0]&&Math.round(e.rawWpm)!=i.exact&&(o=!1,n.push(`Raw WPM not ${i.exact}`));else if("con"==a)"exact"==Object.keys(i)[0]&&Math.round(e.consistency)!=i.exact&&(o=!1,n.push(`Consistency not ${i.exact}`));else if("config"==a)for(const e in i){const t=i[e];p.default[e]!=t&&(o=!1,n.push(`${e} not set to ${t}`))}}return o?(g.activeChallenge.autoRole&&d.add("You will receive a role shortly. Please don't post a screenshot in challenge submissions.",1,5),d.add(`${g.activeChallenge.display} challenge passed!`,1),g.activeChallenge.name):(d.add(`${g.activeChallenge.display} challenge failed: ${n.join(", ")}`,0),null)}return d.add(`${g.activeChallenge.display} challenge passed!`,1),g.activeChallenge.name}return null}catch(e){return console.error(e),d.add(`Something went wrong when verifying challenge: ${e.message}`,0),null}},t.setup=function(e){return s(this,void 0,void 0,(function*(){v=!0,f.setFunbox("none");const t=(yield r.getChallengeList()).filter((t=>t.name===e))[0];let o;try{if(void 0===t)return d.add("Challenge not found",0),u.set(),setTimeout((()=>{$("#top .config").removeClass("hidden"),$(".page.pageTest").removeClass("hidden")}),250),!1;if("customTime"===t.type)f.setTimeConfig(t.parameters[0],!0),f.setMode("time",!0),f.setDifficulty("normal",!0),"englishMaster"===t.name&&(f.setLanguage("english_10k",!0),f.setNumbers(!0,!0),f.setPunctuation(!0,!0));else if("customWords"===t.type)f.setWordCount(t.parameters[0],!0),f.setMode("words",!0),f.setDifficulty("normal",!0);else if("customText"===t.type)l.setText(t.parameters[0].split(" ")),l.setIsTimeRandom(!1),l.setIsWordRandom(t.parameters[1]),l.setWord(t.parameters[2]),l.setTime(-1),f.setMode("custom",!0),f.setDifficulty("normal",!0);else if("script"===t.type){const e=yield fetch("/challenges/"+t.parameters[0]);let o=(yield e.text()).trim();o=o.replace(/[\n\r\t ]/gm," "),o=o.replace(/ +/gm," "),l.setText(o.split(" ")),l.setIsWordRandom(!1),l.setTime(-1),l.setWord(-1),f.setMode("custom",!0),f.setDifficulty("normal",!0),null!=t.parameters[1]&&f.setTheme(t.parameters[1]),null!=t.parameters[2]&&c.activate(t.parameters[2])}else"accuracy"===t.type?(f.setTimeConfig(0,!0),f.setMode("time",!0),f.setDifficulty("master",!0)):"funbox"===t.type?(f.setFunbox(t.parameters[0],!0),f.setDifficulty("normal",!0),"words"===t.parameters[1]?f.setWordCount(t.parameters[2],!0):"time"===t.parameters[1]&&f.setTimeConfig(t.parameters[2],!0),f.setMode(t.parameters[1],!0),void 0!==t.parameters[3]&&f.setDifficulty(t.parameters[3],!0)):"special"===t.type&&"semimak"===t.name&&(f.setMode("time",!0),f.setTimeConfig(120,!0),f.setLanguage("english_10k",!0),f.setPunctuation(!0,!0),f.setStopOnError("word",!0),f.setLayout("semimak",!0),f.setKeymapLayout("overrideSync",!0),f.setKeymapMode("static",!0));return u.set(),o=t.message,$("#top .config").removeClass("hidden"),$(".page.pageTest").removeClass("hidden"),void 0===o?d.add(`Challenge '${t.display}' loaded.`,0):d.add("Challenge loaded. "+o,0),g.setActiveChallenge(t),v=!1,!0}catch(e){return d.add("Something went wrong: "+e,-1),!1}}))},m.subscribe((e=>{["difficulty","numbers","punctuation","mode","funbox","paceCaret","showAllLines","showLiveWpm","highlightMode","time","words","keymapMode","keymapLayout","layout"].includes(e)&&y()}))},1833:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.updateAllChartColors=t.setDefaultFontFamily=t.updateColors=t.miniResult=t.accountActivity=t.accountHistory=t.accountHistoryActiveIndex=t.result=void 0;const d=o(3328),u=r(o(6679)),l=r(o(2341));d.Chart.register(d.BarController,d.BarElement,d.CategoryScale,d.Filler,d.LinearScale,d.LineController,d.LineElement,d.PointElement,d.ScatterController,d.TimeScale,d.TimeSeriesScale,d.Tooltip,u.default,l.default),d.Chart.defaults.animation.duration=0,d.Chart.defaults.elements.line.tension=.3,d.Chart.defaults.elements.line.fill="origin";const c=i(o(4897)),p=i(o(4203)),f=i(o(3388)),h=r(o(6705)),m=i(o(1446)),g=r(o(9546));o(2366);class v extends d.Chart{constructor(e,t){super(e,t)}updateColors(){y(this)}}function y(e){return s(this,void 0,void 0,(function*(){const t=yield p.get("bg"),o=yield p.get("sub"),n=yield p.get("main"),a=yield p.get("error");if(e.data.datasets.every((e=>0===e.data.length)))return;e.data.datasets[0].borderColor=n,e.data.datasets[1].borderColor=o,e.data.datasets[2]&&(e.data.datasets[2].borderColor=a),void 0===e.data.datasets[0].type?"line"===e.config.type?e.data.datasets[0].pointBackgroundColor=n:"bar"===e.config.type&&(e.data.datasets[0].backgroundColor=n):"bar"===e.data.datasets[0].type?e.data.datasets[0].backgroundColor=n:"line"===e.data.datasets[0].type&&(e.data.datasets[0].pointBackgroundColor=n),void 0===e.data.datasets[1].type?"line"===e.config.type?e.data.datasets[1].pointBackgroundColor=o:"bar"===e.config.type&&(e.data.datasets[1].backgroundColor=o):"bar"===e.data.datasets[1].type?e.data.datasets[1].backgroundColor=o:"line"===e.data.datasets[1].type&&(e.data.datasets[1].pointBackgroundColor=o);const i=e.options;Object.keys(i.scales).forEach((e=>{const t=i.scales[e];t.ticks.color=o,t.title.color=o}));try{e.data.datasets[0].trendlineLinear.style=o,e.data.datasets[1].trendlineLinear.style=o}catch(e){}e.options.plugins.annotation.annotations.forEach((e=>{"funbox-label"!==e.id&&(e.borderColor=o),e.label.backgroundColor=o,e.label.color=t})),e.update("none")}))}function b(e){d.Chart.defaults.font.family=e.replace(/_/g," ")}t.result=new v($("#wpmChart"),{type:"line",data:{labels:[],datasets:[{label:"wpm",data:[],borderColor:"rgba(125, 125, 125, 1)",borderWidth:2,yAxisID:"wpm",order:2,pointRadius:2},{label:"raw",data:[],borderColor:"rgba(125, 125, 125, 1)",borderWidth:2,yAxisID:"raw",order:3,pointRadius:2},{label:"errors",data:[],borderColor:"rgba(255, 125, 125, 1)",pointBackgroundColor:"rgba(255, 125, 125, 1)",borderWidth:2,order:1,yAxisID:"error",type:"scatter",pointStyle:"crossRot",pointRadius:function(e){const t=e.dataIndex,o=e.dataset.data[t];return(null!=o?o:0)<=0?0:3},pointHoverRadius:function(e){const t=e.dataIndex,o=e.dataset.data[t];return(null!=o?o:0)<=0?0:5}}]},options:{layout:{padding:{top:2}},responsive:!0,maintainAspectRatio:!1,scales:{x:{axis:"x",ticks:{autoSkip:!0,autoSkipPadding:20},display:!0,title:{display:!1,text:"Seconds"}},wpm:{axis:"y",display:!0,title:{display:!0,text:"Words per Minute"},beginAtZero:!0,min:0,ticks:{autoSkip:!0,autoSkipPadding:20},grid:{display:!0}},raw:{axis:"y",display:!1,title:{display:!0,text:"Raw Words per Minute"},beginAtZero:!0,min:0,ticks:{autoSkip:!0,autoSkipPadding:20},grid:{display:!1}},error:{axis:"y",display:!0,position:"right",title:{display:!0,text:"Errors"},beginAtZero:!0,ticks:{precision:0,autoSkip:!0,autoSkipPadding:20},grid:{display:!1}}},plugins:{annotation:{annotations:[]},tooltip:{animation:{duration:250},mode:"index",intersect:!1,callbacks:{afterLabel:function(e){try{$(".wordInputAfter").remove();const t=c.keypressPerSecond[parseInt(e.label)-1].words;[...new Set(t)].forEach((e=>{const t=$($("#resultWordsHistory .words .word")[e]),o=t.attr("input");null!=o&&t.append(`<div class="wordInputAfter">${o.replace(/\t/g,"_").replace(/\n/g,"_").replace(/</g,"&lt").replace(/>/g,"&gt")}</div>`)}))}catch(e){}return""}}}}}}),t.accountHistory=new v($(".pageAccount #accountHistoryChart"),{type:"line",data:{labels:[],datasets:[{yAxisID:"wpm",label:"wpm",fill:!1,data:[],borderColor:"#f44336",borderWidth:2,trendlineLinear:{style:"rgba(255,105,180, .8)",lineStyle:"dotted",width:4}},{yAxisID:"acc",label:"acc",fill:!1,data:[],borderColor:"#cccccc",borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,hover:{mode:"nearest",intersect:!1},scales:{x:{axis:"x",type:"timeseries",bounds:"ticks",display:!1,offset:!0,title:{display:!1,text:"Date"}},wpm:{axis:"y",beginAtZero:!0,min:0,ticks:{stepSize:10},display:!0,title:{display:!0,text:"Words per Minute"}},acc:{axis:"y",beginAtZero:!0,max:100,display:!0,position:"right",title:{display:!0,text:"Error rate (100 - accuracy)"},grid:{display:!1}}},plugins:{annotation:{annotations:[]},tooltip:{animation:{duration:250},enabled:!0,intersect:!1,external:function(e){e&&(e.tooltip.options.displayColors=!1)},callbacks:{title:function(){return""},beforeLabel:function(e){if(0!==e.datasetIndex){const t=e.dataset.data[e.dataIndex];return`error rate: ${f.roundTo2(t.errorRate)}%\nacc: ${f.roundTo2(100-t.errorRate)}%`}const t=e.dataset.data[e.dataIndex];let o=`${h.default.alwaysShowCPM?"cpm":"wpm"}: ${t.wpm}\nraw: ${t.raw}\nacc: ${t.acc}\n\nmode: ${t.mode} `;("time"==t.mode||"words"==t.mode)&&(o+=t.mode2);let n=t.difficulty;return null==n&&(n="normal"),o+=`\ndifficulty: ${n}`,o+=`\npunctuation: ${t.punctuation}\nlanguage: ${t.language}\n\ndate: ${(0,g.default)(new Date(t.timestamp),"dd MMM yyyy HH:mm")}`,o},label:function(){return""},afterLabel:function(e){return t.accountHistoryActiveIndex=e.dataIndex,""}}}}}}),t.accountActivity=new v($(".pageAccount #accountActivityChart"),{type:"bar",data:{labels:[],datasets:[{yAxisID:"count",label:"Seconds",data:[],trendlineLinear:{style:"rgba(255,105,180, .8)",lineStyle:"dotted",width:2},order:3},{yAxisID:"avgWpm",label:"Average Wpm",data:[],type:"line",order:2,tension:0,fill:!1}]},options:{responsive:!0,maintainAspectRatio:!1,hover:{mode:"nearest",intersect:!1},scales:{x:{axis:"x",ticks:{autoSkip:!0,autoSkipPadding:20},type:"time",time:{unit:"day",displayFormats:{day:"d MMM"}},bounds:"ticks",display:!0,title:{display:!1,text:"Date"},offset:!0},count:{axis:"y",beginAtZero:!0,min:0,ticks:{autoSkip:!0,autoSkipPadding:20,stepSize:10},display:!0,title:{display:!0,text:"Time Typing"}},avgWpm:{axis:"y",beginAtZero:!0,min:0,ticks:{autoSkip:!0,autoSkipPadding:20,stepSize:10},display:!0,position:"right",title:{display:!0,text:"Average Wpm"},grid:{display:!1}}},plugins:{annotation:{annotations:[]},tooltip:{animation:{duration:250},callbacks:{title:function(e){const t=e[0].dataset.data[e[0].dataIndex];return(0,g.default)(new Date(t.x),"dd MMM yyyy")},beforeLabel:function(e){const t=e.dataset.data[e.dataIndex];switch(e.datasetIndex){case 0:return`Time Typing: ${f.secondsToString(Math.round(t.y),!0,!0)}\nTests Completed: ${t.amount}`;case 1:return`Average ${h.default.alwaysShowCPM?"Cpm":"Wpm"}: ${f.roundTo2(t.y)}`;default:return""}},label:function(){return""}}}}}}),t.miniResult=new v($(".pageAccount #miniResultChart"),{type:"line",data:{labels:[],datasets:[{label:"wpm",data:[],borderColor:"rgba(125, 125, 125, 1)",borderWidth:2,yAxisID:"wpm",order:2,pointRadius:2},{label:"raw",data:[],borderColor:"rgba(125, 125, 125, 1)",borderWidth:2,yAxisID:"raw",order:3,pointRadius:2},{label:"errors",data:[],borderColor:"rgba(255, 125, 125, 1)",pointBackgroundColor:"rgba(255, 125, 125, 1)",borderWidth:2,order:1,yAxisID:"error",type:"scatter",pointStyle:"crossRot",pointRadius:function(e){const t=e.dataIndex,o=e.dataset.data[t];return(null!=o?o:0)<=0?0:3},pointHoverRadius:function(e){const t=e.dataIndex,o=e.dataset.data[t];return(null!=o?o:0)<=0?0:5}}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{axis:"x",ticks:{autoSkip:!0,autoSkipPadding:20},display:!0,title:{display:!1,text:"Seconds"}},wpm:{axis:"y",display:!0,title:{display:!0,text:"Words per Minute"},beginAtZero:!0,min:0,ticks:{autoSkip:!0,autoSkipPadding:20},grid:{display:!0}},raw:{axis:"y",display:!1,title:{display:!0,text:"Raw Words per Minute"},beginAtZero:!0,min:0,ticks:{autoSkip:!0,autoSkipPadding:20},grid:{display:!1}},error:{display:!0,position:"right",title:{display:!0,text:"Errors"},beginAtZero:!0,ticks:{precision:0,autoSkip:!0,autoSkipPadding:20},grid:{display:!1}}},plugins:{annotation:{annotations:[]},tooltip:{animation:{duration:250},mode:"index",intersect:!1}}}}),t.updateColors=y,t.setDefaultFontFamily=b,t.updateAllChartColors=function(){p.update(),t.accountHistory.updateColors(),t.result.updateColors(),t.accountActivity.updateColors(),t.miniResult.updateColors()},m.subscribe(((e,o)=>{"chartAccuracy"===e&&(t.accountHistory.data.datasets[1].hidden=!h.default.chartAccuracy,t.accountHistory.options.scales.acc.display=h.default.chartAccuracy,t.accountHistory.update()),"chartStyle"===e&&("scatter"==h.default.chartStyle?(t.accountHistory.data.datasets[0].showLine=!1,t.accountHistory.data.datasets[1].showLine=!1):(t.accountHistory.data.datasets[0].showLine=!0,t.accountHistory.data.datasets[1].showLine=!0),t.accountHistory.updateColors()),"fontFamily"===e&&b(o)}))},8553:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(o(3013)),d=i(o(8673)),u=i(o(2474)),l=i(o(7353)),c=i(o(6705)),p=c,f=i(o(2148)),h=i(o(3388)),m=i(o(2331)),g=i(o(8700)),v=i(o(8059)),y=i(o(5929)),b=i(o(4292)),w=i(o(2203)),C=i(o(3368)),S=i(o(8248)),_=i(o(8835)),k=i(o(4583)),x=i(o(5886)),T=i(o(8824)),P=i(o(8911)),M=i(o(5578)),O=i(o(4626)),L=i(o(6578)),W=i(o(5708)),A=i(o(7346)),B=i(o(6443)),E=i(o(8526)),j=i(o(4897)),R=i(o(9470)),I=o(7193);let D=!1,q=!0;const F=document.getElementById("wordsInput");function V(e){e!==F.value&&(F.value=e)}function K(){const e=h.roundTo2(u.calculateAccuracy());isNaN(e)||m.update(e),"next"===c.default.keymapMode&&"zen"!==c.default.mode&&f.highlightKey(R.words.getCurrent().charAt(j.input.current.length).toString())}function H(){B.get()&&0!=j.input.history.length&&0!=d.currentWordElementIndex&&(j.input.history[R.words.currentIndex-1]==R.words.get(R.words.currentIndex-1)&&!c.default.freedomMode||$($(".word")[R.words.currentIndex-1]).hasClass("hidden")||"on"!==c.default.confidenceMode&&"max"!==c.default.confidenceMode&&(j.input.current=j.input.popHistory(),j.corrected.popHistory(),"nospace"!==c.default.funbox&&"arrows"!==c.default.funbox||(j.input.current=j.input.current.slice(0,-1)),R.words.decreaseCurrentIndex(),d.setCurrentWordElementIndex(d.currentWordElementIndex-1),d.updateActiveElement(!0),v.toggleScript(R.words.getCurrent()),d.updateWordElement(),b.updatePosition(),O.addReplayEvent("backWord")))}function z(){var e;if(!B.get())return;if(""===j.input.current)return;"zen"==c.default.mode&&($("#words .word.active").removeClass("active"),$("#words").append("<div class='word active'></div>"));const t=R.words.getCurrent();if("layoutfluid"===c.default.funbox&&"time"!==c.default.mode){const t=c.default.customLayoutfluid?c.default.customLayoutfluid.split("#"):["qwerty","dvorak","colemak"];let o=0;const n=R.words.length;o=Math.floor((j.input.history.length+1)/(n/t.length)),c.default.layout!==t[o]&&void 0!==t[o]&&C.add(`--- !!! ${t[o]} !!! ---`,0),p.setLayout(t[o]),p.setKeymapLayout(t[o]),f.highlightKey(R.words.getCurrent().charAt(j.input.current.length).toString()),null===(e=_.groups.layout)||void 0===e||e.updateInput()}D=!0;const o=u.calculateBurst();g.update(Math.round(o)),j.pushBurstToHistory(o);const n=t==j.input.current||"zen"==c.default.mode;if(L.addPower(n,!0),j.incrementAccuracy(n),n)x.handleSpace(!0,t),j.input.pushHistory(),R.words.increaseCurrentIndex(),d.setCurrentWordElementIndex(d.currentWordElementIndex+1),d.updateActiveElement(),v.toggleScript(R.words.getCurrent()),b.updatePosition(),j.incrementKeypressCount(),j.pushKeypressWord(R.words.currentIndex),"nospace"!==c.default.funbox&&"arrows"!==c.default.funbox&&y.playClick(),O.addReplayEvent("submitCorrectWord");else{"nospace"!==c.default.funbox&&"arrows"!==c.default.funbox&&(!c.default.playSoundOnError||c.default.blindMode?y.playClick():y.playError()),j.pushMissedWord(R.words.getCurrent()),j.incrementKeypressErrors();const e=j.input.current.length;if(e<=R.words.getCurrent().length&&(e>=j.corrected.current.length?j.corrected.current+="_":j.corrected.current=j.corrected.current.substring(0,e)+"_"+j.corrected.current.substring(e+1)),"off"!=c.default.stopOnError)return"expert"==c.default.difficulty||"master"==c.default.difficulty?void r.fail("difficulty"):void("word"==c.default.stopOnError&&(D=!1,O.addReplayEvent("incorrectLetter","_"),d.updateWordElement(!0),b.updatePosition()));if(x.handleSpace(!1,t),c.default.blindMode&&"off"!==c.default.highlightMode&&$("#words .word.active letter").addClass("correct"),j.input.pushHistory(),d.highlightBadWord(d.currentWordElementIndex,!c.default.blindMode),R.words.increaseCurrentIndex(),d.setCurrentWordElementIndex(d.currentWordElementIndex+1),d.updateActiveElement(),v.toggleScript(R.words.getCurrent()),b.updatePosition(),j.incrementKeypressCount(),j.pushKeypressWord(R.words.currentIndex),j.updateLastKeypress(),"expert"==c.default.difficulty||"master"==c.default.difficulty)return void r.fail("difficulty");if(R.words.currentIndex==R.words.length)return void r.finish();O.addReplayEvent("submitErrorWord")}let a;a="zen"===c.default.mode?j.input.current.length:R.words.getCurrent().length;const i=h.whorf(c.default.minBurstCustomSpeed,a);if("fixed"===c.default.minBurst&&o<c.default.minBurstCustomSpeed||"flex"===c.default.minBurst&&o<i)r.fail("min burst");else{if(j.corrected.pushHistory(),!c.default.showAllLines||"time"==c.default.mode||S.isWordRandom&&0==S.word||S.isTimeRandom){const e=Math.floor(document.querySelectorAll("#words .word")[d.currentWordElementIndex-1].offsetTop);let t;try{t=Math.floor(document.querySelectorAll("#words .word")[d.currentWordElementIndex].offsetTop)}catch(e){t=0}t>e&&!d.lineTransition&&d.lineJump(e)}"react"===c.default.keymapMode&&f.flashKey(" ",!0),"words"!==c.default.mode&&"custom"!==c.default.mode&&"quote"!==c.default.mode&&"zen"!==c.default.mode||T.update(),"time"!=c.default.mode&&"words"!=c.default.mode&&"custom"!=c.default.mode&&"quote"!=c.default.mode||r.addWord()}}function N(e,t){var o,n,a,i;if(d.resultCalculating||d.resultVisible)return;if("…"===e){for(let e=0;e<3;e++)N(".",t+e);return}if("\n"===e&&"58008"===c.default.funbox&&(e=" "),"\n"!==e&&"\t"!==e&&/\s/.test(e)){if("nospace"===c.default.funbox||"arrows"===c.default.funbox)return;if(z(),!("normal"!==c.default.difficulty||c.default.strictSpace&&"zen"!==c.default.mode||"word"===c.default.stopOnError))return;if(D)return void(D=!1)}if("zen"!==c.default.mode&&"\n"!==R.words.getCurrent()[t]&&"\n"===e)return;if(!B.get()&&!r.startTest())return;P.set(!0),b.stopAnimation();const s=function(e,t){if(!q)return!1;if("zen"==c.default.mode)return!0;const o=R.words.getCurrent()[t];if(o==e)return!0;if("russian"==c.default.language.split("_")[0]){if(("е"===e||"e"===e)&&"ё"==o)return!0;if("ё"===e&&("е"==o||"e"===o))return!0}if("arrows"===c.default.funbox){if(("w"===e||"ArrowUp"===e)&&"↑"==o)return!0;if(("s"===e||"ArrowDown"===e)&&"↓"==o)return!0;if(("a"===e||"ArrowLeft"===e)&&"←"==o)return!0;if(("d"===e||"ArrowRight"===e)&&"→"==o)return!0}return!("’"!==e&&"‘"!==e&&"'"!==e||"’"!=o&&"‘"!==o&&"'"!==o)||!('"'!==e&&"”"!==e&&"“"!=e&&"„"!==e||'"'!=o&&"”"!==o&&"“"!==o&&"„"!==o)||!("–"!==e&&"—"!==e&&"-"!=e||"-"!=o&&"–"!==o&&"—"!==o)}(e,t);if(s&&"zen"!==c.default.mode&&(e=R.words.getCurrent().charAt(t)),!s&&"\n"===e){if(""===j.input.current)return;e=" "}""===j.input.current&&j.setBurstStart(performance.now());const u=j.input.current.substring(0,t)+e+j.input.current.substring(t+1);if(!s&&h.trailingComposeChars.test(u)&&E.getComposing())return j.input.current=u,d.updateWordElement(),void b.updatePosition();if(L.addPower(s),j.incrementAccuracy(s),s||(j.incrementKeypressErrors(),j.pushMissedWord(R.words.getCurrent())),W.updateScore("zen"===c.default.mode?e:R.words.getCurrent()[t],s),s||!c.default.playSoundOnError||c.default.blindMode?y.playClick():y.playError(),!q&&"master"!=c.default.difficulty)return;if(""===j.corrected.current?j.corrected.current+=u:t>=j.corrected.current.length?j.corrected.current+=e:s||(j.corrected.current=j.corrected.current.substring(0,t)+e+j.corrected.current.substring(t+1)),j.incrementKeypressCount(),j.updateLastKeypress(),j.pushKeypressWord(R.words.currentIndex),"master"!==c.default.difficulty&&"letter"==c.default.stopOnError&&!s)return;if(O.addReplayEvent(s?"correctLetter":"incorrectLetter",e),1===j.input.current.length&&0===R.words.currentIndex&&d.setActiveWordTop(null===(o=document.querySelector("#words .active"))||void 0===o?void 0:o.offsetTop),("zen"===c.default.mode&&t<30||"zen"!==c.default.mode&&t<R.words.getCurrent().length+20)&&(j.input.current=u),!s&&"master"==c.default.difficulty)return j.input.pushHistory(),j.corrected.pushHistory(),void r.fail("difficulty");if("react"===c.default.keymapMode&&f.flashKey(e,s),"zen"!=c.default.mode){const e=R.words.getCurrent(),t=R.words.currentIndex;if((e==j.input.current||c.default.quickEnd&&e.length==j.input.current.length&&"off"==c.default.stopOnError)&&t==R.words.length-1)return j.input.pushHistory(),j.corrected.pushHistory(),void r.finish()}const l=null===(n=document.querySelector("#words .word.active"))||void 0===n?void 0:n.offsetTop;if(d.updateWordElement(),!c.default.hideExtraLetters&&l<(null===(a=document.querySelector("#words .word.active"))||void 0===a?void 0:a.offsetTop)&&!d.lineTransition&&j.input.current.length>1)if("zen"==c.default.mode){const e=Math.floor(null===(i=document.querySelectorAll("#words .word")[d.currentWordElementIndex-1])||void 0===i?void 0:i.offsetTop);c.default.showAllLines||d.lineJump(e)}else j.input.current=j.input.current.slice(0,-1),d.updateWordElement();(("nospace"===c.default.funbox||"arrows"===c.default.funbox)&&j.input.current.length===R.words.getCurrent().length||"\n"===e&&s)&&z(),"\n"!==e&&b.updatePosition()}$(document).keydown((e=>s(void 0,void 0,void 0,(function*(){var t;if("loading"==A.get())return e.preventDefault();const o=$("#wordsInput").is(":focus"),n="test"===A.get(),a=!$("#commandLineWrapper").hasClass("hidden"),i=!$("#leaderboardsWrapper").hasClass("hidden"),s=h.isAnyPopupVisible(),u=n&&!a&&!i&&!s&&!d.resultVisible&&(o||"Enter"!==e.key);if(u&&!o&&"Enter"!==e.key&&(d.focusWords(),c.default.showOutOfFocusWarning&&e.preventDefault()),"Tab"==e.key&&function(e,t){if(d.resultCalculating)return void e.preventDefault();if($("#customTextPopup .textarea").is(":focus")){e.preventDefault();const t=$("#customTextPopup .textarea")[0],o=t.selectionStart,n=t.selectionEnd;return t.value=t.value.substring(0,o)+"\t"+t.value.substring(n),void(t.selectionStart=t.selectionEnd=o+1)}let o=!1;("zen"==c.default.mode&&!e.shiftKey||R.hasTab&&!e.shiftKey)&&(o=!0);const n=!$("#commandLineWrapper").hasClass("hidden")||t;if("esc"===c.default.quickRestart){if(n)return;if("login"===A.get())return;e.preventDefault(),!d.resultVisible&&o&&(N("\t",j.input.current.length),V(" "+j.input.current))}else if("tab"===c.default.quickRestart){if(n)return;if("login"===A.get())return;if("test"!==A.get())return void(0,I.navigate)("/");if(e.shiftKey?w.set():w.reset(),!d.resultVisible&&o)return e.preventDefault(),N("\t",j.input.current.length),void V(" "+j.input.current);r.restart(!1,!1,e)}else{if("test"!==A.get())return;if(d.resultVisible)return;if(o)return e.preventDefault(),N("\t",j.input.current.length),void V(" "+j.input.current);e.preventDefault(),$("#restartTestButton").trigger("focus")}}(e,s),"Escape"===e.key&&"esc"===c.default.quickRestart){if(!$("#commandLineWrapper").hasClass("hidden")||s)return;if("test"!==A.get())return void(0,I.navigate)("/");e.shiftKey?w.set():w.reset(),r.restart(!1,!1,e)}if(u)if((null===(t=e.originalEvent)||void 0===t?void 0:t.isTrusted)&&!d.testRestarting){if(j.spacingDebug&&console.log("spacing debug","keypress",e.key,"length",j.keypressTimings.spacing.array.length),j.recordKeypressSpacing(),j.setKeypressDuration(performance.now()),j.setKeypressNotAfk(),"Backspace"===e.key&&(y.playClick(),/INPUT|SELECT|TEXTAREA/i.test(e.target.tagName)||e.preventDefault(),"max"===c.default.confidenceMode))return void e.preventDefault();if("arrows"!==c.default.funbox&&/Arrow/i.test(e.key))e.preventDefault();else{if(l.type(),"Backspace"===e.key&&0===j.input.current.length&&(H(),j.input.current&&V(" "+j.input.current+" ")),"Enter"===e.key&&(e.shiftKey&&"zen"==c.default.mode?r.finish():e.shiftKey&&("time"==c.default.mode&&0===c.default.time||"words"==c.default.mode&&0===c.default.words)?(j.setBailout(!0),r.finish()):(N("\n",j.input.current.length),V(" "+j.input.current))),"Dead"===e.key&&!E.getComposing()){y.playClick();const e=document.querySelector("#words .word.active"),t=j.input.current.length,o=null==e?void 0:e.querySelectorAll("letter")[t];o&&o.classList.toggle("dead")}if("off"!==c.default.oppositeShiftMode&&(q=!1!==(yield M.isUsingOppositeShift(e))),"arrows"===c.default.funbox){let t=e.key;["ArrowLeft","ArrowUp","ArrowRight","ArrowDown"].includes(t)&&("ArrowLeft"===t&&(t="a"),"ArrowRight"===t&&(t="d"),"ArrowDown"===t&&(t="s"),"ArrowUp"===t&&(t="w"),e.preventDefault(),N(t,j.input.current.length),K(),V(" "+j.input.current),"off"!==c.default.tapeMode&&d.scrollTape())}else if("default"!==c.default.layout&&!(e.ctrlKey||e.altKey&&window.navigator.platform.search("Linux")>-1)){const t=yield k.getCharFromEvent(e);null!==t&&(e.preventDefault(),N(t,j.input.current.length),K(),V(" "+j.input.current)),"off"!==c.default.tapeMode&&d.scrollTape()}}}else e.preventDefault()})))),$("#wordsInput").keyup((e=>{var t;if(!(null===(t=e.originalEvent)||void 0===t?void 0:t.isTrusted)||d.testRestarting)return void e.preventDefault();if(d.resultVisible)return;const o=performance.now();if(-1!==j.keypressTimings.duration.current){const e=Math.abs(j.keypressTimings.duration.current-o);j.pushKeypressDuration(e)}j.setKeypressDuration(o),l.stop()})),$("#wordsInput").on("beforeinput",(e=>{var t;(null===(t=e.originalEvent)||void 0===t?void 0:t.isTrusted)&&""===e.target.value&&(e.target.value=" ")})),$("#wordsInput").on("input",(e=>{var t;if(!(null===(t=e.originalEvent)||void 0===t?void 0:t.isTrusted)||d.testRestarting)return void(e.target.value=" ");if(h.isAnyPopupVisible())return;j.setKeypressNotAfk();const o=e.target.value.normalize(),n=o.slice(1);if("default"!==c.default.layout&&n.length>=j.input.current.length)return void V(" "+j.input.current);if(0===o.length&&0===j.input.current.length)H();else if(n.length<j.input.current.length)j.input.current=n,d.updateWordElement(),b.updatePosition(),E.getComposing()||O.addReplayEvent("setLetterIndex",j.input.current.length);else if(n!==j.input.current){let e=0;for(;n[e]===j.input.current[e];)e++;for(let t=e;t<n.length;t++)N(n[t],t)}V(" "+j.input.current),K(),"off"!==c.default.tapeMode&&d.scrollTape();const a=E.getComposing();setTimeout((()=>{var t;const o=E.getComposing();a!==o&&d.updateWordElement(),e.target.selectionStart!==e.target.value.length&&(!h.trailingComposeChars.test(e.target.value)||(null!==(t=e.target.selectionStart)&&void 0!==t?t:0)<e.target.value.search(h.trailingComposeChars))&&(e.target.selectionStart=e.target.selectionEnd=e.target.value.length)}),0)})),$("#wordsInput").on("focus",(e=>{e.target.selectionStart=e.target.selectionEnd=e.target.value.length})),$("#wordsInput").on("copy paste",(e=>{e.preventDefault()})),$("#wordsInput").on("compositionstart",(()=>{E.setComposing(!0),E.setStartPos(j.input.current.length)})),$("#wordsInput").on("compositionend",(()=>{E.setComposing(!1)}))},9033:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.change=void 0;const r=i(o(3388)),d=i(o(7346)),u=i(o(8835)),l=i(o(7520)),c=i(o(9011)),p=i(o(5331)),f=i(o(2588)),h=i(o(4335)),m=i(o(4471)),g=i(o(5973)),v=i(o(5705));t.change=function(e,t=!1,o){return s(this,void 0,void 0,(function*(){return new Promise((n=>{if(v.get())return console.log(`change page ${e.name} stopped`),n(!1);if(console.log(`change page ${e.name}`),!t&&d.get()===e.name)return console.log(`page ${e.name} already active`),n(!1);const a={loading:h.page,test:c.page,settings:u.page,about:p.page,account:l.page,login:f.page,profile:m.page,404:g.page}[d.get()],i=e;null==a||a.beforeHide(),v.set(!0),$(".page").removeClass("active"),r.swapElements(a.element,i.element,250,(()=>s(this,void 0,void 0,(function*(){v.set(!1),i.element.addClass("active"),n(!0),null==i||i.afterShow()}))),(()=>s(this,void 0,void 0,(function*(){d.set(i.name),null==a||a.afterHide(),yield null==i?void 0:i.beforeShow(o)}))))}))}))}},4984:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.apply=void 0;const s=i(o(6705)),r=i(o(6350)),d=i(o(3368)),u=i(o(3013)),l=i(o(9343));t.apply=function(e){var t;null===(t=r.getSnapshot().presets)||void 0===t||t.forEach((t=>{t._id==e&&(s.apply(t.config),l.clear(!0),t.config.tags&&t.config.tags.forEach((e=>{l.set(e,!0,!1)})),u.restart(),d.add("Preset applied",1,2),s.saveFullConfigToLocalStorage())}))}},6750:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=o(3388),d=o(1446),u=i(o(6350)),l={quotes:[],length:0,language:null,groups:[]};function c(e){return e.replace(/_\d*k$/g,"")}const p=new class{constructor(){this.quoteCollection=l,this.quoteQueue=[],this.queueIndex=0}getQuotes(e,t){return s(this,void 0,void 0,(function*(){const o=c(e);if(this.quoteCollection.language!==o)try{const e=yield $.getJSON(`quotes/${o}.json`);if(void 0===e.quotes||0===e.quotes.length)return l;this.quoteCollection={quotes:[],length:e.quotes.length,groups:[],language:e.language},e.quotes.forEach((t=>{const o={text:t.text,source:t.source,length:t.length,id:t.id,language:e.language,group:0};this.quoteCollection.quotes.push(o)})),e.groups.forEach(((e,t)=>{const o=e[0],n=e[1];this.quoteCollection.groups[t]=this.quoteCollection.quotes.filter((e=>e.length>=o&&e.length<=n&&(e.group=t,!0)))})),void 0!==t&&this.updateQuoteQueue(t)}catch(e){return l}return this.quoteCollection}))}getQuoteById(e){return this.quoteCollection.quotes.find((t=>t.id===e))}updateQuoteQueue(e){this.quoteQueue=[],e.forEach((e=>{var t;e<0||null===(t=this.quoteCollection.groups[e])||void 0===t||t.forEach((e=>{this.quoteQueue.push(e)}))})),(0,r.shuffle)(this.quoteQueue),this.queueIndex=0}getRandomQuote(){if(0===this.quoteQueue.length)return null;this.queueIndex>=this.quoteQueue.length&&(this.queueIndex=0,(0,r.shuffle)(this.quoteQueue));const e=this.quoteQueue[this.queueIndex];return this.queueIndex+=1,e}getCurrentQuote(){return 0===this.quoteQueue.length?null:this.quoteQueue[this.queueIndex]}getRandomFavoriteQuote(e){const t=u.getSnapshot();if(!t)return null;const o=c(e),n=[],{favoriteQuotes:a}=t;if(Object.keys(a).forEach((e=>{c(e)===o&&n.push(...a[e])})),0===n.length)return null;const i=(0,r.randomElementFromArray)(n),s=this.getQuoteById(parseInt(i,10));return null!=s?s:null}isQuoteFavorite({language:e,id:t}){const o=u.getSnapshot();if(!o)return!1;const{favoriteQuotes:n}=o,a=c(e);return void 0!==Object.keys(n).find((e=>a===c(e)&&n[e].includes(t.toString())))}};(0,d.subscribe)(((e,t)=>{"quoteLength"===e&&p.updateQuoteQueue(t)})),t.default=p},7193:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.navigate=void 0;const r=i(o(9033)),d=i(o(9011)),u=i(o(5331)),l=i(o(8835)),c=i(o(7520)),p=i(o(2588)),f=i(o(5973)),h=i(o(4471)),m=i(o(41)),g=o(6617),v=[{path:"/",load:()=>{r.change(d.page)}},{path:"/verify",load:()=>{r.change(d.page)}},{path:"/about",load:()=>{r.change(u.page)}},{path:"/settings",load:()=>{r.change(l.page)}},{path:"/login",load:()=>{r.change(p.page)}},{path:"/account",load:()=>{r.change(c.page)}},{path:"/profile",load:()=>{g.Auth.currentUser?y("/account"):y("/")}},{path:"/profile/:uid",load:e=>{r.change(h.page,!0,e)}}];function y(e=window.location.pathname){""===(e=e.replace(/\/$/,""))&&(e="/"),history.pushState(null,"",e),b()}function b(){return s(this,void 0,void 0,(function*(){const e=v.map((e=>{return{route:e,result:location.pathname.match((t=e.path,new RegExp("^"+t.replace(/\//g,"\\/").replace(/:\w+/g,"(.+)")+"$")))};var t})).find((e=>null!==e.result));e?e.route.load(function(e){const t=e.result.slice(1),o=Array.from(e.route.path.matchAll(/:(\w+)/g)).map((e=>e[1]));return Object.fromEntries(o.map(((e,o)=>[e,t[o]])))}(e)):r.change(f.page)}))}t.navigate=y,window.addEventListener("popstate",b),document.addEventListener("DOMContentLoaded",(()=>{document.body.addEventListener("click",(e=>{const t=null==e?void 0:e.target;t.matches("[data-link]")&&(null==t?void 0:t.href)&&(e.preventDefault(),y(t.href))}))})),$("#top .logo").on("click",(()=>{y("/")})),$(document).on("click","#leaderboards .entryName",(e=>{const t=$(e.target).attr("uid");t&&(y(`/profile/${t}`),m.hide())}))},5929:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.setVolume=t.playError=t.playClick=t.previewClick=t.init=t.initErrorSound=void 0;const r=s(o(6705)),d=i(o(1766)),u=i(o(1446)),l=o(3388);let c=null,p=null;function f(){null===c&&(c=new d.Howl({src:["../sound/error.wav"]}))}function h(){null===p&&(p={1:[{sounds:[new d.Howl({src:"../sound/click1/click1_1.wav"}),new d.Howl({src:"../sound/click1/click1_1.wav"})],counter:0},{sounds:[new d.Howl({src:"../sound/click1/click1_2.wav"}),new d.Howl({src:"../sound/click1/click1_2.wav"})],counter:0},{sounds:[new d.Howl({src:"../sound/click1/click1_3.wav"}),new d.Howl({src:"../sound/click1/click1_3.wav"})],counter:0}],2:[{sounds:[new d.Howl({src:"../sound/click2/click2_1.wav"}),new d.Howl({src:"../sound/click2/click2_1.wav"})],counter:0},{sounds:[new d.Howl({src:"../sound/click2/click2_2.wav"}),new d.Howl({src:"../sound/click2/click2_2.wav"})],counter:0},{sounds:[new d.Howl({src:"../sound/click2/click2_3.wav"}),new d.Howl({src:"../sound/click2/click2_3.wav"})],counter:0}],3:[{sounds:[new d.Howl({src:"../sound/click3/click3_1.wav"}),new d.Howl({src:"../sound/click3/click3_1.wav"})],counter:0},{sounds:[new d.Howl({src:"../sound/click3/click3_2.wav"}),new d.Howl({src:"../sound/click3/click3_2.wav"})],counter:0},{sounds:[new d.Howl({src:"../sound/click3/click3_3.wav"}),new d.Howl({src:"../sound/click3/click3_3.wav"})],counter:0}],4:[{sounds:[new d.Howl({src:"../sound/click4/click4_1.wav"}),new d.Howl({src:"../sound/click4/click4_11.wav"})],counter:0},{sounds:[new d.Howl({src:"../sound/click4/click4_2.wav"}),new d.Howl({src:"../sound/click4/click4_22.wav"})],counter:0},{sounds:[new d.Howl({src:"../sound/click4/click4_3.wav"}),new d.Howl({src:"../sound/click4/click4_33.wav"})],counter:0},{sounds:[new d.Howl({src:"../sound/click4/click4_4.wav"}),new d.Howl({src:"../sound/click4/click4_44.wav"})],counter:0},{sounds:[new d.Howl({src:"../sound/click4/click4_5.wav"}),new d.Howl({src:"../sound/click4/click4_55.wav"})],counter:0},{sounds:[new d.Howl({src:"../sound/click4/click4_6.wav"}),new d.Howl({src:"../sound/click4/click4_66.wav"})],counter:0}],5:[{sounds:[new d.Howl({src:"../sound/click5/click5_1.wav"}),new d.Howl({src:"../sound/click5/click5_11.wav"})],counter:0},{sounds:[new d.Howl({src:"../sound/click5/click5_2.wav"}),new d.Howl({src:"../sound/click5/click5_22.wav"})],counter:0},{sounds:[new d.Howl({src:"../sound/click5/click5_3.wav"}),new d.Howl({src:"../sound/click5/click5_33.wav"})],counter:0},{sounds:[new d.Howl({src:"../sound/click5/click5_4.wav"}),new d.Howl({src:"../sound/click5/click5_44.wav"})],counter:0},{sounds:[new d.Howl({src:"../sound/click5/click5_5.wav"}),new d.Howl({src:"../sound/click5/click5_55.wav"})],counter:0},{sounds:[new d.Howl({src:"../sound/click5/click5_6.wav"}),new d.Howl({src:"../sound/click5/click5_66.wav"})],counter:0}],6:[{sounds:[new d.Howl({src:"../sound/click6/click6_1.wav"}),new d.Howl({src:"../sound/click6/click6_11.wav"})],counter:0},{sounds:[new d.Howl({src:"../sound/click6/click6_2.wav"}),new d.Howl({src:"../sound/click6/click6_22.wav"})],counter:0},{sounds:[new d.Howl({src:"../sound/click6/click6_3.wav"}),new d.Howl({src:"../sound/click6/click6_33.wav"})],counter:0}],7:[{sounds:[new d.Howl({src:"../sound/click7/click7_1.wav"}),new d.Howl({src:"../sound/click7/click7_11.wav"})],counter:0},{sounds:[new d.Howl({src:"../sound/click7/click7_2.wav"}),new d.Howl({src:"../sound/click7/click7_22.wav"})],counter:0},{sounds:[new d.Howl({src:"../sound/click7/click7_3.wav"}),new d.Howl({src:"../sound/click7/click7_33.wav"})],counter:0}]})}function m(e){d.default.Howler.volume(e)}t.initErrorSound=f,t.init=h,t.previewClick=function(e){null===p&&h(),p[e][0].sounds[0].seek(0),p[e][0].sounds[0].play()},t.playClick=function(){if("off"===r.default.playSoundOnClick)return;null===p&&h();const e=(0,l.randomElementFromArray)(p[r.default.playSoundOnClick]);e.counter++,2===e.counter&&(e.counter=0),e.sounds[e.counter].seek(0),e.sounds[e.counter].play()},t.playError=function(){r.default.playSoundOnError&&(null===c&&f(),c.seek(0),c.play())},t.setVolume=m,u.subscribe(((e,t)=>{"playSoundOnClick"===e&&"off"!==t&&h(),"soundVolume"===e&&m(t)}))},9343:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.loadActiveFromLocalStorage=t.toggle=t.set=t.clear=t.saveActiveToLocalStorage=void 0;const s=i(o(6350)),r=i(o(2453));function d(){var e;const t=[];try{null===(e=s.getSnapshot().tags)||void 0===e||e.forEach((e=>{!0===e.active&&t.push(e._id)})),window.localStorage.setItem("activeTags",JSON.stringify(t))}catch(e){}}function u(e,t=!1){var o;null===(o=s.getSnapshot().tags)||void 0===o||o.forEach((t=>{t._id===e&&(void 0===t.active?t.active=!0:t.active=!t.active)})),r.update(),t||d()}t.saveActiveToLocalStorage=d,t.clear=function(e=!1){var t;const o=s.getSnapshot();o.tags=null===(t=o.tags)||void 0===t?void 0:t.map((e=>(e.active=!1,e))),s.setSnapshot(o),r.update(),e||d()},t.set=function(e,t,o=!1){var n;const a=s.getSnapshot();a.tags=null===(n=a.tags)||void 0===n?void 0:n.map((o=>(o._id===e&&(o.active=t),o))),s.setSnapshot(a),r.update(),o||d()},t.toggle=u,t.loadActiveFromLocalStorage=function(){var e;let t=window.localStorage.getItem("activeTags");if(null!=t&&""!==t){try{t=null!==(e=JSON.parse(t))&&void 0!==e?e:[]}catch(e){t=[]}t.forEach((e=>{u(e,!0)})),d()}}},743:function(e,t,o){var n,a,i=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&i(t,e,o);return s(t,e),t},d=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.applyCustomBackground=t.applyCustomBackgroundSize=t.clearRandom=t.randomizeTheme=t.clearPreview=t.set=t.preview=t.colorVars=t.randomThemeIndex=t.randomTheme=void 0;const u=r(o(4203)),l=r(o(1833)),c=r(o(3388)),p=r(o(6705)),f=p,h=r(o(2183)),m=r(o(1446)),g=r(o(6350)),v=r(o(3368)),y=r(o(9817)),b=r(o(3326));let w=!1;t.randomTheme=null,t.randomThemeIndex=0,t.colorVars=["--bg-color","--main-color","--caret-color","--sub-color","--sub-alt-color","--text-color","--error-color","--error-extra-color","--colorful-error-color","--colorful-error-extra-color"];let C=[];function S(e,o,n=!1){t.colorVars.forEach((e=>{document.documentElement.style.setProperty(e,"")}));let a="serika_dark";a=o?"custom":e,u.reset(),$(".keymapKey").attr("style",""),function(e){return d(this,void 0,void 0,(function*(){return new Promise((t=>{C.push(setTimeout((()=>{y.show()}),100)),$("#nextTheme").remove();const o=document.querySelector("#currentTheme"),n=document.createElement("link");n.type="text/css",n.rel="stylesheet",n.id="nextTheme",n.onload=()=>{y.hide(),$("#currentTheme").remove(),$("#nextTheme").attr("id","currentTheme"),C.map((e=>clearTimeout(e))),C=[],t()},n.href="custom"===e?"/./themes/serika_dark.css":`/./themes/${e}.css`,o?o.after(n):document.head.appendChild(n)}))}))}(a).then((()=>{var a,i;if(u.update(),o){let s=p.default.customThemeColors;const r=g.getSnapshot();if(o&&!n&&r){const t=null!==(i=null===(a=r.customThemes.find((t=>t._id===e)))||void 0===a?void 0:a.colors)&&void 0!==i?i:[];t.length>0&&f.setCustomThemeColors(t)}if("custom"!==e&&r){const t=r.customThemes.find((t=>t._id===e));s=null==t?void 0:t.colors}t.colorVars.forEach(((e,t)=>{document.documentElement.style.setProperty(e,s[t])}))}b.log("changedTheme",{theme:e}),n||u.getAll().then((e=>{$(".keymapKey").attr("style",""),l.updateAllChartColors(),function(e,t){d(this,void 0,void 0,(function*(){setTimeout((()=>d(this,void 0,void 0,(function*(){let o,n;if(n=yield u.get("bg"),o=yield u.get("main"),"localhost"===window.location.hostname){const e=o;o=n,n=e}n==o&&(n="#111",o="#eee");const a=document.createElement("canvas");a.width=e,a.height=e;const i=a.getContext("2d");i.beginPath(),i.moveTo(0,t),i.quadraticCurveTo(0,0,t,0),i.lineTo(96,0),i.quadraticCurveTo(e,0,e,t),i.lineTo(e,96),i.quadraticCurveTo(e,e,96,e),i.lineTo(t,e),i.quadraticCurveTo(0,e,0,96),i.fillStyle=n,i.fill(),i.font="900 76.8px Lexend Deca",i.textAlign="center",i.fillStyle=o,i.fillText("mt",65,89.6),$("#favicon").attr("href",a.toDataURL("image/png"))}))),125)}))}(128,32),$("#metaThemeColor").attr("content",e.bg)})),$(".current-theme .text").text(o?"custom":e.replace(/_/g," "))}))}function _(e,t,o=!1){w=!0,S(e,t,!o)}function k(e,t){S(e,t)}function x(e=!0){w&&(w=!1,t.randomTheme=null,e&&(p.default.customTheme?S("custom",!0):S(p.default.theme,!1)))}t.preview=_,t.set=k,t.clearPreview=x;let T=[];function P(){return d(this,void 0,void 0,(function*(){if(!g.getSnapshot())return;const e=yield c.getThemesList();T="fav"===p.default.randomTheme&&p.default.favThemes.length>0?p.default.favThemes:"light"===p.default.randomTheme?e.filter((e=>c.isColorLight(e.bgColor))).map((e=>e.name)):"dark"===p.default.randomTheme?e.filter((e=>c.isColorDark(e.bgColor))).map((e=>e.name)):"on"===p.default.randomTheme?e.map((e=>e.name)):g.getSnapshot().customThemes.map((e=>e._id)),c.shuffle(T),t.randomThemeIndex=0}))}function M(){null!==t.randomTheme&&(t.randomTheme=null,p.default.customTheme?S("custom",!0):S(p.default.theme,!1))}function O(){"max"==p.default.customBackgroundSize?$(".customBackground img").css({objectFit:""}):$(".customBackground img").css({objectFit:p.default.customBackgroundSize})}function L(){""===p.default.customBackground?($("#words").removeClass("noErrorBorder"),$("#resultWordsHistory").removeClass("noErrorBorder"),$(".customBackground img").remove()):($("#words").addClass("noErrorBorder"),$("#resultWordsHistory").addClass("noErrorBorder"),$(".customBackground").html(`<img src="${p.default.customBackground}" />`),h.apply(),O())}t.randomizeTheme=function(){var e,o;return d(this,void 0,void 0,(function*(){if((0!==T.length||(yield P(),0!==T.length))&&(t.randomTheme=T[t.randomThemeIndex],t.randomThemeIndex++,t.randomThemeIndex>=T.length&&(c.shuffle(T),t.randomThemeIndex=0),_(t.randomTheme,"custom"===p.default.randomTheme),t.randomThemeIndex>=T.length)){let n=t.randomTheme.replace(/_/g," ");"custom"===p.default.randomTheme&&(n=(null!==(o=null===(e=g.getSnapshot().customThemes.find((e=>e._id===t.randomTheme)))||void 0===e?void 0:e.name)&&void 0!==o?o:"custom").replace(/_/g," ")),v.add(n,0)}}))},t.clearRandom=M,t.applyCustomBackgroundSize=O,t.applyCustomBackground=L,null===(a=null===(n=window.matchMedia)||void 0===n?void 0:n.call(window,"(prefers-color-scheme: dark)"))||void 0===a||a.addEventListener("change",(e=>{p.default.autoSwitchTheme&&!p.default.customTheme&&(e.matches?k(p.default.themeDark,!1):k(p.default.themeLight,!1))})),m.subscribe(((e,t,o)=>{"randomTheme"===e&&P(),"customTheme"===e&&(t?k("custom",!0):k(p.default.theme,!1)),"customThemeColors"===e&&(o?_("custom",!0):k("custom",!0)),"theme"===e&&(x(!1),k(t,!1)),"setThemes"===e&&(x(!1),t?k("custom",!0):p.default.autoSwitchTheme?window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?k(p.default.themeDark,!1):k(p.default.themeLight,!1):k(p.default.theme,!1)),"randomTheme"===e&&"off"===t&&M(),"customBackground"===e&&L(),"customBackgroundSize"===e&&O(),"autoSwitchTheme"===e&&(t?window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?k(p.default.themeDark,!1):k(p.default.themeLight,!1):k(p.default.theme,!1)),"themeLight"!==e||!p.default.autoSwitchTheme||window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches||o||k(p.default.themeLight,!1),"themeDark"===e&&p.default.autoSwitchTheme&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&!o&&k(p.default.themeDark,!1)}))},6350:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.updateLocalStats=t.saveLocalResult=t.saveConfig=t.updateLbMemory=t.saveLocalTagPB=t.getLocalTagPB=t.saveLocalPB=t.getLocalPB=t.getUserAverage10=t.getUserHighestWpm=t.deleteCustomTheme=t.editCustomTheme=t.addCustomTheme=t.getCustomThemeById=t.getUserResults=t.initSnapshot=t.setSnapshot=t.getSnapshot=void 0;const d=r(o(7355)),u=i(o(5344)),l=i(o(3368)),c=i(o(4335)),p=r(o(2191)),f=o(6617),h=o(8361);let m;function g(){return m}function v(e){try{delete e.banned}catch(e){}try{delete e.verified}catch(e){}m=e}function y(){return s(this,void 0,void 0,(function*(){if(null==f.Auth.currentUser)return!1;if(null===m)return!1;if(void 0!==m.results)return!0;{c.updateText("Downloading results..."),c.updateBar(90);const e=yield d.default.results.get();if(200!==e.status)return l.add("Error getting results: "+e.message,-1),!1;const t=e.data;return t.forEach((e=>{void 0===e.bailedOut&&(e.bailedOut=!1),void 0===e.blindMode&&(e.blindMode=!1),void 0===e.lazyMode&&(e.lazyMode=!1),void 0===e.difficulty&&(e.difficulty="normal"),void 0===e.funbox&&(e.funbox="none"),void 0!==e.language&&null!==e.language||(e.language="english"),void 0===e.numbers&&(e.numbers=!1),void 0===e.punctuation&&(e.punctuation=!1),void 0===e.quoteLength&&(e.quoteLength=-1),void 0===e.restartCount&&(e.restartCount=0),void 0===e.incompleteTestSeconds&&(e.incompleteTestSeconds=0),void 0===e.afkDuration&&(e.afkDuration=0),void 0===e.tags&&(e.tags=[])})),m.results=null==t?void 0:t.sort(((e,t)=>t.timestamp-e.timestamp)),!0}}))}t.getSnapshot=g,t.setSnapshot=v,t.initSnapshot=function(){var e,t,o,n,a,i,r,u;return s(this,void 0,void 0,(function*(){const s=h.defaultSnap;try{if(null==f.Auth.currentUser)return!1;const[l,c,h,g]=yield Promise.all([d.default.users.getData(),d.default.configs.get(),d.default.users.getTags(),d.default.presets.get()]);if(200!==l.status)throw{message:`${l.message} (user)`,responseCode:l.status};if(200!==c.status)throw{message:`${c.message} (config)`,responseCode:c.status};if(200!==h.status)throw{message:`${h.message} (tags)`,responseCode:h.status};if(200!==g.status)throw{message:`${g.message} (presets)`,responseCode:g.status};const[v,y,b,w]=[l,c,h,g].map((e=>e.data));if(s.name=v.name,s.personalBests=v.personalBests,s.banned=v.banned,s.verified=v.verified,s.discordId=v.discordId,s.discordAvatar=v.discordAvatar,s.needsToChangeName=v.needsToChangeName,s.typingStats={timeTyping:v.timeTyping,startedTests:v.startedTests,completedTests:v.completedTests},!0===v.quoteMod&&(s.quoteMod=!0),s.favoriteQuotes=null!==(e=v.favoriteQuotes)&&void 0!==e?e:{},s.filterPresets=null!==(t=v.resultFilterPresets)&&void 0!==t?t:[],s.quoteRatings=v.quoteRatings,s.favouriteThemes=void 0===v.favouriteThemes?[]:v.favouriteThemes,s.details=v.profileDetails,s.addedAt=v.addedAt,s.inventory=v.inventory,(null===(o=v.lbMemory)||void 0===o?void 0:o.time15)||(null===(n=v.lbMemory)||void 0===n?void 0:n.time60)?s.lbMemory={}:v.lbMemory&&(s.lbMemory=v.lbMemory),y){!0===y.quickTab&&(y.quickRestart="tab"),!0===y.swapEscAndTab&&(y.quickRestart="esc");const e=Object.assign({},p.default);for(const t in y.config){const o=y.config[t];e[t]=o}s.config=e}return s.customThemes=null!==(a=v.customThemes)&&void 0!==a?a:[],s.tags=b,s.tags.forEach((e=>{e.display=e.name.replaceAll("_"," ")})),s.tags=null===(i=s.tags)||void 0===i?void 0:i.sort(((e,t)=>e.name>t.name?1:e.name<t.name?-1:0)),s.presets=w,null===(r=s.presets)||void 0===r||r.forEach((e=>{e.display=e.name.replaceAll("_"," ")})),s.presets=null===(u=s.presets)||void 0===u?void 0:u.sort(((e,t)=>e.name>t.name?1:e.name<t.name?-1:0)),m=s,m}catch(e){throw m=h.defaultSnap,e}}))},t.getUserResults=y,t.getCustomThemeById=function(e){return m.customThemes.find((t=>t._id===e))},t.addCustomTheme=function(e){return s(this,void 0,void 0,(function*(){if(null===m)return!1;if(m.customThemes.length>=10)return l.add("Too many custom themes!",0),!1;const t=yield d.default.users.addCustomTheme(e);if(200!==t.status)return l.add("Error adding custom theme: "+t.message,-1),!1;const o=Object.assign(Object.assign({},e),{_id:t.data.theme._id});return m.customThemes.push(o),!0}))},t.editCustomTheme=function(e,t){return s(this,void 0,void 0,(function*(){if(null===f.Auth.currentUser)return!1;if(null===m)return!1;const o=m.customThemes.find((t=>t._id===e));if(!o)return l.add("Editing failed: Custom theme with id: "+e+" does not exist",-1),!1;const n=yield d.default.users.editCustomTheme(e,t);if(200!==n.status)return l.add("Error editing custom theme: "+n.message,-1),!1;const a=Object.assign(Object.assign({},t),{_id:e});return m.customThemes[m.customThemes.indexOf(o)]=a,!0}))},t.deleteCustomTheme=function(e){return s(this,void 0,void 0,(function*(){if(null===f.Auth.currentUser)return!1;if(null===m)return!1;if(!m.customThemes.find((t=>t._id===e)))return!1;const t=yield d.default.users.deleteCustomTheme(e);return 200!==t.status?(l.add("Error deleting custom theme: "+t.message,-1),!1):(m.customThemes=m.customThemes.filter((t=>t._id!==e)),!0)}))},t.getUserHighestWpm=function(e,t,o,n,a,i){return s(this,void 0,void 0,(function*(){return null===m||void 0===m.results?0:function(){var s;let r=0;return null===(s=m.results)||void 0===s||s.forEach((s=>{s.mode==e&&s.mode2==t&&s.punctuation==o&&s.language==n&&s.difficulty==a&&(s.lazyMode===i||void 0===s.lazyMode&&!1===i)&&s.wpm>r&&(r=s.wpm)})),r}()}))},t.getUserAverage10=function(e,t,o,n,a,i){return s(this,void 0,void 0,(function*(){const s=g();return s?null===s||null===(yield y())?[0,0]:function(){var r;const d=[];null===(r=s.tags)||void 0===r||r.forEach((e=>{!0===e.active&&d.push(e._id)}));let u=0,l=0,c=0,p=0,f=0,h=0;if(void 0!==s.results)for(const r of s.results)if(r.mode===e&&r.punctuation===o&&r.language===n&&r.difficulty===a&&(r.lazyMode===i||void 0===r.lazyMode&&!1===i)&&(0===d.length||d.some((e=>r.tags.includes(e))))){if(r.mode2!==t&&"quote"!==e)continue;if(h<10&&(c+=r.wpm,p+=r.acc,h++),r.mode2===t&&(u+=r.wpm,l+=r.acc,f++,f>=10))break}return 0===f&&"quote"===e?[c/h,p/h]:[u/f,l/f]}():[0,0]}))},t.getLocalPB=function(e,t,o,n,a,i,r){return s(this,void 0,void 0,(function*(){return"none"!==r&&"plus_one"!==r&&"plus_two"!==r||null===m?0:function(){let s=0;try{return m.personalBests?(m.personalBests[e][t].forEach((e=>{e.punctuation==o&&e.difficulty==a&&e.language==n&&(e.lazyMode===i||void 0===e.lazyMode&&!1===i)&&(s=e.wpm)})),s):s}catch(e){return s}}()}))},t.saveLocalPB=function(e,t,o,n,a,i,r,d,u,l){return s(this,void 0,void 0,(function*(){"quote"!=e&&null!=m&&function(){let s=!1;void 0===m.personalBests&&(m.personalBests={time:{},words:{},zen:{zen:[]},quote:{custom:[]},custom:{custom:[]}}),void 0===m.personalBests[e]&&("zen"===e?m.personalBests.zen={zen:[]}:m.personalBests[e]={custom:[]}),void 0===m.personalBests[e][t]&&(m.personalBests[e][t]=[]),m.personalBests[e][t].forEach((e=>{e.punctuation==o&&e.difficulty==a&&e.language==n&&(e.lazyMode===i||void 0===e.lazyMode&&!1===i)&&(s=!0,e.wpm=r,e.acc=d,e.raw=u,e.timestamp=Date.now(),e.consistency=l,e.lazyMode=i)})),s||m.personalBests[e][t].push({language:n,difficulty:a,lazyMode:i,punctuation:o,wpm:r,acc:d,raw:u,timestamp:Date.now(),consistency:l})}()}))},t.getLocalTagPB=function(e,t,o,n,a,i,r){return s(this,void 0,void 0,(function*(){return null===m?0:function(){var s,d;let u=0;const l=(null!==(s=g().tags)&&void 0!==s?s:[]).filter((t=>t._id===e))[0];if(void 0===l)return u;void 0===l.personalBests&&(l.personalBests={time:{},words:{},zen:{zen:[]},quote:{custom:[]},custom:{custom:[]}});try{(null!==(d=l.personalBests[t][o])&&void 0!==d?d:[]).forEach((e=>{e.punctuation==n&&e.difficulty==i&&e.language==a&&(e.lazyMode===r||void 0===e.lazyMode&&!1===r)&&(u=e.wpm)}))}catch(e){console.log(e)}return u}()}))},t.saveLocalTagPB=function(e,t,o,n,a,i,r,d,u,l,c){return s(this,void 0,void 0,(function*(){"quote"!=t&&null!=m&&function(){var s;const p=null===(s=m.tags)||void 0===s?void 0:s.filter((t=>t._id===e))[0];p.personalBests||(p.personalBests={time:{},words:{},zen:{zen:[]},quote:{custom:[]},custom:{custom:[]}});try{let e=!1;void 0===p.personalBests[t][o]&&(p.personalBests[t][o]=[]),p.personalBests[t][o].forEach((t=>{t.punctuation==n&&t.difficulty==i&&t.language==a&&(t.lazyMode===r||void 0===t.lazyMode&&!1===r)&&(e=!0,t.wpm=d,t.acc=u,t.raw=l,t.timestamp=Date.now(),t.consistency=c,t.lazyMode=r)})),e||p.personalBests[t][o].push({language:a,difficulty:i,lazyMode:r,punctuation:n,wpm:d,acc:u,raw:l,timestamp:Date.now(),consistency:c})}catch(e){p.personalBests={time:{},words:{},zen:{zen:[]},quote:{custom:[]},custom:{custom:[]}},"zen"===t?p.personalBests.zen={zen:[]}:p.personalBests[t]={custom:[]},p.personalBests[t][o]=[{language:a,difficulty:i,lazyMode:r,punctuation:n,wpm:d,acc:u,raw:l,timestamp:Date.now(),consistency:c}]}}()}))},t.updateLbMemory=function(e,t,o,n,a=!1){return s(this,void 0,void 0,(function*(){if("time"===e){const i=e,s=t,r=g();void 0===r.lbMemory&&(r.lbMemory={time:{15:{english:0},60:{english:0}}}),void 0===r.lbMemory[i]&&(r.lbMemory[i]={15:{english:0},60:{english:0}}),void 0===r.lbMemory[i][s]&&(r.lbMemory[i][s]={});const u=r.lbMemory[i][s][o];r.lbMemory[i][s][o]=n,a&&u!=n&&(yield d.default.users.updateLeaderboardMemory(e,t,o,n)),v(r)}}))},t.saveConfig=function(e){return s(this,void 0,void 0,(function*(){if(null!==f.Auth.currentUser){u.loading(!0);const t=yield d.default.configs.save(e);200!==t.status&&l.add("Failed to save config: "+t.message,-1),u.loading(!1)}}))},t.saveLocalResult=function(e){const t=g();null!==t&&void 0!==t.results&&(t.results.unshift(e),v(t))},t.updateLocalStats=function(e,t){const o=g();void 0===o.typingStats&&(o.typingStats={}),null!==o&&void 0!==o.typingStats&&(null==o.typingStats.timeTyping?o.typingStats.timeTyping=t:o.typingStats.timeTyping+=t,null==o.typingStats.startedTests?o.typingStats.startedTests=e:o.typingStats.startedTests+=e,null==o.typingStats.completedTests?o.typingStats.completedTests=1:o.typingStats.completedTests+=1),v(o)}},5344:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.update=t.loading=void 0;const r=o(6617),d=i(o(3388));let u=!1;t.loading=function(e){e?(u&&($("#top #menu .account .avatar").addClass("hidden"),$("#top #menu .account .icon").removeClass("hidden")),$("#top #menu .account .icon").html('<i class="fas fa-fw fa-spin fa-circle-notch"></i>'),$("#top #menu .account").css("opacity",1).css("pointer-events","none")):(u&&($("#top #menu .account .avatar").removeClass("hidden"),$("#top #menu .account .icon").addClass("hidden")),$("#top #menu .account .icon").html('<i class="fas fa-fw fa-user"></i>'),$("#top #menu .account").css("opacity",1).css("pointer-events","auto"))},t.update=function(e,t){return s(this,void 0,void 0,(function*(){if(null!=r.Auth.currentUser){if(t&&e){const o=yield d.getDiscordAvatarUrl(e,t);o&&($("#top #menu .account .avatar").css("background-image",`url(${o})`),u=!0,$("#top #menu .account .icon").addClass("hidden"),$("#top #menu .account .avatar").removeClass("hidden"))}else $("#top #menu .account .avatar").addClass("hidden");d.swapElements($("#menu .textButton.login"),$("#menu .textButton.account"),250)}else d.swapElements($("#menu .textButton.account"),$("#menu .textButton.login"),250)}))}},2400:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getList=t.pushCurrent=t.setCurrent=t.defaultCommands=t.updateThemeCommands=t.commandsChallenges=t.themeCommands=t.updateCustomThemeListCommands=t.customThemeListCommands=t.customThemeCommands=t.commandsEnableAds=t.updatePresetCommands=t.updateTagCommands=t.commandsKeymapLayouts=t.current=void 0;const r=i(o(6350)),d=i(o(3388)),u=i(o(3368)),l=i(o(5929)),c=i(o(743)),p=i(o(2786)),f=i(o(2203)),h=i(o(6705)),m=h,g=i(o(9196)),v=i(o(8673)),y=i(o(3013)),b=i(o(8059)),w=i(o(9343)),C=i(o(4984)),S=i(o(8248)),_=i(o(8835)),k=i(o(7567)),x=i(o(5886)),T=i(o(4897)),P=i(o(2453)),M=i(o(1446)),O=i(o(4924)),L=o(6617),W=i(o(2845)),A=i(o(7841)),B=o(7193);function E(){return"custom"===h.default.mode&&S.isWordRandom&&(S.word>=5e3||0==S.word)||"custom"===h.default.mode&&!S.isWordRandom&&!S.isTimeRandom&&S.text.length>=5e3||"custom"===h.default.mode&&S.isTimeRandom&&(S.time>=3600||0==S.time)||"words"===h.default.mode&&h.default.words>=5e3||0===h.default.words||"time"===h.default.mode&&(h.default.time>=3600||0===h.default.time)||"zen"==h.default.mode}t.current=[];const j={title:"Layout emulator...",configKey:"layout",list:[{id:"couldnotload",display:"Could not load the layouts list :("}]};d.getLayoutsList().then((e=>{j.list=[],j.list.push({id:"changeLayoutDefault",display:"off",configValue:"default",exec:()=>{m.setLayout("default"),y.restart()}}),Object.keys(e).forEach((e=>{j.list.push({id:"changeLayout"+d.capitalizeFirstLetterOfEachWord(e),display:"default"===e?"off":e.replace(/_/g," "),configValue:e,exec:()=>{m.setLayout(e),y.restart()}})}))})),t.commandsKeymapLayouts={title:"Change keymap layout...",configKey:"keymapLayout",list:[{id:"couldnotload",display:"Could not load the layouts list :("}]},d.getLayoutsList().then((e=>{t.commandsKeymapLayouts.list=[],t.commandsKeymapLayouts.list.push({id:"changeKeymapLayoutOverrideSync",display:"emulator sync",configValue:"overrideSync",exec:()=>{m.setKeymapLayout("overrideSync"),y.restart()}}),Object.keys(e).forEach((e=>{"default"!=e.toString()&&t.commandsKeymapLayouts.list.push({id:"changeKeymapLayout"+d.capitalizeFirstLetterOfEachWord(e),display:e.replace(/_/g," "),configValue:e,exec:()=>{m.setKeymapLayout(e),y.restart()}})}))}));const R={title:"Language...",configKey:"language",list:[]};d.getLanguageList().then((e=>{e.forEach((e=>{R.list.push({id:"changeLanguage"+d.capitalizeFirstLetterOfEachWord(e),display:e.replace(/_/g," "),configValue:e,exec:()=>{m.setLanguage(e),y.restart()}})}))}));const I={title:"Funbox...",configKey:"funbox",list:[{id:"changeFunboxNone",display:"none",configValue:"none",alias:"off",exec:()=>{b.setFunbox("none",null)&&y.restart()}}]};d.getFunboxList().then((e=>{e.forEach((e=>{I.list.push({id:"changeFunbox"+e.name,display:e.name.replace(/_/g," "),alias:e.alias,configValue:e.name,exec:()=>{b.setFunbox(e.name,e.type)&&y.restart()}})}))}));const D={title:"Font family...",configKey:"fontFamily",list:[]};d.getFontsList().then((e=>{e.forEach((e=>{const t=e.name.replace(/ /g,"_");D.list.push({id:"changeFont"+e.name.replace(/ /g,"_"),display:void 0!==e.display?e.display:e.name,configValue:t,hover:()=>{m.previewFontFamily(e.name)},exec:()=>{m.setFontFamily(e.name.replace(/ /g,"_"))}})})),D.list.push({id:"setFontFamilyCustom",display:"custom...",input:!0,hover:()=>{m.previewFontFamily(h.default.fontFamily)},exec:e=>{e&&m.setFontFamily(e.replace(/\s/g,"_"))}})}));const q={title:"Change tags...",list:[]};function F(){var e;const t=r.getSnapshot();q.list=[],t&&t.tags&&0!==t.tags.length&&(q.list.push({id:"clearTags",display:"Clear tags",icon:"fa-times",exec:()=>{var e;const t=r.getSnapshot();t.tags=null===(e=t.tags)||void 0===e?void 0:e.map((e=>(e.active=!1,e))),r.setSnapshot(t),P.update(),w.saveActiveToLocalStorage()}}),null===(e=r.getSnapshot().tags)||void 0===e||e.forEach((e=>{let t=e.display;t=!0===e.active?'<i class="fas fa-fw fa-check"></i>'+t:'<i class="fas fa-fw"></i>'+t,q.list.push({id:"toggleTag"+e._id,noIcon:!0,display:t,sticky:!0,exec:()=>{w.toggle(e._id),P.update(),"average"===h.default.paceCaret&&(x.init(),P.update());let t=e.display;t=!0===e.active?'<i class="fas fa-fw fa-check"></i>'+t:'<i class="fas fa-fw"></i>'+t,$("#commandLine").hasClass("allCommands")?$(`#commandLine .suggestions .entry[command='toggleTag${e._id}']`).html('<div class="icon"><i class="fas fa-fw fa-tag"></i></div><div>Tags  > '+t):$(`#commandLine .suggestions .entry[command='toggleTag${e._id}']`).html(t)}})})),q.list.push({id:"createTag",display:"Create tag",icon:"fa-plus",exec:()=>{A.show("add")}}))}t.updateTagCommands=F;const V={title:"Presets...",list:[]};function K(){const e=r.getSnapshot();V.list=[],e&&e.presets&&0!==e.presets.length&&(e.presets.forEach((e=>{const t=e.display;V.list.push({id:"applyPreset"+e._id,display:t,exec:()=>{_.setEventDisabled(!0),C.apply(e._id),_.setEventDisabled(!1),_.update(),P.update()}})})),V.list.push({id:"createPreset",display:"Create preset",icon:"fa-plus",exec:()=>{W.show("add")}}))}t.updatePresetCommands=K;const H={title:"Repeat quotes...",configKey:"repeatQuotes",list:[{id:"setRepeatQuotesOff",display:"off",configValue:"off",exec:()=>{m.setRepeatQuotes("off")}},{id:"setRepeatQuotesTyping",display:"typing",configValue:"typing",exec:()=>{m.setRepeatQuotes("typing")}}]},z={title:"Live WPM...",configKey:"showLiveWpm",list:[{id:"setLiveWpmOff",display:"off",configValue:!1,exec:()=>{m.setShowLiveWpm(!1)}},{id:"setLiveWpmOn",display:"on",configValue:!0,exec:()=>{m.setShowLiveWpm(!0)}}]},N={title:"Show average...",configKey:"showAverage",list:[{id:"setShowAverageOff",display:"off",configValue:"off",exec:()=>{m.setShowAverage("off")}},{id:"setShowAverageSpeed",display:"wpm",configValue:"wpm",exec:()=>{m.setShowAverage("wpm")}},{id:"setShowAverageAcc",display:"accuracy",configValue:"acc",exec:()=>{m.setShowAverage("acc")}},{id:"setShowAverageBoth",display:"both",configValue:"both",exec:()=>{m.setShowAverage("both")}}]},Q={title:"Live accuracy...",configKey:"showLiveAcc",list:[{id:"setLiveAccOff",display:"off",configValue:!1,exec:()=>{m.setShowLiveAcc(!1)}},{id:"setLiveAccOn",display:"on",configValue:!0,exec:()=>{m.setShowLiveAcc(!0)}}]},U={title:"Live burst...",configKey:"showLiveBurst",list:[{id:"setLiveBurstOff",display:"off",configValue:!1,exec:()=>{m.setShowLiveBurst(!1)}},{id:"setLiveBurstOn",display:"on",configValue:!0,exec:()=>{m.setShowLiveBurst(!0)}}]},G={title:"Timer/progress...",configKey:"showTimerProgress",list:[{id:"setTimerProgressOff",display:"off",configValue:!1,exec:()=>{m.setShowTimerProgress(!1)}},{id:"setTimerProgressOn",display:"on",configValue:!0,exec:()=>{m.setShowTimerProgress(!0)}}]},J={title:"Key tips...",configKey:"showKeyTips",list:[{id:"setKeyTipsOff",display:"off",configValue:!1,exec:()=>{m.setKeyTips(!1)}},{id:"setKeyTipsOn",display:"on",configValue:!0,exec:()=>{m.setKeyTips(!0)}}]},Z={title:"Freedom mode...",configKey:"freedomMode",list:[{id:"setfreedomModeOff",display:"off",configValue:!1,exec:()=>{m.setFreedomMode(!1)}},{id:"setfreedomModeOn",display:"on",configValue:!0,exec:()=>{m.setFreedomMode(!0)}}]},Y={title:"Strict space...",configKey:"strictSpace",list:[{id:"setStrictSpaceOff",display:"off",configValue:!1,exec:()=>{m.setStrictSpace(!1)}},{id:"setStrictSpaceOn",display:"on",configValue:!0,exec:()=>{m.setStrictSpace(!0)}}]},X={title:"Blind mode...",configKey:"blindMode",list:[{id:"setBlindModeOff",display:"off",configValue:!1,exec:()=>{m.setBlindMode(!1)}},{id:"setBlindModeOn",display:"on",configValue:!0,exec:()=>{m.setBlindMode(!0)}}]},ee={title:"Always show words history...",configKey:"alwaysShowWordsHistory",list:[{id:"setAlwaysShowWordsHistoryOff",display:"off",configValue:!1,exec:()=>{m.setAlwaysShowWordsHistory(!1)}},{id:"setAlwaysShowWordsHistoryOn",display:"on",configValue:!0,exec:()=>{m.setAlwaysShowWordsHistory(!0)}}]},te={title:"Indicate typos...",configKey:"indicateTypos",list:[{id:"setIndicateTyposOff",display:"off",configValue:"off",exec:()=>{m.setIndicateTypos("off")}},{id:"setIndicateTyposBelow",display:"below",configValue:"below",exec:()=>{m.setIndicateTypos("below")}},{id:"setIndicateTyposReplace",display:"replace",configValue:"replace",exec:()=>{m.setIndicateTypos("replace")}}]},oe={title:"Hide extra letters...",configKey:"hideExtraLetters",list:[{id:"setHideExtraLettersOff",display:"off",configValue:!1,exec:()=>{m.setHideExtraLetters(!1)}},{id:"setHideExtraLettersOn",display:"on",configValue:!0,exec:()=>{m.setHideExtraLetters(!0)}}]},ne={title:"Quick end...",configKey:"quickEnd",list:[{id:"setQuickEndOff",display:"off",configValue:!1,exec:()=>{m.setQuickEnd(!1)}},{id:"setQuickEndOn",display:"on",configValue:!0,exec:()=>{m.setQuickEnd(!0)}}]},ae={title:"Change opposite shift mode...",configKey:"oppositeShiftMode",list:[{id:"setOppositeShiftModeOff",display:"off",configValue:"off",exec:()=>{m.setOppositeShiftMode("off"),P.update()}},{id:"setOppositeShiftModeOn",display:"on",configValue:"on",exec:()=>{m.setOppositeShiftMode("on"),P.update()}},{id:"setOppositeShiftModeKeymap",display:"keymap",configValue:"keymap",exec:()=>{m.setOppositeShiftMode("keymap"),P.update()}}]},ie={title:"Sound on error...",configKey:"playSoundOnError",list:[{id:"setPlaySoundOnErrorOff",display:"off",configValue:!1,exec:()=>{m.setPlaySoundOnError(!1)}},{id:"setPlaySoundOnErrorOn",display:"on",configValue:!0,exec:()=>{m.setPlaySoundOnError(!0),l.playError()}}]},se={title:"Sound volume...",configKey:"soundVolume",list:[{id:"setSoundVolume0.1",display:"quiet",configValue:"0.1",exec:()=>{m.setSoundVolume("0.1"),l.playClick()}},{id:"setSoundVolume0.5",display:"medium",configValue:"0.5",exec:()=>{m.setSoundVolume("0.5"),l.playClick()}},{id:"setSoundVolume1.0",display:"loud",configValue:"1.0",exec:()=>{m.setSoundVolume("1.0"),l.playClick()}}]},re={title:"Flip test colors...",configKey:"flipTestColors",list:[{id:"setFlipTestColorsOff",display:"off",configValue:!1,exec:()=>{m.setFlipTestColors(!1)}},{id:"setFlipTestColorsOn",display:"on",configValue:!0,exec:()=>{m.setFlipTestColors(!0)}}]},de={title:"Smooth line scroll...",configKey:"smoothLineScroll",list:[{id:"setSmoothLineScrollOff",display:"off",configValue:!1,exec:()=>{m.setSmoothLineScroll(!1)}},{id:"setSmoothLineScrollOn",display:"on",configValue:!0,exec:()=>{m.setSmoothLineScroll(!0)}}]},ue={title:"Always show decimal places...",configKey:"alwaysShowDecimalPlaces",list:[{id:"setAlwaysShowDecimalPlacesOff",display:"off",configValue:!1,exec:()=>{m.setAlwaysShowDecimalPlaces(!1)}},{id:"setAlwaysShowDecimalPlacesOn",display:"on",configValue:!0,exec:()=>{m.setAlwaysShowDecimalPlaces(!0)}}]},le={title:"Always show CPM...",configKey:"alwaysShowCPM",list:[{id:"setAlwaysShowCPMOff",display:"off",configValue:!1,exec:()=>{m.setAlwaysShowCPM(!1)}},{id:"setAlwaysShowCPMOn",display:"on",configValue:!0,exec:()=>{m.setAlwaysShowCPM(!0)}}]},ce={title:"Start graphs at zero...",configKey:"startGraphsAtZero",list:[{id:"setStartGraphsAtZeroOff",display:"off",configValue:!1,exec:()=>{m.setStartGraphsAtZero(!1)}},{id:"setStartGraphsAtZeroOn",display:"on",configValue:!0,exec:()=>{m.setStartGraphsAtZero(!0)}}]},pe={title:"Lazy mode...",configKey:"lazyMode",list:[{id:"setLazyModeOff",display:"off",configValue:!1,exec:()=>{m.setLazyMode(!1),y.restart()}},{id:"setLazyModeOn",display:"on",configValue:!0,exec:()=>{m.setLazyMode(!0),y.restart()}}]},fe={title:"Show all lines...",configKey:"showAllLines",list:[{id:"setShowAllLinesOff",display:"off",configValue:!1,exec:()=>{m.setShowAllLines(!1)}},{id:"setShowAllLinesOn",display:"on",configValue:!0,exec:()=>{m.setShowAllLines(!0)}}]},he={title:"Colorful mode...",configKey:"colorfulMode",list:[{id:"setColorfulModeOff",display:"off",configValue:!1,exec:()=>{m.setColorfulMode(!1)}},{id:"setColorfulModeOn",display:"on",configValue:!0,exec:()=>{m.setColorfulMode(!0)}}]},me={title:"Colorful mode...",configKey:"showOutOfFocusWarning",list:[{id:"setShowOutOfFocusWarningOff",display:"off",configValue:!1,exec:()=>{m.setShowOutOfFocusWarning(!1)}},{id:"setShowOutOfFocusWarningOn",display:"on",configValue:!0,exec:()=>{m.setShowOutOfFocusWarning(!0)}}]},ge={title:"Keymap mode...",configKey:"keymapMode",list:[{id:"setKeymapModeOff",display:"off",configValue:"off",exec:()=>{m.setKeymapMode("off")}},{id:"setKeymapModeStatic",display:"static",configValue:"static",exec:()=>{m.setKeymapMode("static")}},{id:"setKeymapModeNext",display:"next",configValue:"next",exec:()=>{m.setKeymapMode("next")}},{id:"setKeymapModeReact",display:"react",alias:"flash",configValue:"react",exec:()=>{m.setKeymapMode("react")}}]},ve={title:"Sound on click...",configKey:"playSoundOnClick",list:[{id:"setSoundOnClickOff",display:"off",configValue:"off",exec:()=>{m.setPlaySoundOnClick("off")}},{id:"setSoundOnClick1",display:"click",configValue:"1",hover:()=>{l.previewClick("1")},exec:()=>{m.setPlaySoundOnClick("1"),l.playClick()}},{id:"setSoundOnClick2",display:"beep",configValue:"2",hover:()=>{l.previewClick("2")},exec:()=>{m.setPlaySoundOnClick("2"),l.playClick()}},{id:"setSoundOnClick3",display:"pop",configValue:"3",hover:()=>{l.previewClick("3")},exec:()=>{m.setPlaySoundOnClick("3"),l.playClick()}},{id:"setSoundOnClick4",display:"nk creams",configValue:"4",hover:()=>{l.previewClick("4")},exec:()=>{m.setPlaySoundOnClick("4"),l.playClick()}},{id:"setSoundOnClick5",display:"typewriter",configValue:"5",hover:()=>{l.previewClick("5")},exec:()=>{m.setPlaySoundOnClick("5"),l.playClick()}},{id:"setSoundOnClick6",display:"osu",configValue:"6",hover:()=>{l.previewClick("6")},exec:()=>{m.setPlaySoundOnClick("6"),l.playClick()}},{id:"setSoundOnClick7",display:"hitmarker",configValue:"7",hover:()=>{l.previewClick("7")},exec:()=>{m.setPlaySoundOnClick("7"),l.playClick()}}]},ye={title:"Random theme...",configKey:"randomTheme",list:[{id:"setRandomOff",display:"off",configValue:"off",exec:()=>{m.setRandomTheme("off")}},{id:"setRandomOn",display:"on",configValue:"on",exec:()=>{m.setRandomTheme("on")}},{id:"setRandomFav",display:"fav",configValue:"fav",exec:()=>{m.setRandomTheme("fav")}},{id:"setRandomLight",display:"light",configValue:"light",exec:()=>{m.setRandomTheme("light")}},{id:"setRandomDark",display:"dark",configValue:"dark",exec:()=>{m.setRandomTheme("dark")}},{id:"setRandomCustom",display:"custom",configValue:"custom",exec:()=>{null!==L.Auth.currentUser?m.setRandomTheme("custom"):u.add("Multiple custom themes are available to logged in users only",0)}}]},be={title:"Difficulty...",configKey:"difficulty",list:[{id:"setDifficultyNormal",display:"normal",configValue:"normal",exec:()=>{m.setDifficulty("normal")}},{id:"setDifficultyExpert",display:"expert",configValue:"expert",exec:()=>{m.setDifficulty("expert")}},{id:"setDifficultyMaster",display:"master",configValue:"master",exec:()=>{m.setDifficulty("master")}}]};function we(){null!==L.Auth.currentUser&&(t.customThemeListCommands.list=[],r.getSnapshot()&&0!==r.getSnapshot().customThemes.length&&r.getSnapshot().customThemes.forEach((e=>{t.customThemeListCommands.list.push({id:"setCustomThemeId"+e._id,display:e.name,configValue:e._id,hover:()=>{c.preview(e._id,!0)},exec:()=>{m.setCustomTheme(!0),c.set(e._id,!0)}})})))}t.commandsEnableAds={title:"Set enable ads...",configKey:"enableAds",list:[{id:"setEnableAdsOff",display:"off",configValue:"off",exec:()=>{m.setEnableAds("off")}},{id:"setEnableAdsOn",display:"on",configValue:"on",exec:()=>{m.setEnableAds("on")}},{id:"setEnableMax",display:"sellout",configValue:"max",exec:()=>{m.setEnableAds("max")}}]},t.customThemeCommands={title:"Custom theme",configKey:"customTheme",list:[{id:"setCustomThemeOff",display:"off",configValue:!1,exec:()=>{m.setCustomTheme(!1)}},{id:"setCustomThemeOn",display:"on",configValue:!0,exec:()=>{m.setCustomTheme(!0)}}]},t.customThemeListCommands={title:"Custom themes list...",list:[]},t.updateCustomThemeListCommands=we;const $e={title:"Change caret style...",configKey:"caretStyle",list:[{id:"setCaretStyleOff",display:"off",configValue:"off",exec:()=>{m.setCaretStyle("off")}},{id:"setCaretStyleDefault",display:"line",configValue:"default",exec:()=>{m.setCaretStyle("default")}},{id:"setCaretStyleBlock",display:"block",configValue:"block",exec:()=>{m.setCaretStyle("block")}},{id:"setCaretStyleOutline",display:"outline-block",configValue:"outline",exec:()=>{m.setCaretStyle("outline")}},{id:"setCaretStyleUnderline",display:"underline",configValue:"underline",exec:()=>{m.setCaretStyle("underline")}},{id:"setCaretStyleCarrot",display:"carrot",configValue:"carrot",visible:!1,exec:()=>{m.setCaretStyle("carrot")}},{id:"setCaretStyleBanana",display:"banana",configValue:"banana",visible:!1,exec:()=>{m.setCaretStyle("banana")}}]},Ce={title:"Change pace caret style...",configKey:"paceCaretStyle",list:[{id:"setPaceCaretStyleDefault",display:"line",configValue:"default",exec:()=>{m.setPaceCaretStyle("default")}},{id:"setPaceCaretStyleBlock",display:"block",configValue:"block",exec:()=>{m.setPaceCaretStyle("block")}},{id:"setPaceCaretStyleOutline",display:"outline-block",configValue:"outline",exec:()=>{m.setPaceCaretStyle("outline")}},{id:"setPaceCaretStyleUnderline",display:"underline",configValue:"underline",exec:()=>{m.setPaceCaretStyle("underline")}},{id:"setPaceCaretStyleCarrot",display:"carrot",configValue:"carrot",visible:!1,exec:()=>{m.setPaceCaretStyle("carrot")}},{id:"setPaceCaretStyleBanana",display:"banana",configValue:"banana",visible:!1,exec:()=>{m.setPaceCaretStyle("banana")}}]},Se={title:"Repeated pace...",configKey:"repeatedPace",list:[{id:"setRepeatedPaceOff",display:"off",configValue:!1,exec:()=>{m.setRepeatedPace(!1)}},{id:"setRepeatedPaceOn",display:"on",configValue:!0,exec:()=>{m.setRepeatedPace(!0)}}]},_e={title:"Pace caret mode...",configKey:"paceCaret",list:[{id:"setPaceCaretOff",display:"off",configValue:"off",exec:()=>{m.setPaceCaret("off"),y.restart()}},{id:"setPaceCaretPb",display:"pb",configValue:"pb",exec:()=>{m.setPaceCaret("pb"),y.restart()}},{id:"setPaceCaretLast",display:"last",configValue:"last",exec:()=>{m.setPaceCaret("last"),y.restart()}},{id:"setPaceCaretAverage",display:"average",configValue:"average",exec:()=>{m.setPaceCaret("average"),y.restart()}},{id:"setPaceCaretCustom",display:"custom...",configValue:"custom",input:!0,exec:e=>{e&&(m.setPaceCaretCustomSpeed(parseInt(e)),m.setPaceCaret("custom"),y.restart())}}]},ke={title:"Change min wpm mode...",configKey:"minWpm",list:[{id:"setMinWpmOff",display:"off",configValue:"off",exec:()=>{m.setMinWpm("off")}},{id:"setMinWpmCustom",display:"custom...",configValue:"custom",input:!0,exec:e=>{e&&(m.setMinWpmCustomSpeed(parseInt(e)),m.setMinWpm("custom"))}}]},xe={title:"Change min accuracy mode...",configKey:"minAcc",list:[{id:"setMinAccOff",display:"off",configValue:"off",exec:()=>{m.setMinAcc("off")}},{id:"setMinAccCustom",display:"custom...",configValue:"custom",input:!0,exec:e=>{e&&(m.setMinAccCustom(parseInt(e)),m.setMinAcc("custom"))}}]},Te={title:"Change min burst mode...",configKey:"minBurst",list:[{id:"setMinBurstOff",display:"off",configValue:"off",exec:()=>{m.setMinBurst("off")}},{id:"setMinBurstFixed",display:"fixed...",configValue:"fixed",input:!0,exec:e=>{e&&(m.setMinBurst("fixed"),m.setMinBurstCustomSpeed(parseInt(e)))}},{id:"setMinBurstFlex",display:"flex...",configValue:"flex",input:!0,exec:e=>{e&&(m.setMinBurst("flex"),m.setMinBurstCustomSpeed(parseInt(e)))}}]},Pe={title:"Keymap style...",configKey:"keymapStyle",list:[{id:"setKeymapStyleStaggered",display:"staggered",configValue:"staggered",exec:()=>{m.setKeymapStyle("staggered")}},{id:"setKeymapStyleAlice",display:"alice",configValue:"alice",exec:()=>{m.setKeymapStyle("alice")}},{id:"setKeymapStyleMatrix",display:"matrix",configValue:"matrix",exec:()=>{m.setKeymapStyle("matrix")}},{id:"setKeymapStyleSplit",display:"split",configValue:"split",exec:()=>{m.setKeymapStyle("split")}},{id:"setKeymapStyleSplitMatrix",display:"split matrix",configValue:"split_matrix",exec:()=>{m.setKeymapStyle("split_matrix")}}]},Me={title:"Keymap legend style...",configKey:"keymapLegendStyle",list:[{id:"setKeymapLegendStyleLowercase",display:"lowercase",configValue:"lowercase",exec:()=>{m.setKeymapLegendStyle("lowercase")}},{id:"setKeymapLegendStyleUppercase",display:"uppercase",configValue:"uppercase",exec:()=>{m.setKeymapLegendStyle("uppercase")}},{id:"setKeymapLegendStyleBlank",display:"blank",configValue:"blank",exec:()=>{m.setKeymapLegendStyle("blank")}},{id:"setKeymapLegendStyleDynamic",display:"dynamic",configValue:"dynamic",exec:()=>{m.setKeymapLegendStyle("dynamic")}}]},Oe={title:"British english...",configKey:"britishEnglish",list:[{id:"setBritishEnglishOff",display:"off",configValue:!1,exec:()=>{m.setBritishEnglish(!1),y.restart()}},{id:"setBritishEnglishOn",display:"on",configValue:!0,exec:()=>{m.setBritishEnglish(!0),y.restart()}}]},Le={title:"Highlight mode...",configKey:"highlightMode",list:[{id:"setHighlightModeOff",display:"off",configValue:"off",exec:()=>{m.setHighlightMode("off")}},{id:"setHighlightModeLetter",display:"letter",configValue:"letter",exec:()=>{m.setHighlightMode("letter")}},{id:"setHighlightModeWord",display:"word",configValue:"word",exec:()=>{m.setHighlightMode("word")}}]},We={title:"Tape mode...",configKey:"tapeMode",list:[{id:"setTapeModeOff",display:"off",configValue:"off",exec:()=>{m.setTapeMode("off")}},{id:"setTapeModeLetter",display:"letter",configValue:"letter",exec:()=>{m.setTapeMode("letter")}},{id:"setTapeModeWord",display:"word",configValue:"word",exec:()=>{m.setTapeMode("word")}}]},Ae={title:"Timer/progress style...",configKey:"timerStyle",list:[{id:"setTimerStyleBar",display:"bar",configValue:"bar",exec:()=>{m.setTimerStyle("bar")}},{id:"setTimerStyleText",display:"text",configValue:"text",exec:()=>{m.setTimerStyle("text")}},{id:"setTimerStyleMini",display:"mini",configValue:"mini",exec:()=>{m.setTimerStyle("mini")}}]},Be={title:"Timer/progress color...",configKey:"timerColor",list:[{id:"setTimerColorBlack",display:"black",configValue:"black",exec:()=>{m.setTimerColor("black")}},{id:"setTimerColorSub",display:"sub",configValue:"sub",exec:()=>{m.setTimerColor("sub")}},{id:"setTimerColorText",display:"text",configValue:"text",exec:()=>{m.setTimerColor("text")}},{id:"setTimerColorMain",display:"main",configValue:"main",exec:()=>{m.setTimerColor("main")}}]},Ee={title:"Single list command line...",configKey:"singleListCommandLine",list:[{id:"singleListCommandLineManual",display:"manual",configValue:"manual",exec:()=>{m.setSingleListCommandLine("manual")}},{id:"singleListCommandLineOn",display:"on",configValue:"on",exec:()=>{m.setSingleListCommandLine("on")}}]},je={title:"Caps lock warning...",configKey:"capsLockWarning",list:[{id:"capsLockWarningOn",display:"on",configValue:!0,exec:()=>{m.setCapsLockWarning(!0)}},{id:"capsLockWarningOff",display:"off",configValue:!1,exec:()=>{m.setCapsLockWarning(!1)}}]},Re={title:"Timer/progress opacity...",configKey:"timerOpacity",list:[{id:"setTimerOpacity.25",display:".25",configValue:.25,exec:()=>{m.setTimerOpacity("0.25")}},{id:"setTimerOpacity.5",display:".5",configValue:.5,exec:()=>{m.setTimerOpacity("0.5")}},{id:"setTimerOpacity.75",display:".75",configValue:.75,exec:()=>{m.setTimerOpacity("0.75")}},{id:"setTimerOpacity1",display:"1",configValue:1,exec:()=>{m.setTimerOpacity("1")}}]},Ie={title:"Change word count...",configKey:"words",list:[{id:"changeWordCount10",display:"10",configValue:10,exec:()=>{m.setMode("words"),m.setWordCount(10),y.restart()}},{id:"changeWordCount25",display:"25",configValue:25,exec:()=>{m.setMode("words"),m.setWordCount(25),y.restart()}},{id:"changeWordCount50",display:"50",configValue:50,exec:()=>{m.setMode("words"),m.setWordCount(50),y.restart()}},{id:"changeWordCount100",display:"100",configValue:100,exec:()=>{m.setMode("words"),m.setWordCount(100),y.restart()}},{id:"changeWordCount200",display:"200",configValue:200,exec:()=>{m.setMode("words"),m.setWordCount(200),y.restart()}},{id:"changeWordCountCustom",display:"custom...",input:!0,exec:e=>{e&&(m.setMode("words"),m.setWordCount(parseInt(e)),y.restart())}}]},De={title:"Change quote length...",configKey:"quoteLength",list:[{id:"changeQuoteLengthAll",display:"all",configValue:[0,1,2,3],exec:()=>{m.setMode("quote"),m.setQuoteLength([0,1,2,3]),y.restart()}},{id:"changeQuoteLengthShort",display:"short",configValue:0,configValueMode:"include",exec:()=>{m.setMode("quote"),m.setQuoteLength(0),y.restart()}},{id:"changeQuoteLengthMedium",display:"medium",configValue:1,configValueMode:"include",exec:()=>{m.setMode("quote"),m.setQuoteLength(1),y.restart()}},{id:"changeQuoteLengthLong",display:"long",configValue:2,configValueMode:"include",exec:()=>{m.setMode("quote"),m.setQuoteLength(2),y.restart()}},{id:"changeQuoteLengthThicc",display:"thicc",configValue:3,configValueMode:"include",exec:()=>{m.setMode("quote"),m.setQuoteLength(3),y.restart()}},{id:"changeQuoteLengthFavorite",display:"favorite",configValue:-3,configValueMode:"include",available:()=>!!L.Auth.currentUser,exec:()=>{m.setMode("quote"),m.setQuoteLength(-3),y.restart()}}]},qe={title:"Change punctuation...",configKey:"punctuation",list:[{id:"changePunctuationOn",display:"on",configValue:!0,exec:()=>{m.setPunctuation(!0),y.restart()}},{id:"changePunctuationOff",display:"off",configValue:!1,exec:()=>{m.setPunctuation(!1),y.restart()}}]},Fe={title:"Numbers...",configKey:"numbers",list:[{id:"changeNumbersOn",display:"on",configValue:!0,exec:()=>{m.setNumbers(!0),y.restart()}},{id:"changeNumbersOff",display:"off",configValue:!1,exec:()=>{m.setNumbers(!1),y.restart()}}]},Ve={title:"Smooth caret...",configKey:"smoothCaret",list:[{id:"changeSmoothCaretOn",display:"on",configValue:!0,exec:()=>{m.setSmoothCaret(!0)}},{id:"changeSmoothCaretOff",display:"off",configValue:!1,exec:()=>{m.setSmoothCaret(!1)}}]},Ke={title:"Quick restart...",configKey:"quickRestart",list:[{id:"changeQuickRestartTab",display:"tab",configValue:"tab",exec:()=>{m.setQuickRestartMode("tab")}},{id:"changeQuickRestartEsc",display:"esc",configValue:"esc",exec:()=>{m.setQuickRestartMode("esc")}},{id:"changeQuickRestartOff",display:"off",configValue:"off",exec:()=>{m.setQuickRestartMode("off")}}]},He={title:"Change mode...",configKey:"mode",list:[{id:"changeModeTime",display:"time",configValue:"time",exec:()=>{m.setMode("time"),y.restart()}},{id:"changeModeWords",display:"words",configValue:"words",exec:()=>{m.setMode("words"),y.restart()}},{id:"changeModeQuote",display:"quote",configValue:"quote",exec:()=>{m.setMode("quote"),y.restart()}},{id:"changeModeCustom",display:"custom",configValue:"custom",exec:()=>{m.setMode("custom"),y.restart()}},{id:"changeModeZen",display:"zen",configValue:"zen",exec:()=>{m.setMode("zen"),f.set(),y.restart()}}]},ze={title:"Change time config...",configKey:"time",list:[{id:"changeTimeConfig15",display:"15",configValue:15,exec:()=>{m.setMode("time"),m.setTimeConfig(15),y.restart()}},{id:"changeTimeConfig30",display:"30",configValue:30,exec:()=>{m.setMode("time"),m.setTimeConfig(30),y.restart()}},{id:"changeTimeConfig60",display:"60",configValue:60,exec:()=>{m.setMode("time"),m.setTimeConfig(60),y.restart()}},{id:"changeTimeConfig120",display:"120",configValue:120,exec:()=>{m.setMode("time"),m.setTimeConfig(120),y.restart()}},{id:"changeTimeConfigCustom",display:"custom...",input:!0,exec:e=>{e&&(m.setMode("time"),m.setTimeConfig(parseInt(e)),y.restart())}}]},Ne={title:"Confidence mode...",configKey:"confidenceMode",list:[{id:"changeConfidenceModeOff",display:"off",configValue:"off",exec:()=>{m.setConfidenceMode("off")}},{id:"changeConfidenceModeOn",display:"on",configValue:"on",exec:()=>{m.setConfidenceMode("on")}},{id:"changeConfidenceModeMax",display:"max",configValue:"max",exec:()=>{m.setConfidenceMode("max")}}]},Qe={title:"Stop on error...",configKey:"stopOnError",list:[{id:"changeStopOnErrorOff",display:"off",configValue:"off",exec:()=>{m.setStopOnError("off")}},{id:"changeStopOnErrorLetter",display:"letter",configValue:"letter",exec:()=>{m.setStopOnError("letter")}},{id:"changeStopOnErrorWord",display:"word",configValue:"word",exec:()=>{m.setStopOnError("word")}}]},Ue={title:"Font size...",configKey:"fontSize",list:[{id:"changeFontSize1",display:"1x",configValue:"1",exec:()=>{m.setFontSize("1"),y.restart()}},{id:"changeFontSize125",display:"1.25x",configValue:"125",exec:()=>{m.setFontSize("125"),y.restart()}},{id:"changeFontSize15",display:"1.5x",configValue:"15",exec:()=>{m.setFontSize("15"),y.restart()}},{id:"changeFontSize2",display:"2x",configValue:"2",exec:()=>{m.setFontSize("2"),y.restart()}},{id:"changeFontSize3",display:"3x",configValue:"3",exec:()=>{m.setFontSize("3"),y.restart()}},{id:"changeFontSize4",display:"4x",configValue:"4",exec:()=>{m.setFontSize("4"),y.restart()}}]},Ge={title:"Page width...",configKey:"pageWidth",list:[{id:"setPageWidth100",display:"100",configValue:"100",exec:()=>{m.setPageWidth("100")}},{id:"setPageWidth125",display:"125",configValue:"125",exec:()=>{m.setPageWidth("125")}},{id:"setPageWidth150",display:"150",configValue:"150",exec:()=>{m.setPageWidth("150")}},{id:"setPageWidth200",display:"200",configValue:"200",exec:()=>{m.setPageWidth("200")}},{id:"setPageWidthMax",display:"max",configValue:"max",exec:()=>{m.setPageWidth("max")}}]},Je={title:"Practice words...",list:[{id:"practiseWordsMissed",display:"missed",noIcon:!0,exec:()=>{g.init(!0,!1),y.restart(!1,!1,void 0,!0)}},{id:"practiseWordsSlow",display:"slow",noIcon:!0,exec:()=>{g.init(!1,!0),y.restart(!1,!1,void 0,!0)}},{id:"practiseWordsBoth",display:"both",noIcon:!0,exec:()=>{g.init(!0,!0),y.restart(!1,!1,void 0,!0)}}]};t.themeCommands={title:"Theme...",configKey:"theme",list:[]},d.getThemesList().then((e=>{e.forEach((e=>{t.themeCommands.list.push({id:"changeTheme"+d.capitalizeFirstLetterOfEachWord(e.name),display:e.name.replace(/_/g," "),configValue:e.name,hover:()=>{c.preview(e.name,!1)},exec:()=>{m.setTheme(e.name)}})}))})),t.commandsChallenges={title:"Load challenge...",list:[]},d.getChallengeList().then((e=>{e.forEach((e=>{t.commandsChallenges.list.push({id:"loadChallenge"+d.capitalizeFirstLetterOfEachWord(e.name),noIcon:!0,display:e.display,exec:()=>{(0,B.navigate)("/"),k.setup(e.name),y.restart(!1,!0)}})}))})),t.updateThemeCommands=function(){h.default.favThemes.length>0&&(t.themeCommands.list=[],h.default.favThemes.forEach((e=>{t.themeCommands.list.push({id:"changeTheme"+d.capitalizeFirstLetterOfEachWord(e),display:e.replace(/_/g," "),hover:()=>{c.preview(e,!1)},exec:()=>{m.setTheme(e)}})})),d.getThemesList().then((e=>{e.forEach((e=>{h.default.favThemes.includes(e.name)||t.themeCommands.list.push({id:"changeTheme"+d.capitalizeFirstLetterOfEachWord(e.name),display:e.name.replace(/_/g," "),hover:()=>{c.preview(e.name,!1)},exec:()=>{m.setTheme(e.name)}})}))})))};const Ze={title:"Are you sure...",list:[{id:"copyNo",display:"Nevermind"},{id:"copyYes",display:"Yes, I am sure",exec:()=>{const e=d.getWords();navigator.clipboard.writeText(e).then((()=>{u.add("Copied to clipboard",1)}),(()=>{u.add("Failed to copy!",-1)}))}}]},Ye={title:"Power mode...",configKey:"monkeyPowerLevel",list:[{id:"monkeyPowerLevelOff",display:"off",configValue:"off",exec:()=>m.setMonkeyPowerLevel("off")},{id:"monkeyPowerLevel1",display:"mellow",configValue:"1",exec:()=>m.setMonkeyPowerLevel("1")},{id:"monkeyPowerLevel2",display:"high",configValue:"2",exec:()=>m.setMonkeyPowerLevel("2")},{id:"monkeyPowerLevel3",display:"ultra",configValue:"3",exec:()=>m.setMonkeyPowerLevel("3")},{id:"monkeyPowerLevel4",display:"over 9000",configValue:"4",exec:()=>m.setMonkeyPowerLevel("4")}]};t.defaultCommands={title:"",list:[{id:"changePunctuation",display:"Punctuation...",icon:"!?",subgroup:qe},{id:"changeMode",display:"Mode...",icon:"fa-bars",subgroup:He},{id:"changeTimeConfig",display:"Time...",icon:"fa-clock",subgroup:ze},{id:"changeWordCount",display:"Words...",alias:"words",icon:"fa-font",subgroup:Ie},{id:"changeQuoteLength",display:"Quote length...",icon:"fa-quote-right",alias:"quotes",subgroup:De},{visible:!1,id:"changeTags",display:"Tags...",icon:"fa-tag",subgroup:q,beforeSubgroup:()=>{F()},available:()=>!!L.Auth.currentUser},{visible:!1,id:"applyPreset",display:"Presets...",icon:"fa-sliders-h",subgroup:V,beforeSubgroup:()=>{K()},available:()=>!!L.Auth.currentUser},{id:"changeConfidenceMode",display:"Confidence mode...",icon:"fa-backspace",subgroup:Ne},{id:"changeStopOnError",display:"Stop on error...",icon:"fa-hand-paper",subgroup:Qe},{id:"changeNumbers",display:"Numbers...",icon:"15",subgroup:Fe},{id:"changeSmoothCaret",display:"Smooth caret...",icon:"fa-i-cursor",subgroup:Ve},{id:"changeQuickRestart",display:"Quick restart...",icon:"fa-redo-alt",subgroup:Ke},{id:"changeRepeatQuotes",display:"Repeat quotes...",icon:"fa-sync-alt",subgroup:H},{id:"changeLiveWpm",display:"Live WPM...",icon:"fa-tachometer-alt",subgroup:z},{id:"changeLiveAcc",display:"Live accuracy...",icon:"fa-percentage",subgroup:Q},{id:"changeLiveBurst",display:"Live burst...",icon:"fa-fire-alt",subgroup:U},{id:"changeShowTimer",display:"Timer/progress...",icon:"fa-clock",subgroup:G},{id:"changeKeyTips",display:"Key tips...",icon:"fa-question",subgroup:J},{id:"changeFreedomMode",display:"Freedom mode...",subgroup:Z},{id:"changeStrictSpace",display:"Strict space...",icon:"fa-minus",subgroup:Y},{id:"changeBlindMode",display:"Blind mode...",icon:"fa-eye-slash",subgroup:X},{id:"changeShowWordsHistory",display:"Always show words history...",icon:"fa-align-left",subgroup:ee},{id:"changeIndicateTypos",display:"Indicate typos...",icon:"fa-exclamation",subgroup:te},{id:"changeHideExtraLetters",display:"Hide extra letters...",icon:"fa-eye-slash",subgroup:oe},{id:"changeQuickEnd",display:"Quick end...",icon:"fa-step-forward",subgroup:ne},{id:"singleListCommandLine",display:"Single list command line...",icon:"fa-list",subgroup:Ee},{id:"capsLockWarning",display:"Caps lock warning...",icon:"fa-exclamation-triangle",subgroup:je},{id:"changeMinWpm",display:"Minimum wpm...",alias:"minimum",icon:"fa-bomb",subgroup:ke},{id:"changeMinAcc",display:"Minimum accuracy...",alias:"minimum",icon:"fa-bomb",subgroup:xe},{id:"changeMinBurst",display:"Minimum burst...",alias:"minimum",icon:"fa-bomb",subgroup:Te},{id:"changeOppositeShiftMode",display:"Change opposite shift mode...",icon:"fa-exchange-alt",subgroup:ae},{id:"changeSoundOnClick",display:"Sound on click...",icon:"fa-volume-up",subgroup:ve},{id:"changeSoundOnError",display:"Sound on error...",icon:"fa-volume-mute",subgroup:ie},{id:"changeSoundVolume",display:"Sound volume...",icon:"fa-volume-down",subgroup:se},{id:"changeFlipTestColors",display:"Flip test colors...",icon:"fa-adjust",subgroup:re},{id:"changeSmoothLineScroll",display:"Smooth line scroll...",icon:"fa-align-left",subgroup:de},{id:"changeAlwaysShowDecimal",display:"Always show decimal places...",icon:"00",subgroup:ue},{id:"changeAlwaysShowCPM",display:"Always show CPM...",icon:"fa-tachometer-alt",subgroup:le},{id:"changeStartGraphsAtZero",display:"Start graphs at zero...",icon:"fa-chart-line",subgroup:ce},{id:"changeLazyMode",display:"Lazy mode...",icon:"fa-couch",subgroup:pe},{id:"changeShowAllLines",display:"Show all lines...",icon:"fa-align-left",subgroup:fe},{id:"changeColorfulMode",display:"Colorful mode...",icon:"fa-fill-drip",subgroup:he},{id:"changeOutOfFocusWarning",display:"Out of focus warning...",icon:"fa-exclamation",subgroup:me},{id:"setEnableAds",display:"Enable ads...",icon:"fa-ad",subgroup:t.commandsEnableAds},{id:"changeTheme",display:"Theme...",icon:"fa-palette",subgroup:t.themeCommands},{id:"setCustomTheme",display:"Custom theme...",icon:"fa-palette",subgroup:t.customThemeCommands},{id:"setCustomThemeId",display:"Custom themes...",icon:"fa-palette",subgroup:t.customThemeListCommands,beforeSubgroup:()=>we(),available:()=>null!==L.Auth.currentUser},{id:"changeRandomTheme",display:"Random theme...",icon:"fa-random",subgroup:ye},{id:"randomizeTheme",display:"Next random theme",icon:"fa-random",exec:()=>c.randomizeTheme(),available:()=>"off"!==h.default.randomTheme},{id:"changeDifficulty",display:"Difficulty...",icon:"fa-star",subgroup:be},{id:"changeCaretStyle",display:"Caret style...",icon:"fa-i-cursor",subgroup:$e},{id:"changePaceCaret",display:"Pace caret mode...",icon:"fa-i-cursor",subgroup:_e},{id:"changePaceCaretStyle",display:"Pace caret style...",icon:"fa-i-cursor",subgroup:Ce},{id:"changeRepeatedPace",display:"Repeated pace...",icon:"fa-i-cursor",subgroup:Se},{id:"changeTimerStyle",display:"Timer/progress style...",icon:"fa-clock",subgroup:Ae},{id:"changeTimerColor",display:"Timer/progress color...",icon:"fa-clock",subgroup:Be},{id:"changeTimerOpacity",display:"Timer/progress opacity...",icon:"fa-clock",subgroup:Re},{id:"changeHighlightMode",display:"Highlight mode...",icon:"fa-highlighter",subgroup:Le},{id:"changeTapeMode",display:"Tape mode...",icon:"fa-tape",subgroup:We},{id:"changeShowAverage",display:"Show average...",icon:"fa-chart-bar",subgroup:N},{id:"changeCustomBackground",display:"Custom background...",icon:"fa-image",defaultValue:"",input:!0,exec:e=>{e&&m.setCustomBackground(e)}},{id:"changeLanguage",display:"Language...",icon:"fa-language",subgroup:R},{id:"changeBritishEnglish",display:"British english...",icon:"fa-language",subgroup:Oe},{id:"changeFunbox",display:"Funbox...",alias:"fun box",icon:"fa-gamepad",subgroup:I},{id:"changeLayout",display:"Layout emulator...",icon:"fa-keyboard",subgroup:j},{id:"toggleKeymap",display:"Keymap mode...",icon:"fa-keyboard",alias:"keyboard",subgroup:ge},{id:"changeKeymapStyle",display:"Keymap style...",alias:"keyboard",icon:"fa-keyboard",subgroup:Pe},{id:"changeKeymapLegendStyle",display:"Keymap legend style...",alias:"keyboard",icon:"fa-keyboard",subgroup:Me},{id:"changeKeymapLayout",display:"Keymap layout...",alias:"keyboard",icon:"fa-keyboard",subgroup:t.commandsKeymapLayouts},{id:"changeCustomLayoutfluid",display:"Custom layoutfluid...",defaultValue:"qwerty dvorak colemak",input:!0,icon:"fa-tint",exec:e=>{void 0!==e&&(m.setCustomLayoutfluid(e),"layoutfluid"===h.default.funbox&&y.restart())}},{id:"changeFontSize",display:"Font size...",icon:"fa-font",subgroup:Ue},{id:"changeFontFamily",display:"Font family...",icon:"fa-font",subgroup:D},{id:"changePageWidth",display:"Page width...",icon:"fa-arrows-alt-h",subgroup:Ge},{id:"viewTypingPage",display:"View Typing Page",alias:"start begin type test",icon:"fa-keyboard",exec:()=>{(0,B.navigate)("/")}},{id:"viewLeaderboards",display:"View Leaderboards",icon:"fa-crown",exec:()=>{$("#top #menu .textButton.view-leaderboards").trigger("click")}},{id:"viewAbout",display:"View About Page",icon:"fa-info",exec:()=>{(0,B.navigate)("/about")}},{id:"viewSettings",display:"View Settings Page",icon:"fa-cog",exec:()=>{(0,B.navigate)("/settings")}},{id:"viewQuoteSearchPopup",display:"Search for quotes",icon:"fa-search",exec:()=>{m.setMode("quote"),$("#quote-search-button").trigger("click")},shouldFocusTestUI:!1},{id:"viewAccount",display:"View Account Page",icon:"fa-user",alias:"stats",exec:()=>{$("#top #menu .textButton.view-account").hasClass("hidden")?(0,B.navigate)("/login"):(0,B.navigate)("/account")}},{id:"toggleFullscreen",display:"Toggle Fullscreen",icon:"fa-expand",exec:()=>{d.toggleFullscreen()}},{id:"bailOut",display:"Bail out...",icon:"fa-running",subgroup:{title:"Are you sure...",list:[{id:"bailOutNo",display:"Nevermind",available:()=>E()},{id:"bailOutForSure",display:"Yes, I am sure",exec:()=>{T.setBailout(!0),y.finish()},available:()=>E()}]},visible:!1,available:()=>E()},{id:"loadChallenge",display:"Load challenge...",icon:"fa-award",subgroup:t.commandsChallenges},{id:"joinDiscord",display:"Join the Discord server",icon:"fa-users",exec:()=>{window.open("https://discord.gg/monkeytype")}},{id:"repeatTest",display:"Repeat test",icon:"fa-sync-alt",exec:()=>{y.restart(!0)},available:()=>v.resultVisible},{id:"practiseWords",display:"Practice words...",icon:"fa-exclamation-triangle",subgroup:Je,available:()=>v.resultVisible},{id:"toggleWordHistory",display:"Toggle word history",icon:"fa-align-left",exec:()=>{v.toggleResultWords()},available:()=>v.resultVisible},{id:"saveScreenshot",display:"Save screenshot",icon:"fa-image",alias:"ss picture",exec:()=>{setTimeout((()=>{v.screenshot()}),500)},available:()=>v.resultVisible},{id:"changeCustomModeText",display:"Change custom text",icon:"fa-align-left",exec:()=>{p.show()}},{id:"toggleMonkey",display:"Toggle Monkey",icon:"fa-egg",visible:!1,exec:()=>{m.setMonkey(!h.default.monkey)}},{id:"copyWordsToClipboard",display:"Copy words to clipboard",icon:"fa-copy",subgroup:!0,exec:()=>{t.current.push(Ze)}},{id:"importSettingsJSON",display:"Import settings JSON",icon:"fa-cog",alias:"import config",input:!0,exec:e=>{if(e)try{m.apply(JSON.parse(e)),m.saveFullConfigToLocalStorage(),_.update(),u.add("Done",1)}catch(e){u.add("An error occured while importing settings: "+e,-1)}}},{id:"exportSettingsJSON",display:"Export settings JSON",icon:"fa-cog",alias:"export config",input:!0,defaultValue:""},{id:"monkeyPower",display:"Power mode...",alias:"powermode",icon:"fa-egg",visible:!1,subgroup:Ye},{id:"shareTestSettings",display:"Share test settings",icon:"fa-share",exec:()=>s(void 0,void 0,void 0,(function*(){O.show()}))},{id:"clearSwCache",display:"Clear SW cache",icon:"fa-cog",exec:()=>s(void 0,void 0,void 0,(function*(){const e=yield caches.keys();for(const t of e)yield caches.delete(t);window.location.reload()}))},{id:"getSwCache",display:"Get SW cache",icon:"fa-cog",exec:()=>s(void 0,void 0,void 0,(function*(){alert(yield caches.keys())}))}]},t.current=[t.defaultCommands],t.setCurrent=function(e){t.current=e},t.pushCurrent=function(e){t.current.push(e)};const Xe={commandsChallenges:t.commandsChallenges,commandsLanguages:R,commandsDifficulty:be,commandsLazyMode:pe,commandsPaceCaret:_e,commandsShowAverage:N,commandsMinWpm:ke,commandsMinAcc:xe,commandsMinBurst:Te,commandsFunbox:I,commandsConfidenceMode:Ne,commandsStopOnError:Qe,commandsLayouts:j,commandsOppositeShiftMode:ae,commandsTags:q};t.getList=function(e){return Xe[e]},M.subscribe(((e,o)=>{var n;"saveToLocalStorage"===e&&(t.defaultCommands.list.filter((e=>"exportSettingsJSON"==e.id))[0].defaultValue=o),"customBackground"===e&&(t.defaultCommands.list.filter((e=>"changeCustomBackground"==e.id))[0].defaultValue=o),"customLayoutFluid"===e&&(t.defaultCommands.list.filter((e=>"changeCustomLayoutfluid"==e.id))[0].defaultValue=null===(n=o)||void 0===n?void 0:n.replace(/#/g," "))}))},9654:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.show=t.isSingleListCommandLineActive=void 0;const s=i(o(743)),r=i(o(6705)),d=r,u=i(o(8911)),l=i(o(2400)),c=i(o(8673)),p=i(o(6350)),f=i(o(3368)),h=i(o(3326)),m=i(o(5705)),g=i(o(9470)),v=i(o(7346)),y=o(6617),b=o(3388);let w=!1,C=!1;function S(){return $("#commandLine").hasClass("allCommands")}function _(){$("#commandLine .suggestions").empty();let e="";const t=l.current[l.current.length-1];$.each(t.list,((o,n)=>{var a;if(n.found&&(void 0===n.available||n.available())){let o=null!==(a=n.icon)&&void 0!==a?a:"fa-chevron-right";o=/^fa-/g.test(o)?`<i class="fas fa-fw ${o}"></i>`:`<div class="textIcon">${o}</div>`,t.configKey&&(o=n.configValueMode&&"include"===n.configValueMode&&r.default[t.configKey].includes(n.configValue)||r.default[t.configKey]===n.configValue?'<i class="fas fa-fw fa-check"></i>':'<i class="fas fa-fw"></i>');let i=`<div class="icon">${o}</div>`;n.noIcon&&!S()&&(i=""),e+=`<div class="entry" command="${n.id}">${i}<div>${n.display}</div></div>`}})),$("#commandLine .suggestions").html(e),0==$("#commandLine .suggestions .entry").length?$("#commandLine .separator").css({height:0,margin:0}):$("#commandLine .separator").css({height:"1px","margin-bottom":".5rem"});const o=$("#commandLine .suggestions .entry");if(o.length>0){$(o[0]).addClass("activeKeyboard");try{$.each(t.list,((e,t)=>!t.found||(/theme/gi.test(t.id)&&"toggleCustomTheme"!==t.id||s.randomTheme||s.clearPreview(),/font/gi.test(t.id)||d.previewFontFamily(r.default.fontFamily),t.hover&&t.hover(),!1)))}catch(e){}}$("#commandLine .listTitle").remove()}function k(){const e=$("#commandLine input").val().toLowerCase().split(" ").filter(((e,t)=>e||0==t)),t=l.current[l.current.length-1];if(""===e[0]&&"on"===r.default.singleListCommandLine&&1===l.current.length)return $.each(t.list,((e,t)=>{t.found=!1})),void _();e[0]&&">"==e[0][0]&&(e[0]=e[0].replace(/^>+/,"")),""==e[0]&&1==e.length?$.each(t.list,((e,t)=>{!1!==t.visible&&(t.found=!0)})):$.each(t.list,((t,o)=>{let n=0;$.each(e,((e,t)=>{if(""==t)return;const a=t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),i=new RegExp("\\b"+a,"g"),s=o.display.toLowerCase().match(i),r=void 0!==o.alias?o.alias.toLowerCase().match(i):null;null!=s&&s.length>0||null!=r&&r.length>0?n++:n--})),n>e.length-1?o.found=!0:o.found=!1})),_()}function x(e=!0){d.previewFontFamily(r.default.fontFamily),s.randomTheme||s.clearPreview(),$("#commandLineWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{$("#commandLineWrapper").addClass("hidden"),$("#commandLine").removeClass("allCommands"),e&&c.focusWords()})),e&&c.focusWords()}function T(e){let o=!1,n=!1,a=!0;const i=l.current[l.current.length-1];let s=!1;$.each(i.list,((i,r)=>{var d;if(r.id==e)if(void 0!==r.shouldFocusTestUI&&(a=r.shouldFocusTestUI),r.input){n=!0;const e=null!==(d=r.display.split("</i>")[1])&&void 0!==d?d:r.display;!function(e,t,o=""){$("#commandLineWrapper").removeClass("hidden"),$("#commandLine").addClass("hidden"),$("#commandInput").removeClass("hidden"),$("#commandInput input").attr("placeholder",t),$("#commandInput input").val(o),$("#commandInput input").trigger("focus"),$("#commandInput input").attr("command",""),$("#commandInput input").attr("command",e),""!=o&&$("#commandInput input").trigger("select")}(r.id,e,r.defaultValue)}else r.subgroup?(o=!0,r.beforeSubgroup&&r.beforeSubgroup(),l.current.push(r.subgroup),(0,t.show)()):(r.exec&&r.exec(),!0===r.sticky&&(s=!0))})),o||n||s||(h.log("usedCommandLine",{command:e}),x(a))}function P(e,t,o="",n){var a,i;let s=t.display.replace(/\s?\.\.\.$/g,""),d='<i class="fas fa-fw"></i>';if(void 0!==t.configValue&&r.default[null==n?void 0:n.configKey]===t.configValue&&(d='<i class="fas fa-fw fa-check"></i>'),t.noIcon&&(d=""),o&&(s=o+" > "+d+s),t.subgroup){const o=t;o.beforeSubgroup&&o.beforeSubgroup();try{null===(i=(null===(a=t)||void 0===a?void 0:a.subgroup).list)||void 0===i||i.forEach((o=>{t.configKey=t.subgroup.configKey,P(e,o,s,t)}))}catch(e){}}else{const a=Object.assign({},t);n&&(a.icon=n.icon),o&&(a.display=s),e.push(a)}}function M(){const e=[],o=t.show;return t.show=()=>{},l.defaultCommands.list.forEach((t=>P(e,t))),t.show=o,{title:"All Commands",list:e}}function O(e=!0){const o=M();l.setCurrent([o]),"manual"!=r.default.singleListCommandLine&&$("#commandLine").addClass("allCommands"),e&&(0,t.show)()}t.isSingleListCommandLineActive=S,t.show=()=>{C=!1,$(".page.pageLoading").hasClass("hidden")&&(u.set(!1),$("#commandLine").removeClass("hidden"),$("#commandInput").addClass("hidden"),$("#commandLineWrapper").hasClass("hidden")&&$("#commandLineWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},100),$("#commandLine input").val(""),l.updateThemeCommands(),k(),$("#commandLine input").trigger("focus"))},$("#commandLine input").keyup((e=>{w=!1,$("#commandLineWrapper #commandLine .suggestions .entry").removeClass("activeMouse"),"ArrowUp"===e.key||"ArrowDown"===e.key||"Enter"===e.key||"Tab"===e.key||"AltLeft"==e.code||e.key.length>1&&"Backspace"!==e.key&&"Delete"!==e.key||k()})),$(document).ready((()=>{$(document).on("keydown",(e=>{if(m.get())return e.preventDefault();if(("Escape"===e.key&&"esc"!==r.default.quickRestart||"Tab"===e.key&&"esc"===r.default.quickRestart)&&!$("#commandLineWrapper").hasClass("hidden"))return l.current.length>1?(l.current.pop(),$("#commandLine").removeClass("allCommands"),(0,t.show)()):x(),void d.setFontFamily(r.default.fontFamily,!0);if("Escape"===e.key&&"esc"!==r.default.quickRestart||"Tab"===e.key&&"esc"===r.default.quickRestart&&!g.hasTab&&!e.shiftKey||"Tab"===e.key&&"esc"===r.default.quickRestart&&g.hasTab&&e.shiftKey||e.key&&"p"===e.key.toLowerCase()&&(e.metaKey||e.ctrlKey)&&e.shiftKey){if((0,b.isAnyPopupVisible)())return;if("esc"===r.default.quickRestart&&"login"===v.get())return;e.preventDefault(),"on"==r.default.singleListCommandLine?O(!1):l.setCurrent([l.defaultCommands]),(0,t.show)()}}))})),$("#commandInput input").on("keydown",(e=>{if("Enter"===e.key){e.preventDefault();const t=$("#commandInput input").attr("command"),o=$("#commandInput input").val(),n=l.current[l.current.length-1];$.each(n.list,((e,n)=>{n.id==t&&n.exec&&n.exec(o)})),h.log("usedCommandLine",{command:null!=t?t:""}),x()}})),$(document).on("mousemove",(()=>{w||(w=!0)})),$(document).on("mouseenter","#commandLineWrapper #commandLine .suggestions .entry",(e=>{w&&$(e.target).addClass("activeMouse")})),$(document).on("mouseleave","#commandLineWrapper #commandLine .suggestions .entry",(e=>{w&&$(e.target).removeClass("activeMouse")})),$("#commandLineWrapper #commandLine .suggestions").on("mouseover",(e=>{if(!w)return;$("#commandLineWrapper #commandLine .suggestions .entry").removeClass("activeKeyboard");const t=$(e.target).attr("command");try{const e=l.current[l.current.length-1];$.each(e.list,((e,o)=>{o.id==t&&(/theme/gi.test(o.id)&&"toggleCustomTheme"!==o.id||s.randomTheme||s.clearPreview(),/font/gi.test(o.id)||d.previewFontFamily(r.default.fontFamily),o.hover&&!C&&o.hover())}))}catch(e){}})),$(document).on("click","#commandLineWrapper #commandLine .suggestions .entry",(e=>{C=!0,$(".suggestions .entry").removeClass("activeKeyboard"),T($(e.currentTarget).attr("command"))})),$("#commandLineWrapper").on("click",(e=>{"commandLineWrapper"===$(e.target).attr("id")&&(x(),d.setFontFamily(r.default.fontFamily,!0))})),$(document).on("keydown",(e=>{var o,n;if(!$("#commandLineWrapper").hasClass("hidden")){if($("#commandLine input").trigger("focus"),">"==e.key&&"manual"==r.default.singleListCommandLine){if(!S())return void O(!1);if(">"==$("#commandLine input").val())return void e.preventDefault()}if("Backspace"!==e.key&&"Delete"!==e.key||setTimeout((()=>{const e=$("#commandLine input").val();"manual"==r.default.singleListCommandLine&&S()&&">"!==e[0]&&function(e=!0){S()&&($("#commandLine").removeClass("allCommands"),l.setCurrent(l.current.filter((e=>"All Commands"!=e.title))),l.current.length<1&&l.setCurrent([l.defaultCommands])),e&&(0,t.show)()}(!1)}),1),"Enter"===e.key)return e.preventDefault(),void T($(".suggestions .entry.activeKeyboard").attr("command"));if("ArrowUp"===e.key||"ArrowDown"===e.key||"Tab"===e.key){e.preventDefault(),$("#commandLineWrapper #commandLine .suggestions .entry").unbind("mouseenter mouseleave");const t=$(".suggestions .entry");let a,i=-1;$.each(t,((e,t)=>{$(t).hasClass("activeKeyboard")&&(i=e)})),("ArrowUp"===e.key||"Tab"===e.key&&e.shiftKey)&&(t.removeClass("activeKeyboard"),0==i?($(t[t.length-1]).addClass("activeKeyboard"),a=$(t[t.length-1]).attr("command")):($(t[--i]).addClass("activeKeyboard"),a=$(t[i]).attr("command"))),("ArrowDown"===e.key||"Tab"===e.key&&!e.shiftKey)&&(t.removeClass("activeKeyboard"),i+1==t.length?($(t[0]).addClass("activeKeyboard"),a=$(t[0]).attr("command")):($(t[++i]).addClass("activeKeyboard"),a=$(t[i]).attr("command")));try{const e=Math.abs((null===(o=$(".suggestions").offset())||void 0===o?void 0:o.top)-(null===(n=$(".entry.activeKeyboard").offset())||void 0===n?void 0:n.top)-$(".suggestions").scrollTop())-$(".suggestions").outerHeight()/2+$($(".entry")[0]).outerHeight();$(".suggestions").scrollTop(e)}catch(e){e instanceof Error&&console.log("could not scroll suggestions: "+e.message)}try{const e=l.current[l.current.length-1];$.each(e.list,((e,t)=>{t.id==a&&(/theme/gi.test(t.id)&&"toggleCustomTheme"!==t.id||s.randomTheme||s.clearPreview(),/font/gi.test(t.id)||d.previewFontFamily(r.default.fontFamily),t.hover&&t.hover())}))}catch(e){}return!1}}})),$(document).on("click","#commandLineMobileButton",(()=>{"on"==r.default.singleListCommandLine?O(!1):l.setCurrent([l.defaultCommands]),(0,t.show)()})),$(document).on("click","#keymap .r5 .keySpace",(()=>{l.setCurrent([l.commandsKeymapLayouts]),(0,t.show)()})),$(document).on("click","#testModesNotice .textButton",(e=>{const o=l.getList($(e.currentTarget).attr("commands"));void 0!==o&&("commandsTags"===$(e.currentTarget).attr("commands")&&l.updateTagCommands(),l.pushCurrent(o),(0,t.show)())})),$(document).on("click","#bottom .leftright .right .current-theme",(e=>{if(e.shiftKey)if(r.default.customTheme)d.setCustomTheme(!1);else{if(null!==y.Auth.currentUser&&p.getSnapshot().customThemes.length<1)return f.add("No custom themes!",0),void d.setCustomTheme(!1);d.setCustomTheme(!0)}else r.default.customTheme&&l.updateCustomThemeListCommands(),l.setCurrent([r.default.customTheme?l.customThemeListCommands:l.themeCommands]),(0,t.show)()})),$(document.body).on("click",".pageAbout .aboutEnableAds",(()=>{l.pushCurrent(l.commandsEnableAds),(0,t.show)()})),$(".supportButtons .button.ads").on("click",(()=>{l.pushCurrent(l.commandsEnableAds),(0,t.show)()}))},2183:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.loadConfig=t.apply=t.getCSS=void 0;const r=i(o(6705)),d=i(o(1446)),u=o(2189),l={blur:{value:0,default:0},brightness:{value:1,default:1},saturate:{value:1,default:1},opacity:{value:1,default:1}};function c(){let e="";return Object.keys(l).forEach((t=>{const o=t;l[o].value!=l[o].default&&(e+=`${t}(${l[o].value}${"blur"==t?"rem":""}) `)})),e}function p(){const e={filter:c(),width:`calc(100% + ${4*l.blur.value}rem)`,height:`calc(100% + ${4*l.blur.value}rem)`,left:`-${2*l.blur.value}rem`,top:`-${2*l.blur.value}rem`,position:"absolute"};$(".customBackground img").css(e)}function f(){$(".section.customBackgroundFilter .blur .value").html(l.blur.value.toFixed(1)),$(".section.customBackgroundFilter .brightness .value").html(l.brightness.value.toFixed(1)),$(".section.customBackgroundFilter .saturate .value").html(l.saturate.value.toFixed(1)),$(".section.customBackgroundFilter .opacity .value").html(l.opacity.value.toFixed(1))}function h(e){l.blur.value=e[0],l.brightness.value=e[1],l.saturate.value=e[2],l.opacity.value=e[3],f(),$(".section.customBackgroundFilter .blur input").val(l.blur.value),$(".section.customBackgroundFilter .brightness input").val(l.brightness.value),$(".section.customBackgroundFilter .saturate input").val(l.saturate.value),$(".section.customBackgroundFilter .opacity input").val(l.opacity.value)}t.getCSS=c,t.apply=p,t.loadConfig=h,$(".section.customBackgroundFilter .blur input").on("input",(()=>{l.blur.value=parseFloat($(".section.customBackgroundFilter .blur input").val()),f(),p()})),$(".section.customBackgroundFilter .brightness input").on("input",(()=>{l.brightness.value=parseFloat($(".section.customBackgroundFilter .brightness input").val()),f(),p()})),$(".section.customBackgroundFilter .saturate input").on("input",(()=>{l.saturate.value=parseFloat($(".section.customBackgroundFilter .saturate input").val()),f(),p()})),$(".section.customBackgroundFilter .opacity input").on("input",(()=>{l.opacity.value=parseFloat($(".section.customBackgroundFilter .opacity input").val()),f(),p()})),$(".section.customBackgroundFilter input").on("input",(()=>{m()}));const m=(0,u.debounce)(2e3,(()=>s(void 0,void 0,void 0,(function*(){const e=Object.keys(l).map((e=>l[e].value));r.setCustomBackgroundFilter(e,!1)}))));d.subscribe(((e,t)=>{"customBackgroundFilter"===e&&(h(t.map((e=>parseFloat(e)))),p())}))},5817:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InputIndicator=void 0,t.InputIndicator=class{constructor(e,t){var o,n;this.inputElement=e,$(this.inputElement).wrap('<div class="inputAndIndicator"></div>'),this.parentElement=$(this.inputElement).parent(".inputAndIndicator"),this.options=t,this.currentStatus=null;let a='<div class="statusIndicator">';for(const[e,i]of Object.entries(t))a+=`\n      <div\n        class="indicator level${i.level} hidden"\n        data-option-id="${e}"\n        \n        ${(null!==(n=null===(o=i.message)||void 0===o?void 0:o.length)&&void 0!==n?n:0)>20?'data-balloon-length="large"':""}\n        data-balloon-pos="up"\n        ${i.message?`aria-label="${i.message}"`:""}\n      >\n        <i class="fas fa-fw ${i.icon} ${i.spinIcon?"fa-spin":""}"></i>\n      </div>\n      `;a+="</div>",this.parentElement.append(a)}hide(){this.parentElement.find(".statusIndicator div").addClass("hidden"),this.currentStatus=null,$(this.inputElement).css("padding-right","0.5rem")}show(e,t){this.hide(),this.currentStatus=e;const o=this.parentElement.find(`[data-option-id="${e}"]`);o.removeClass("hidden"),t&&(t.length>20?o.attr("data-balloon-length","large"):o.removeAttr("data-balloon-length"),o.attr("aria-label",t)),$(this.inputElement).css("padding-right","2.1rem")}get(){return this.currentStatus}}},2148:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.refresh=t.show=t.hide=t.flashKey=t.highlightKey=void 0;const d=r(o(6705)),u=i(o(4203)),l=i(o(210)),c=i(o(1446)),p=i(o(3388));function f(e=d.default.layout){return s(this,void 0,void 0,(function*(){if(e)try{const t=yield p.getLayoutsList();let o=t[e],n=e;"overrideSync"===d.default.keymapLayout?"default"===d.default.layout?(o=t.qwerty,n="default"):(o=t[d.default.layout],n=d.default.layout):(o=t[d.default.keymapLayout],n=d.default.keymapLayout);const a=o.keymapShowTopRow,i="matrix"===d.default.keymapStyle||"split_matrix"===d.default.keymapStyle;let s="";Object.keys(o.keys).forEach(((e,t)=>{const r=o.keys[e];let u="";if("row1"!==e||a){if("row2"!==e&&"row3"!==e&&"row4"!==e||i||(u+="<div></div>"),"row4"!==e||"iso"===o.type||i||(u+="<div></div>"),"row5"===e){const e=n.replace(/_/g," ");let t="";"blank"===d.default.keymapLegendStyle&&(t='style="display: none;"'),u+="<div></div>",u+=`<div class="keymapKey keySpace">\n          <div class="letter" ${t}>${e}</div>\n        </div>`,u+='<div class="keymapSplitSpacer"></div>',u+='<div class="keymapKey keySplitSpace">\n          <div class="letter"></div>\n        </div>'}else for(let t=0;t<r.length;t++){if("row2"===e&&12===t)continue;if(("matrix"===d.default.keymapStyle||"split_matrix"===d.default.keymapStyle)&&t>=10)continue;const n=r[t],a="row3"===e&&(3===t||6===t);let i=n[0],s="";"blank"===d.default.keymapLegendStyle?s='style="display: none;"':"uppercase"===d.default.keymapLegendStyle&&(i=i.toUpperCase());const l=`<div class="keymapKey" data-key="${n.replace('"',"&quot;")}">\n              <span class="letter" ${s}>${i}</span>\n              ${a?"<div class='bump'></div>":""}\n          </div>`;let c="";"split"!==d.default.keymapStyle&&"split_matrix"!==d.default.keymapStyle&&"alice"!==d.default.keymapStyle||("row4"!==e||"split"!==d.default.keymapStyle&&"alice"!==d.default.keymapStyle||"iso"!==o.type?5===t&&(c+='<div class="keymapSplitSpacer"></div>'):6===t&&(c+='<div class="keymapSplitSpacer"></div>')),"alice"===d.default.keymapStyle&&"row4"===e&&("iso"===o.type&&6===t||"iso"!==o.type&&5===t)&&(c+='<div class="extraKey"><span class="letter"></span></div>'),u+=c+l}s+=`<div class="row r${t+1}">${u}</div>`}})),$("#keymap").html(s),$("#keymap").removeClass("staggered"),$("#keymap").removeClass("matrix"),$("#keymap").removeClass("split"),$("#keymap").removeClass("split_matrix"),$("#keymap").removeClass("alice"),$("#keymap").addClass(d.default.keymapStyle)}catch(e){e instanceof Error&&console.log("something went wrong when changing layout, resettings: "+e.message)}}))}t.highlightKey=function(e){if("zen"!==d.default.mode){""===e&&(e=" ");try{let t;null!=$(".activeKey")&&$(".activeKey").removeClass("activeKey"),t=" "==e?"#keymap .keySpace, #keymap .keySplitSpace":'"'==e?`#keymap .keymapKey[data-key*='${e}']`:`#keymap .keymapKey[data-key*="${e}"]`,$(t).addClass("activeKey")}catch(e){e instanceof Error&&console.log("could not update highlighted keymap key: "+e.message)}}},t.flashKey=function(e,t){return s(this,void 0,void 0,(function*(){if(null==e)return;e=" "==e?"#keymap .keySpace, #keymap .keySplitSpace":'"'==e?`#keymap .keymapKey[data-key*='${e}']`:`#keymap .keymapKey[data-key*="${e}"]`;const o=yield u.getAll();try{t||d.default.blindMode?$(e).stop(!0,!0).css({color:o.bg,backgroundColor:o.main,borderColor:o.main}).animate({color:o.sub,backgroundColor:"transparent",borderColor:o.sub},l.get()?0:500,"easeOutExpo"):$(e).stop(!0,!0).css({color:o.bg,backgroundColor:o.error,borderColor:o.error}).animate({color:o.sub,backgroundColor:"transparent",borderColor:o.sub},l.get()?0:500,"easeOutExpo")}catch(e){}}))},t.hide=function(){$("#keymap").addClass("hidden")},t.show=function(){$("#keymap").removeClass("hidden")},t.refresh=f,c.subscribe((e=>{"layout"===e&&"overrideSync"===d.default.keymapLayout&&f(d.default.keymapLayout),"keymapLayout"!==e&&"keymapStyle"!==e||f()}))},7274:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getAcc=t.getWPM=t.update=void 0;const d=i(o(6350)),u=i(o(3388)),l=r(o(6705)),c=i(o(9470));let p=0,f=0;t.update=function(){return s(this,void 0,void 0,(function*(){const e=u.getMode2(l.default,c.randomQuote),[t,o]=(yield d.getUserAverage10(l.default.mode,e,l.default.punctuation,l.default.language,l.default.difficulty,l.default.lazyMode)).map(u.roundTo2).map((e=>l.default.alwaysShowDecimalPlaces?Math.round(e):e));p=t,f=o}))},t.getWPM=function(){return p},t.getAcc=function(){return f}},41:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.show=t.hide=void 0;const d=r(o(7355)),u=i(o(6350)),l=r(o(6705)),c=i(o(3388)),p=i(o(3368)),f=r(o(9546)),h=o(6617),m=r(o(1699)),g=o(7401);let v="allTime",y="english",b={15:[],60:[]},w={15:{},60:{}};const C={15:!1,60:!1};let S;function _(e){15===e?$("#leaderboardsWrapper table.left tbody").empty():60===e&&$("#leaderboardsWrapper table.right tbody").empty()}function k(e){15===e?$("#leaderboardsWrapper table.left tfoot").empty():60===e&&$("#leaderboardsWrapper table.right tfoot").empty()}function x(){if("daily"===v){const e=new Date;e.setUTCHours(0,0,0,0),e.setDate(e.getDate()+1);const t=new Date;t.setUTCMilliseconds(0);const o=(0,m.default)(e,t);$("#leaderboards .subTitle").text("Next reset in: "+c.secondsToString(o,!0))}else{const e=new Date,t=60*(14-e.getMinutes()%15)+(60-e.getSeconds());$("#leaderboards .subTitle").text("Next update in: "+c.secondsToString(t,!0))}}function T(e){15===e?$("#leaderboardsWrapper .leftTableLoader").removeClass("hidden"):60===e&&$("#leaderboardsWrapper .rightTableLoader").removeClass("hidden")}function P(e){15===e?$("#leaderboardsWrapper .leftTableLoader").addClass("hidden"):60===e&&$("#leaderboardsWrapper .rightTableLoader").addClass("hidden")}function M(e,t){var o;return s(this,void 0,void 0,(function*(){if(!b[e])return;let n;n=15===e?"left":"right",0===b[e].length&&$(`#leaderboardsWrapper table.${n} tbody`).html("<tr><td colspan='7'>No results found</td></tr>");const a=null===(o=u.getSnapshot())||void 0===o?void 0:o.name,i=u.getSnapshot(),s=b[e].map((e=>{const t=h.Auth.currentUser&&e.uid===h.Auth.currentUser.uid&&i.discordAvatar&&i.discordId,o=e.discordAvatar&&e.discordId,n=t&&i||o&&e||{};return c.getDiscordAvatarUrl(n.discordId,n.discordAvatar)})),r=(yield Promise.allSettled(s)).map((e=>"fulfilled"===e.status?e.value:null));let d=b[e].length-50,p=b[e].length;d<0&&(d=0),t&&(d=0,p=t);let m="";for(let t=d;t<p;t++){const o=b[e][t];if(!o)break;if(o.hidden)return;let n="";o.name==a&&(n=' class="me"');const i=new Date(o.timestamp);"daily"!==v||o.rank||(o.rank=t+1);let s='<div class="avatarPlaceholder"><i class="fas fa-user-circle"></i></div>';const d=r[t];null!==d&&(s=`<div class="avatar" style="background-image:url(${d})"></div>`),m+=`\n    <tr ${n}>\n    <td>${1===o.rank?'<i class="fas fa-fw fa-crown"></i>':o.rank}</td>\n    <td>\n    <div class="avatarNameBadge">${s}\n      <span class="entryName" uid=${o.uid}>${o.name}</span>\n      ${o.badgeId?(0,g.getHTMLById)(o.badgeId):""}\n    </div>\n    </td>\n    <td class="alignRight">${(l.default.alwaysShowCPM?5*o.wpm:o.wpm).toFixed(2)}<br><div class="sub">${o.acc.toFixed(2)}%</div></td>\n    <td class="alignRight">${(l.default.alwaysShowCPM?5*o.raw:o.raw).toFixed(2)}<br><div class="sub">${o.consistency&&"-"!==o.consistency?o.consistency.toFixed(2)+"%":"-"}</div></td>\n    <td class="alignRight">${(0,f.default)(i,"dd MMM yyyy")}<br>\n    <div class='sub'>${(0,f.default)(i,"HH:mm")}</div></td>\n  </tr>\n  `}t?$(`#leaderboardsWrapper table.${n} tbody`).prepend(m):$(`#leaderboardsWrapper table.${n} tbody`).append(m)}))}const O=$("#leaderboardsWrapper .showYesterdayButton");function L(){$("#leaderboardsWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{_(15),_(60),k(15),k(60),b={15:[],60:[]},w={15:{},60:{}},clearInterval(S),S=void 0,$("#leaderboards .subTitle").text("-"),O.removeClass("active"),$("#leaderboardsWrapper").addClass("hidden")}))}function W(){const e=$("#leaderboardsWrapper .mainTitle"),t="daily"===v?"Daily":"All-Time",o=y.charAt(0).toUpperCase()+y.slice(1);e.text(`${t} ${o} Leaderboards`)}function A(){const e="daily"===v;return{isDaily:e,daysBefore:e&&O.hasClass("active")?1:0}}function B(){return s(this,void 0,void 0,(function*(){D=!1,q=!1,T(15),T(60);const e=["15","60"],t=e.map((e=>d.default.leaderboards.get(Object.assign({language:y,mode:"time",mode2:e},A()))));h.Auth.currentUser&&t.push(...e.map((e=>d.default.leaderboards.getRank(Object.assign({language:y,mode:"time",mode2:e},A())))));const o=yield Promise.all(t),n=o.find((e=>200!==e.status));if(n)return P(15),P(60),p.add("Failed to load leaderboards: "+n.message,-1);const[a,i,s,r]=o.map((e=>e.data));b[15]=a,b[60]=i,w[15]=s,w[60]=r,[15,60].forEach((e=>{P(e),_(e),function(e){var t,o;let n,a;if(n=15===e?"left":"right",h.Auth.currentUser)if("localhost"!==window.location.hostname&&(null!==(o=null===(t=u.getSnapshot().typingStats)||void 0===t?void 0:t.timeTyping)&&void 0!==o?o:0)<7200)$(`#leaderboardsWrapper table.${n} tfoot`).html('\n    <tr>\n      <td colspan="6" style="text-align:center;">Your account must have 2 hours typed to be placed on the leaderboard.</>\n    </tr>\n    ');else{if($(`#leaderboardsWrapper table.${n} tfoot`).html('\n    <tr>\n      <td colspan="6" style="text-align:center;">Not qualified</>\n    </tr>\n    '),"allTime"===v&&w[e]){const t=c.roundTo2(w[e].rank/w[e].count*100);a=1==w[e].rank?"GOAT":`Top ${t}%`,a=`<br><span class="sub">${a}</span>`}if(w[e]){const t=w[e],o=new Date(t.timestamp);$(`#leaderboardsWrapper table.${n} tfoot`).html(`\n    <tr>\n    <td>${t.rank}</td>\n    <td><span class="top">You</span>${a||""}</td>\n    <td class="alignRight">${(l.default.alwaysShowCPM?5*t.wpm:t.wpm).toFixed(2)}<br><div class="sub">${t.acc.toFixed(2)}%</div></td>\n    <td class="alignRight">${(l.default.alwaysShowCPM?5*t.raw:t.raw).toFixed(2)}<br><div class="sub">${t.consistency&&"-"!==t.consistency?t.consistency.toFixed(2)+"%":"-"}</div></td>\n    <td class="alignRight">${(0,f.default)(o,"dd MMM yyyy")}<br>\n    <div class='sub'>${(0,f.default)(o,"HH:mm")}</div></td>\n  </tr>\n  `)}}else $(`#leaderboardsWrapper table.${n} tfoot`).html('\n    <tr>\n      <td colspan="6" style="text-align:center;"></>\n    </tr>\n    ')}(e),function(e){var t,o,n,a,i;if("daily"===v)return;let s;s=15===e?"left":"right";const r=null!==(i=null===(a=null===(n=null===(o=null===(t=u.getSnapshot())||void 0===t?void 0:t.lbMemory)||void 0===o?void 0:o.time)||void 0===n?void 0:n[e])||void 0===a?void 0:a.english)&&void 0!==i?i:0;if(w[e]){const t=r-w[e].rank;t>0?(u.updateLbMemory("time",e,"english",w[e].rank,!0),0!==r&&$(`#leaderboardsWrapper table.${s} tfoot tr td .top`).append(` (<i class="fas fa-fw fa-angle-up"></i>${Math.abs(t)} since you last checked)`)):t<0?(u.updateLbMemory("time",e,"english",w[e].rank,!0),0!==r&&$(`#leaderboardsWrapper table.${s} tfoot tr td .top`).append(` (<i class="fas fa-fw fa-angle-down"></i>${Math.abs(t)} since you last checked)`)):0!==r&&$(`#leaderboardsWrapper table.${s} tfoot tr td .top`).append(" ( = since you last checked)")}}(e),M(e)})),$("#leaderboardsWrapper .leftTableWrapper").removeClass("invisible"),$("#leaderboardsWrapper .rightTableWrapper").removeClass("invisible"),W(),O.addClass("hidden"),"daily"===v&&O.removeClass("hidden"),$("#leaderboardsWrapper .buttons .button").removeClass("active"),$("#leaderboardsWrapper .buttonGroup.timeRange .button."+v).addClass("active"),$("#leaderboardsWrapper #leaderboards .leftTableWrapper").scrollTop(0),$("#leaderboardsWrapper #leaderboards .rightTableWrapper").scrollTop(0),D=!0,q=!0}))}function E(e,t=!1){return s(this,void 0,void 0,(function*(){if(t&&1===b[e][0].rank)return;if(C[e])return;C[e]=!0,T(e);let o,n=b[e][b[e].length-1].rank;t&&(n=b[e][0].rank-50),n<0&&(o=Math.abs(n)-1,n=0);const a=yield d.default.leaderboards.get(Object.assign({language:y,mode:"time",mode2:e.toString(),skip:n,limit:o},A())),i=a.data;200===a.status&&0!==i.length?(t?b[e].unshift(...i):b[e].push(...i),t&&!o&&(o=49),yield M(e,o),P(e),C[e]=!1):P(e)}))}function j(e,t){return s(this,void 0,void 0,(function*(){T(e);const o=yield d.default.leaderboards.get(Object.assign({language:y,mode:"time",mode2:e.toString(),skip:t},A())),n=o.data;503!==o.status?(_(e),b[e]=[],200===o.status&&0!==n.length?(b[e]=n,yield M(e),P(e)):P(e)):p.add("Leaderboards are currently updating - please try again later",-1)}))}function R(){$("#leaderboardsWrapper").hasClass("hidden")&&(h.Auth.currentUser?($("#leaderboardsWrapper #leaderboards .rightTableJumpToMe").removeClass("disabled"),$("#leaderboardsWrapper #leaderboards .leftTableJumpToMe").removeClass("disabled")):($("#leaderboardsWrapper #leaderboards .rightTableJumpToMe").addClass("disabled"),$("#leaderboardsWrapper #leaderboards .leftTableJumpToMe").addClass("disabled")),l.default.alwaysShowCPM?$("#leaderboards table thead tr td:nth-child(3)").html('cpm<br><div class="sub">accuracy</div>'):$("#leaderboards table thead tr td:nth-child(3)").html('wpm<br><div class="sub">accuracy</div>'),$("#leaderboardsWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},125,(()=>{B(),x(),S=setInterval((()=>{x()}),1e3)})))}t.hide=L,t.show=R,$("#leaderboardsWrapper").on("click",(e=>{"leaderboardsWrapper"===$(e.target).attr("id")&&L()}));const I=$("#leaderboardsWrapper #leaderboards .leaderboardsTop .buttonGroup.timeRange .languageSelect").select2({placeholder:"select a language",width:"100%",data:[{id:"english",text:"english",selected:!0},{id:"spanish",text:"spanish"},{id:"german",text:"german"},{id:"portuguese",text:"portuguese"},{id:"indonesian",text:"indonesian"},{id:"italian",text:"italian"}]});I.on("select2:select",(e=>{y=e.params.data.id,W(),B()}));let D=!0;$("#leaderboardsWrapper #leaderboards .leftTableWrapper").scroll((e=>{if(!D)return;const t=$(e.currentTarget);Math.round(t.scrollTop())<=50&&E(15,!0)})),$("#leaderboardsWrapper #leaderboards .leftTableWrapper").scroll((e=>{if(!D)return;const t=$(e.currentTarget);Math.round(t[0].scrollHeight-t.scrollTop())<=Math.round(t.outerHeight())+50&&E(15)}));let q=!0;$("#leaderboardsWrapper #leaderboards .rightTableWrapper").scroll((e=>{if(!q)return;const t=$(e.currentTarget);Math.round(t.scrollTop())<=50&&E(60,!0)})),$("#leaderboardsWrapper #leaderboards .rightTableWrapper").scroll((e=>{const t=$(e.currentTarget);Math.round(t[0].scrollHeight-t.scrollTop())<=Math.round(t.outerHeight()+50)&&E(60)})),$("#leaderboardsWrapper #leaderboards .leftTableJumpToTop").on("click",(()=>s(void 0,void 0,void 0,(function*(){D=!1,$("#leaderboardsWrapper #leaderboards .leftTableWrapper").scrollTop(0),yield j(15,0),D=!0})))),$("#leaderboardsWrapper #leaderboards .leftTableJumpToMe").on("click",(()=>s(void 0,void 0,void 0,(function*(){var e;if(!(null===(e=w[15])||void 0===e?void 0:e.rank))return;D=!1,yield j(15,w[15].rank-25);const t=$("#leaderboardsWrapper #leaderboards .leftTableWrapper table tbody td").outerHeight();$("#leaderboardsWrapper #leaderboards .leftTableWrapper").animate({scrollTop:t*Math.min(w[15].rank,25)-$("#leaderboardsWrapper #leaderboards .leftTableWrapper").outerHeight()/2.25},0,(()=>{D=!0}))})))),$("#leaderboardsWrapper #leaderboards .rightTableJumpToTop").on("click",(()=>s(void 0,void 0,void 0,(function*(){q=!1,$("#leaderboardsWrapper #leaderboards .rightTableWrapper").scrollTop(0),yield j(60,0),q=!0})))),$("#leaderboardsWrapper #leaderboards .rightTableJumpToMe").on("click",(()=>s(void 0,void 0,void 0,(function*(){var e;if(!(null===(e=w[60])||void 0===e?void 0:e.rank))return;D=!1,yield j(60,w[60].rank-25);const t=$("#leaderboardsWrapper #leaderboards .rightTableWrapper table tbody td").outerHeight();$("#leaderboardsWrapper #leaderboards .rightTableWrapper").animate({scrollTop:t*Math.min(w[60].rank,25)-$("#leaderboardsWrapper #leaderboards .rightTableWrapper").outerHeight()/2.25},0,(()=>{D=!0}))})))),$("#leaderboardsWrapper #leaderboards .leaderboardsTop .buttonGroup.timeRange .allTime").on("click",(()=>{v="allTime",y="english",I.prop("disabled",!0),I.val("english"),I.trigger("change"),B()})),$("#leaderboardsWrapper #leaderboards .leaderboardsTop .buttonGroup.timeRange .daily").on("click",(()=>{v="daily",O.removeClass("active"),I.prop("disabled",!1),B()})),$("#leaderboardsWrapper .showYesterdayButton").on("click",(()=>{O.toggleClass("active"),B()})),$(document).on("keydown",(e=>{"Escape"!==e.key||$("#leaderboardsWrapper").hasClass("hidden")||(L(),e.preventDefault())})),$(document).on("click","#top #menu .textButton",(e=>($(e.currentTarget).hasClass("leaderboards")&&R(),!1))),$(document).on("keypress","#top #menu .textButton",(e=>{"Enter"===e.key&&$(e.currentTarget).trigger("click")}))},9817:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=void 0,t.show=function(){$("#backgroundLoader").stop(!0,!0).fadeIn(125)},t.hide=function(){$("#backgroundLoader").stop(!0,!0).fadeOut(125)}},2453:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.update=void 0;const d=i(o(5886)),u=i(o(1322)),l=i(o(6350)),c=i(o(7274)),p=r(o(6705)),f=i(o(9470)),h=i(o(1446)),m=o(6617);function g(){var e,t,o;return s(this,void 0,void 0,(function*(){let n=!1;if(""===$(".pageTest #testModesNotice").text()&&(n=!0),$(".pageTest #testModesNotice").empty(),u.isRepeated&&"quote"!==p.default.mode&&$(".pageTest #testModesNotice").append('<div class="textButton restart" style="color:var(--error-color);"><i class="fas fa-sync-alt"></i>repeated</div>'),f.hasTab&&("esc"===p.default.quickRestart?$(".pageTest #testModesNotice").append('<div class="textButton"><i class="fas fa-long-arrow-alt-right"></i>shift + tab to open commandline</div>'):$(".pageTest #testModesNotice").append('<div class="textButton"><i class="fas fa-long-arrow-alt-right"></i>shift + tab to restart</div>')),u.activeChallenge&&$(".pageTest #testModesNotice").append(`<div class="textButton" commands="commandsChallenges"><i class="fas fa-award"></i>${u.activeChallenge.display}</div>`),"zen"===p.default.mode&&$(".pageTest #testModesNotice").append('<div class="textButton"><i class="fas fa-poll"></i>shift + enter to finish zen </div>'),$(".pageTest #testModesNotice").append(`<div class="textButton" commands="commandsLanguages"><i class="fas fa-globe-americas"></i>${p.default.language.replace(/_/g," ")}</div>`),"expert"===p.default.difficulty?$(".pageTest #testModesNotice").append('<div class="textButton" commands="commandsDifficulty"><i class="fas fa-star-half-alt"></i>expert</div>'):"master"===p.default.difficulty&&$(".pageTest #testModesNotice").append('<div class="textButton" commands="commandsDifficulty"><i class="fas fa-star"></i>master</div>'),p.default.blindMode&&$(".pageTest #testModesNotice").append('<div class="textButton blind"><i class="fas fa-eye-slash"></i>blind</div>'),p.default.lazyMode&&$(".pageTest #testModesNotice").append('<div class="textButton" commands="commandsLazyMode"><i class="fas fa-couch"></i>lazy</div>'),"off"!==p.default.paceCaret||p.default.repeatedPace&&u.isPaceRepeat){let o="";try{o=` (${Math.round(null!==(t=null===(e=d.settings)||void 0===e?void 0:e.wpm)&&void 0!==t?t:0)} wpm)`}catch(e){}$(".pageTest #testModesNotice").append(`<div class="textButton" commands="commandsPaceCaret"><i class="fas fa-tachometer-alt"></i>${"average"===p.default.paceCaret?"average":"pb"===p.default.paceCaret?"pb":"last"===p.default.paceCaret?"last":"custom"} pace${o}</div>`)}if("off"!==p.default.showAverage){let e=c.getWPM(),t=c.getAcc();if(p.default.alwaysShowDecimalPlaces||(e=Math.round(e),t=Math.round(t)),m.Auth.currentUser&&e>0){const o=`${["wpm","both"].includes(p.default.showAverage)?p.default.alwaysShowCPM?`${Math.round(5*e)} cpm`:`${e} wpm`:""} ${["acc","both"].includes(p.default.showAverage)?`${t}% acc`:""}`.trim();$(".pageTest #testModesNotice").append(`<div class="textButton" commands="commandsShowAverage"><i class="fas fa-chart-bar"></i>avg: ${o}</div>`)}}"off"!==p.default.minWpm&&$(".pageTest #testModesNotice").append(`<div class="textButton" commands="commandsMinWpm"><i class="fas fa-bomb"></i>min ${p.default.minWpmCustomSpeed} wpm</div>`),"off"!==p.default.minAcc&&$(".pageTest #testModesNotice").append(`<div class="textButton" commands="commandsMinAcc"><i class="fas fa-bomb"></i>min ${p.default.minAccCustom}% acc</div>`),"off"!==p.default.minBurst&&$(".pageTest #testModesNotice").append(`<div class="textButton" commands="commandsMinBurst"><i class="fas fa-bomb"></i>min ${p.default.minBurstCustomSpeed} burst ${"flex"===p.default.minBurst?"(flex)":""}</div>`),"none"!==p.default.funbox&&$(".pageTest #testModesNotice").append(`<div class="textButton" commands="commandsFunbox"><i class="fas fa-gamepad"></i>${p.default.funbox.replace(/_/g," ")}</div>`),"on"===p.default.confidenceMode&&$(".pageTest #testModesNotice").append('<div class="textButton" commands="commandsConfidenceMode"><i class="fas fa-backspace"></i>confidence</div>'),"max"===p.default.confidenceMode&&$(".pageTest #testModesNotice").append('<div class="textButton" commands="commandsConfidenceMode"><i class="fas fa-backspace"></i>max confidence</div>'),"off"!=p.default.stopOnError&&$(".pageTest #testModesNotice").append(`<div class="textButton" commands="commandsStopOnError"><i class="fas fa-hand-paper"></i>stop on ${p.default.stopOnError}</div>`),"default"!==p.default.layout&&$(".pageTest #testModesNotice").append(`<div class="textButton" commands="commandsLayouts"><i class="fas fa-keyboard"></i>emulating ${p.default.layout.replace(/_/g," ")}</div>`),"off"!==p.default.oppositeShiftMode&&$(".pageTest #testModesNotice").append(`<div class="textButton" commands="commandsOppositeShiftMode"><i class="fas fa-exchange-alt"></i>opposite shift${"keymap"===p.default.oppositeShiftMode?" (keymap)":""}</div>`);let a="";try{null===(o=l.getSnapshot().tags)||void 0===o||o.forEach((e=>{!0===e.active&&(a+=e.display+", ")})),""!==a&&$(".pageTest #testModesNotice").append(`<div class="textButton" commands="commandsTags"><i class="fas fa-tag"></i>${a.substring(0,a.length-2)}</div>`)}catch(e){}n&&$(".pageTest #testModesNotice").css("transition","none").css("opacity",0).animate({opacity:1},125,(()=>{$(".pageTest #testModesNotice").css("transition",".125s")}))}))}h.subscribe((e=>{["difficulty","blindMode","stopOnError","paceCaret","minWpm","minAcc","minBurst","confidenceMode","layout","showAverage","alwaysShowCPM"].includes(e)&&g()})),t.update=g},6578:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.addPower=t.reset=t.init=void 0;const d=i(o(4203)),u=i(o(210)),l=r(o(6705)),c={particles:[],rendering:!1},p=1500,f=[6,3];function h(e,t,o){return{x:e,y:t,color:o,alpha:1,prev:{x:e,y:t},vel:{x:p-Math.random()*p*2,y:p-Math.random()*p*2}}}function m(e){c.canvas&&c.deltaTime&&(e.prev.x=e.x,e.prev.y=e.y,e.x+=e.vel.x*c.deltaTime,e.y+=e.vel.y*c.deltaTime,e.x>c.canvas.width?(e.vel.x*=-.3,e.x=c.canvas.width-.3*(e.x-c.canvas.width)):e.x<0&&(e.vel.x*=-.3,e.x*=-.3),e.y>c.canvas.height?(e.vel.y*=-.3,e.y=c.canvas.height-.3*(e.y-c.canvas.height)):e.y<0&&(e.vel.y*=-1,e.y*=-1),e.vel.y+=1e3*c.deltaTime,e.vel.x*=1-.05*c.deltaTime,e.alpha*=1-.6*c.deltaTime)}function g(){if(!c.lastFrame||!c.context2d||!c.canvas)return;c.rendering=!0;const e=Date.now();c.deltaTime=(e-c.lastFrame)/1e3,c.lastFrame=e,c.context2d.clearRect(0,0,c.canvas.width,c.canvas.height);const t=[];for(let e=0;e<c.particles.length;e++){const o=c.particles[e];o.alpha<.1||(m(o),c.context2d.globalAlpha=o.alpha,c.context2d.strokeStyle=o.color,c.context2d.lineWidth=4,c.context2d.beginPath(),c.context2d.moveTo(Math.round(o.prev.x),Math.round(o.prev.y)),c.context2d.lineTo(Math.round(o.x),Math.round(o.y)),c.context2d.stroke(),t.push(o))}c.particles=t,c.particles.length&&!u.get()?requestAnimationFrame(g):(c.context2d.clearRect(0,0,c.canvas.width,c.canvas.height),c.rendering=!1)}function v(e=!1){if(!c.resetTimeOut)return;delete c.resetTimeOut,clearTimeout(c.resetTimeOut);const t=$(document.body);t.css("transition","all .25s, transform 0.8s"),t.css("transform","translate(0,0)"),setTimeout((()=>{t.css("transition","all .25s, transform .05s"),$("html").css("overflow","inherit"),$("html").css("overflow-y","scroll")}),e?0:1e3)}t.init=function(){c.caret=$("#caret"),c.canvas=function(){const e=document.createElement("canvas");return e.style.cssText="position:fixed;top:0;left:0;pointer-events:none;z-index:999999",e.height=window.innerHeight,e.width=window.innerWidth,window.addEventListener("resize",(()=>{e.height=window.innerHeight,e.width=window.innerWidth})),document.body.appendChild(e),e}(),c.context2d=c.canvas.getContext("2d")},t.reset=v,t.addPower=function(e=!0,t=!1){var o,n,a,i,r;return s(this,void 0,void 0,(function*(){if("off"===l.default.monkeyPowerLevel||u.get())return;if(["3","4"].includes(l.default.monkeyPowerLevel)){$("html").css("overflow","hidden");const e=[Math.round(10-10*Math.random()),Math.round(10-10*Math.random())];$(document.body).css("transform",`translate(${e[0]}px, ${e[1]}px)`),c.resetTimeOut&&clearTimeout(c.resetTimeOut),c.resetTimeOut=setTimeout(v,2e3)}const s=null===(o=c.caret)||void 0===o?void 0:o.offset(),p=[null!==(n=null==s?void 0:s.left)&&void 0!==n?n:0,(null!==(a=null==s?void 0:s.top)&&void 0!==a?a:0)+(null!==(r=null===(i=c.caret)||void 0===i?void 0:i.height())&&void 0!==r?r:0)];for(let o=Math.round((f[0]+Math.random()*f[1])*(t?2:1));o>0;o--){const t=["2","4"].includes(l.default.monkeyPowerLevel)?`#${Math.floor(256*Math.random()).toString(16)}${Math.floor(256*Math.random()).toString(16)}${Math.floor(256*Math.random()).toString(16)}`:e?yield d.get("caret"):yield d.get("error");c.particles.push(h(...p,t))}c.rendering||(c.lastFrame=Date.now(),g())}))}},3368:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.addBanner=t.add=void 0;const s=o(2189),r=i(o(3388));function d(){console.log("updating margin");const e=$("#bannerCenter").height();$("#centerContent").css("padding-top",e+r.convertRemToPixels(2)+"px"),$("#notificationCenter").css("margin-top",e+"px")}let u=0;class l{constructor(e,t,o,n,a,i,s=(()=>{}),d){this.type=e,this.message=d?t:r.escapeHTML(t),this.level=o,this.duration="banner"===e?n:null==n?-1===o?0:3e3:1e3*n,this.customTitle=a,this.customIcon=i,this.id=u++,this.closeCallback=s}show(){let e="notice",t='<i class="fas fa-fw fa-exclamation"></i>',o="Notice";if(1===this.level?(e="good",t='<i class="fas fa-fw fa-check"></i>',o="Success"):-1===this.level&&(e="bad",t='<i class="fas fa-fw fa-times"></i>',o="Error",console.error(this.message)),null!=this.customTitle&&(o=this.customTitle),"banner"===this.type&&(t='<i class="fas fa-fw fa-bullhorn"></i>'),null!=this.customIcon&&(t=`<i class="fas fa-fw fa-${this.customIcon}"></i>`),"notification"===this.type){const n=$("#notificationCenter .history").height();$("#notificationCenter .history").prepend(`\n          \n          <div class="notif ${e}" id=${this.id}>\n              <div class="icon">${t}</div>\n              <div class="message"><div class="title">${o}</div>${this.message}</div>\n          </div>     \n\n          `);const a=$("#notificationCenter .history").height();$(`#notificationCenter .notif[id='${this.id}']`).remove(),$("#notificationCenter .history").css("margin-top",0).animate({marginTop:a-n},125,(()=>{$("#notificationCenter .history").css("margin-top",0),$("#notificationCenter .history").prepend(`\n          \n                  <div class="notif ${e}" id=${this.id}>\n                      <div class="icon">${t}</div>\n                      <div class="message"><div class="title">${o}</div>${this.message}</div>\n                  </div>     \n\n              `),$(`#notificationCenter .notif[id='${this.id}']`).css("opacity",0).animate({opacity:1},125,(()=>{$(`#notificationCenter .notif[id='${this.id}']`).css("opacity","")})),$(`#notificationCenter .notif[id='${this.id}']`).on("click",(()=>{this.hide(),this.closeCallback()}))})),$(`#notificationCenter .notif[id='${this.id}']`).hover((()=>{$(`#notificationCenter .notif[id='${this.id}']`).toggleClass("hover")}))}else if("banner"===this.type){let o=`<div class="icon lefticon">${t}</div>`;/^images\/.*/.test(this.customIcon)&&(o=`<div class="image" style="background-image: url(${this.customIcon})"></div>`),$("#bannerCenter").prepend(`\n        <div class="banner ${e}" id="${this.id}">\n        <div class="container">\n          ${o}\n          <div class="text">\n            ${this.message}\n          </div>\n          ${this.duration>=0?'\n          <div class="closeButton">\n            <i class="fas fa-fw fa-times"></i>\n          </div>\n          ':`<div class="righticon">${t}</div>`}\n        </div>\n      </div>\n      `),d(),this.duration>=0&&$(`#bannerCenter .banner[id='${this.id}'] .closeButton`).on("click",(()=>{this.hide(),this.closeCallback()}))}this.duration>0&&setTimeout((()=>{this.hide()}),this.duration+250)}hide(){"notification"===this.type?$(`#notificationCenter .notif[id='${this.id}']`).css("opacity",1).animate({opacity:0},125,(()=>{$(`#notificationCenter .notif[id='${this.id}']`).animate({height:0},125,(()=>{$(`#notificationCenter .notif[id='${this.id}']`).remove()}))})):"banner"===this.type&&$(`#bannerCenter .banner[id='${this.id}']`).css("opacity",1).animate({opacity:0},125,(()=>{$(`#bannerCenter .banner[id='${this.id}']`).remove(),d()}))}}t.add=function(e,t=0,o,n,a,i,s){new l("notification",e,t,o,n,a,i,s).show()},t.addBanner=function(e,t=-1,o="bullhorn",n=!1,a,i){new l("banner",e,t,n?-1:0,void 0,o,a,i).show()};const c=(0,s.debounce)(100,d);$(window).on("resize",(()=>{c()}))},7686:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.updateNameFontSize=t.update=void 0;const d=i(o(6350)),u=r(o(9546)),l=r(o(4673)),c=i(o(3388)),p=o(7401),f=o(2189),h=i(o(8281)),m=i(o(7346));function g(e,t){var o,n,a,i,r,d,f,h,m,g,y,b,w,C,S,_,k,x,T,P,M,O;return s(this,void 0,void 0,(function*(){const s=e.charAt(0).toUpperCase()+e.slice(1),L=$(`.page${s} .profile .details`),W=!0===t.banned;if(!(L&&t&&t.name&&t.addedAt))return;if(L.find(".placeholderAvatar").removeClass("hidden"),t.discordAvatar&&t.discordId&&!W){const e=yield c.getDiscordAvatarUrl(t.discordId,t.discordAvatar,256);e&&(L.find(".placeholderAvatar").addClass("hidden"),L.find(".avatar").css("background-image",`url(${e})`))}if((null===(o=t.inventory)||void 0===o?void 0:o.badges)&&!W){let e="",o="";for(const n of t.inventory.badges)!0===n.selected?e=(0,p.getHTMLById)(n.id):o+=(0,p.getHTMLById)(n.id,!0);L.find(".badges").empty().append(e),L.find(".allBadges").empty().append(o)}L.find(".name").text(t.name),W&&L.find(".name").append('<div class="bannedIcon" aria-label="This account is banned" data-balloon-pos="up"><i class="fas fa-gavel"></i></div>'),v(e);const A="Joined "+(0,u.default)(null!==(n=t.addedAt)&&void 0!==n?n:0,"dd MMM yyyy"),B=new Date(t.addedAt),E=(0,l.default)(new Date,B),j=`${E} day${1!=E?"s":""} ago`;L.find(".joined").text(A).attr("aria-label",j);const R=L.find(".typingStats");R.find(".started .value").text(null!==(i=null===(a=t.typingStats)||void 0===a?void 0:a.startedTests)&&void 0!==i?i:0),R.find(".completed .value").text(null!==(d=null===(r=t.typingStats)||void 0===r?void 0:r.completedTests)&&void 0!==d?d:0),R.find(".timeTyping .value").text(c.secondsToString(Math.round(null!==(h=null===(f=t.typingStats)||void 0===f?void 0:f.timeTyping)&&void 0!==h?h:0),!0,!0));let I=!1,D=!1,q=!1;if(!W&&(I=!!(null===(m=t.details)||void 0===m?void 0:m.bio),L.find(".bio .value").text(null!==(y=null===(g=t.details)||void 0===g?void 0:g.bio)&&void 0!==y?y:""),D=!!(null===(b=t.details)||void 0===b?void 0:b.keyboard),L.find(".keyboard .value").text(null!==(C=null===(w=t.details)||void 0===w?void 0:w.keyboard)&&void 0!==C?C:""),(null===(S=t.details)||void 0===S?void 0:S.socialProfiles.github)||(null===(_=t.details)||void 0===_?void 0:_.socialProfiles.twitter)||(null===(k=t.details)||void 0===k?void 0:k.socialProfiles.website))){q=!0;const e=L.find(".socials .value");e.empty();const o=null===(x=t.details)||void 0===x?void 0:x.socialProfiles.github;o&&e.append(`<a href='https://github.com/${o}/' target="_blank" aria-label="${o}" data-balloon-pos="up"><i class="fab fa-fw fa-github"></i></a>`);const n=null===(T=t.details)||void 0===T?void 0:T.socialProfiles.twitter;n&&e.append(`<a href='https://twitter.com/${n}' target="_blank" aria-label="${n}" data-balloon-pos="up"><i class="fab fa-fw fa-twitter"></i></a>`);const a=null===(P=t.details)||void 0===P?void 0:P.socialProfiles.website,i=/^https?:\/\/(?:www\.)?([^/]+)/,s=null!==(O=null===(M=null==a?void 0:a.match(i))||void 0===M?void 0:M[1])&&void 0!==O?O:a;a&&e.append(`<a href='${a}' target="_blank" aria-label="${s}" data-balloon-pos="up"><i class="fas fa-fw fa-globe"></i></a>`)}const F=I||D;I?L.find(".bio").removeClass("hidden"):L.find(".bio").addClass("hidden"),D?L.find(".keyboard").removeClass("hidden"):L.find(".keyboard").addClass("hidden"),F?(L.find(".bioAndKeyboard").removeClass("hidden"),L.find(".sep2").removeClass("hidden")):(L.find(".bioAndKeyboard").addClass("hidden"),L.find(".sep2").addClass("hidden")),q?(L.find(".socials").removeClass("hidden"),L.find(".sep3").removeClass("hidden")):(L.find(".socials").addClass("hidden"),L.find(".sep3").addClass("hidden")),L.removeClass("none"),L.removeClass("bioAndKey"),L.removeClass("soc"),L.removeClass("both"),q||F?q&&!F?L.addClass("soc"):!q&&F?L.addClass("bioAndKey"):q&&F&&L.addClass("both"):L.addClass("none")}))}function v(e){var t,o;let n;if("account"===e?n=$(".pageAccount .profile .details"):"profile"===e&&(n=$(".pageProfile .profile .details")),!n)return;const a=n.find(".name"),i=a.parent(),s=c.convertRemToPixels(2);let r,d,u=15;do{u+=1,a.css("font-size",u),r=null!==(t=a.width())&&void 0!==t?t:0,d=null!==(o=i.width())&&void 0!==o?o:0}while(r<d-10&&u<s)}t.update=g,t.updateNameFontSize=v,$(".details .editProfileButton").on("click",(()=>{h.show((()=>{g("account",d.getSnapshot())}))}));const y=(0,f.throttle)(250,(()=>{const e=m.get();e&&["account","profile"].includes(e)&&v(e)}));$(window).on("resize",(()=>{y()}))},2709:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.show=void 0;const d=r(o(7355)),u=o(3388),l=i(o(3368)),c=r(o(9546));function p(){var e,t;return null!==(t=JSON.parse(null!==(e=window.localStorage.getItem("confirmedPSAs"))&&void 0!==e?e:"[]"))&&void 0!==t?t:[]}t.show=function(){return s(this,void 0,void 0,(function*(){const e=yield function(){return s(this,void 0,void 0,(function*(){const e=yield d.default.psas.get();return 500===e.status?("localhost"===window.location.hostname?l.addBanner("Dev Info: Backend server not running",0,"exclamation-triangle",!1):l.addBanner("Looks like the server is experiencing maintenance or some unexpected down time.<br>Check the <a target= '_blank' href='https://monkeytype.instatus.com/'>status page</a> or <a target= '_blank' href='https://twitter.com/monkeytypegame'>Twitter</a> for more information.",-1,"exclamation-triangle",!0,void 0,!0),[]):503===e.status?(l.addBanner("Server is currently under maintenance. <a target= '_blank' href='https://monkeytype.instatus.com/'>Check the status page</a> for more info.",-1,"bullhorn",!0),[]):e.data}))}();if(null==e||0==e.length)return void window.localStorage.setItem("confirmedPSAs",JSON.stringify([]));const t=p();e.forEach((e=>{var o;if(!t.includes(e._id)||!1!==(null!==(o=e.sticky)&&void 0!==o&&o)){if(e.date){const t=new Date(e.date),o=e.date-Date.now(),n=(0,u.secondsToString)(o/1e3,!1,!1,"text",!1,!0);e.message=e.message.replace("{dateDifference}",n),e.message=e.message.replace("{dateNoTime}",(0,c.default)(t,"dd MMM yyyy")),e.message=e.message.replace("{date}",(0,c.default)(t,"dd MMM yyyy HH:mm"))}l.addBanner(e.message,e.level,"bullhorn",e.sticky,(()=>{!function(e){const t=p();t.push(e),window.localStorage.setItem("confirmedPSAs",JSON.stringify(t))}(e._id)}),!0)}}))}))}},9406:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const s=i(o(7346));let r=!1;$(".scrollToTopButton").on("click",(()=>{window.scrollTo({top:0,behavior:"smooth"})})),$(window).scroll((()=>{const e=s.get();if("test"!=e&&("about"==e||"settings"==e||"account"==e)){const e=window.scrollY;!r&&e>100?($(".scrollToTopButton").removeClass("invisible"),r=!0):r&&e<100&&($(".scrollToTopButton").addClass("invisible"),r=!1)}}))},4203:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.update=t.reset=t.getAll=t.get=void 0;let n={bg:"#323437",main:"#e2b714",caret:"#e2b714",sub:"#646669",subAlt:"#2c2e31",text:"#d1d0c5",error:"#ca4754",errorExtra:"#7e2a33",colorfulError:"#ca4754",colorfulErrorExtra:"#7e2a33"};function a(){const e=getComputedStyle(document.body);n.bg=e.getPropertyValue("--bg-color").replace(" ",""),n.main=e.getPropertyValue("--main-color").replace(" ",""),n.caret=e.getPropertyValue("--caret-color").replace(" ",""),n.sub=e.getPropertyValue("--sub-color").replace(" ",""),n.subAlt=e.getPropertyValue("--sub-alt-color").replace(" ",""),n.text=e.getPropertyValue("--text-color").replace(" ",""),n.error=e.getPropertyValue("--error-color").replace(" ",""),n.errorExtra=e.getPropertyValue("--error-extra-color").replace(" ",""),n.colorfulError=e.getPropertyValue("--colorful-error-color").replace(" ",""),n.colorfulErrorExtra=e.getPropertyValue("--colorful-error-extra-color").replace(" ","")}t.get=function(e){return o(this,void 0,void 0,(function*(){return n[e]||a(),n[e]}))},t.getAll=function(){return o(this,void 0,void 0,(function*(){return n.bg||a(),n}))},t.reset=function(){n={bg:"",main:"",caret:"",sub:"",subAlt:"",text:"",error:"",errorExtra:"",colorfulError:"",colorfulErrorExtra:""}},t.update=a},8980:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.show=void 0;const r=i(o(3368));function d(e){window.localStorage.setItem("lastSeenVersion",e)}t.show=function(e){return s(this,void 0,void 0,(function*(){const t=yield null!==(o=window.localStorage.getItem("lastSeenVersion"))&&void 0!==o?o:"";var o;""!==t?("localhost"!==window.location.hostname&&"127.0.0.1"!==window.location.hostname||caches.keys().then((function(e){for(const t of e)caches.delete(t)})),t!==e&&(caches.keys().then((function(e){for(const t of e)caches.delete(t)})),r.addBanner(`Version ${e} has been released. Click the version number in the bottom right to view the changelog.`,1,"code-branch",!1),d(e))):d(e)}))}},9294:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),o(9835),o(6617);const r=i(o(6350));o(5209);const d=s(o(6705)),u=i(o(2474)),l=i(o(4626)),c=i(o(6084)),p=i(o(3448)),f=i(o(4897));o(4674);const h=o(9029);o(4173),o(4660),o(5153),o(2666),o(2845),o(9360),o(8553),o(8325),o(5331),o(6327),o(9406),o(4611),o(7841),o(5764);const m=i(o(7520));o(41);const g=o.g;g.snapshot=r.getSnapshot,g.config=d.default,g.toggleFilterDebug=m.toggleFilterDebug,g.glarsesMode=h.enable,g.stats=u.getStats,g.replay=l.getReplayExport,g.enableTimerDebug=c.enableTimerDebug,g.getTimerStats=c.getTimerStats,g.toggleUnsmoothedRaw=p.toggleUnsmoothedRaw,g.enableSpacingDebug=f.enableSpacingDebug},1446:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.dispatch=t.subscribe=void 0;const o=[];t.subscribe=function(e){o.push(e)},t.dispatch=function(e,t,n,a,i){o.forEach((o=>{try{o(e,t,n,a,i)}catch(e){console.error("Config event subscriber threw an error"),console.error(e)}}))}},5701:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.dispatch=t.subscribe=void 0;const o=[];t.subscribe=function(e){o.push(e)},t.dispatch=function(e,t){o.forEach((o=>{try{o(e,t)}catch(e){console.error("Google Sign Up event subscriber threw an error"),console.error(e)}}))}},6507:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.dispatch=t.subscribe=void 0;const o=[];t.subscribe=function(e){o.push(e)},t.dispatch=function(e,t,n){o.forEach((o=>{try{o(e,t,n)}catch(e){console.error("Timer event subscriber threw an error"),console.error(e)}}))}},5973:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.page=void 0;const i=a(o(3361));t.page=new i.default("404",$(".page.page404"),"/404",(()=>n(void 0,void 0,void 0,(function*(){}))),(()=>n(void 0,void 0,void 0,(function*(){}))),(()=>n(void 0,void 0,void 0,(function*(){}))),(()=>n(void 0,void 0,void 0,(function*(){}))))},5331:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.page=void 0;const d=i(o(3388)),u=r(o(3361));t.page=new u.default("about",$(".page.pageAbout"),"/about",(()=>s(void 0,void 0,void 0,(function*(){}))),(()=>s(void 0,void 0,void 0,(function*(){$(".pageAbout .contributors").empty(),$(".pageAbout .supporters").empty()}))),(()=>s(void 0,void 0,void 0,(function*(){!function(){s(this,void 0,void 0,(function*(){const e=yield d.getSupportersList(),t=yield d.getContributorsList();e.forEach((e=>{$(".pageAbout .supporters").append(`\n      <div>${e}</div>\n    `)})),t.forEach((e=>{$(".pageAbout .contributors").append(`\n      <div>${e}</div>\n    `)}))}))}()}))),(()=>s(void 0,void 0,void 0,(function*(){}))))},7520:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.page=t.update=t.downloadResults=t.smoothHistory=t.reset=t.toggleFilterDebug=void 0;const d=i(o(6350)),u=i(o(1329)),l=i(o(4203)),c=i(o(1833)),p=i(o(6705)),f=p,h=i(o(6472)),m=i(o(2681)),g=i(o(140)),v=i(o(4335)),y=i(o(8911)),b=i(o(8452)),w=i(o(2026)),C=i(o(3368)),S=r(o(3361)),_=i(o(3388)),k=i(o(7346)),x=i(o(7686)),T=r(o(9546)),P=o(6617);let M=!1;t.toggleFilterDebug=function(){M=!M,M&&console.log("filterDebug is on")};let O=[],L=0;function W(e){var t,o;if(O==[]||0==O.length)return;let n;n=e&&e>L?10*Math.ceil(e/10):L+10;for(let e=L;e<n;e++){const n=O[e];if(!n)continue;let a,i=n.difficulty;null==i&&(i="normal");try{a=p.default.alwaysShowCPM?(5*n.rawWpm).toFixed(2):n.rawWpm.toFixed(2),null==a&&(a="-")}catch(e){a="-"}let s=`<span aria-label="${null===(t=n.language)||void 0===t?void 0:t.replace("_"," ")}" data-balloon-pos="up"><i class="fas fa-fw fa-globe-americas"></i></span>`;"normal"===i?s+=`<span aria-label="${n.difficulty}" data-balloon-pos="up"><i class="far fa-fw fa-star"></i></span>`:"expert"===i?s+=`<span aria-label="${n.difficulty}" data-balloon-pos="up"><i class="fas fa-fw fa-star-half-alt"></i></span>`:"master"===i&&(s+=`<span aria-label="${n.difficulty}" data-balloon-pos="up"><i class="fas fa-fw fa-star"></i></span>`),n.punctuation&&(s+='<span aria-label="punctuation" data-balloon-pos="up" style="font-weight:900">!?</span>'),n.numbers&&(s+='<span aria-label="numbers" data-balloon-pos="up" style="font-weight:900">15</span>'),n.blindMode&&(s+='<span aria-label="blind mode" data-balloon-pos="up"><i class="fas fa-fw fa-eye-slash"></i></span>'),n.lazyMode&&(s+='<span aria-label="lazy mode" data-balloon-pos="up"><i class="fas fa-fw fa-couch"></i></span>'),"none"!==n.funbox&&void 0!==n.funbox&&(s+=`<span aria-label="${n.funbox.replace(/_/g," ")}" data-balloon-pos="up"><i class="fas fa-gamepad"></i></span>`),void 0===n.chartData?s+='<span class="miniResultChartButton" aria-label="No chart data found" data-balloon-pos="up"><i class="fas fa-chart-line"></i></span>':"toolong"===n.chartData?s+='<span class="miniResultChartButton" aria-label="Chart history is not available for long tests" data-balloon-pos="up"><i class="fas fa-chart-line"></i></span>':s+=`<span class="miniResultChartButton" aria-label="View graph" data-balloon-pos="up" filteredResultsId="${e}" style="opacity: 1"><i class="fas fa-chart-line"></i></span>`;let r,u="";void 0!==n.tags&&n.tags.length>0&&(n.tags.forEach((e=>{var t;null===(t=d.getSnapshot().tags)||void 0===t||t.forEach((t=>{e===t._id&&(u+=t.display+", ")}))})),u=u.substring(0,u.length-2)),r=void 0===n.tags?"[]":JSON.stringify(n.tags);let l=`<span id="resultEditTags" resultId="${n._id}" tags='${r}' aria-label="no tags" data-balloon-pos="up" style="opacity: .25"><i class="fas fa-fw fa-tag"></i></span>`;""!==u&&(l=void 0!==n.tags&&n.tags.length>1?`<span id="resultEditTags" resultId="${n._id}" tags='${r}' aria-label="${u}" data-balloon-pos="up"><i class="fas fa-fw fa-tags"></i></span>`:`<span id="resultEditTags" resultId="${n._id}" tags='${r}' aria-label="${u}" data-balloon-pos="up"><i class="fas fa-fw fa-tag"></i></span>`);let c="-";n.consistency&&(c=n.consistency.toFixed(2)+"%");let f=null===(o=n.isPb)||void 0===o?void 0:o.toString();f=f?'<i class="fas fa-fw fa-crown"></i>':"";let h="-";h=n.charStats?n.charStats.join("/"):n.correctChars+"/"+n.incorrectChars+"/-/-";const m=new Date(n.timestamp);$(".pageAccount .history table tbody").append(`\n    <tr class="resultRow" id="result-${e}">\n    <td>${f}</td>\n    <td>${(p.default.alwaysShowCPM?5*n.wpm:n.wpm).toFixed(2)}</td>\n    <td>${a}</td>\n    <td>${n.acc.toFixed(2)}%</td>\n    <td>${c}</td>\n    <td>${h}</td>\n    <td>${n.mode} ${n.mode2}</td>\n    <td class="infoIcons">${s}</td>\n    <td>${l}</td>\n    <td>${(0,T.default)(m,"dd MMM yyyy")}<br>\n    ${(0,T.default)(m,"HH:mm")}\n    </td>\n    </tr>`)}L=n,L>=O.length?$(".pageAccount .loadMoreButton").addClass("hidden"):$(".pageAccount .loadMoreButton").removeClass("hidden")}function A(){$(".pageAccount .history table tbody").empty(),c.accountActivity.data.datasets[0].data=[],c.accountActivity.data.datasets[1].data=[],c.accountHistory.data.datasets[0].data=[],c.accountHistory.data.datasets[1].data=[],c.accountActivity.updateColors(),c.accountHistory.updateColors()}t.reset=A;let B=0,E=[],j=[];function R(e){const t=_.smooth(E.map((e=>e.y)),e),o=_.smooth(j.map((e=>e.y)),e),n=E.map(((e,o)=>{const n=Object.assign({},e);return n.y=t[o],n})),a=j.map(((e,t)=>{const n=Object.assign({},e);return n.y=o[t],n}));c.accountHistory.data.datasets[0].data=n,c.accountHistory.data.datasets[1].data=a,(n.length||a.length)&&c.accountHistory.update()}function I(){const e=$(".pageAccount .content .below .smoothing input").val();$(".pageAccount .content .below .smoothing .value").text(e),R(parseInt(e))}function D(){return s(this,void 0,void 0,(function*(){if(void 0!==d.getSnapshot().results)return;v.updateBar(45,!0);const e=yield d.getUserResults();w.addAllFromToday(),e&&u.updateActive()}))}function q(){return s(this,void 0,void 0,(function*(){if(v.updateBar(0,!0),null===d.getSnapshot())C.add("Missing account data. Please refresh.",-1),$(".pageAccount .preloader").html("Missing account data. Please refresh.");else{yield D();try{!function(){var e;v.updateText("Displaying stats..."),v.updateBar(100),console.log("updating account page"),l.update(),c.accountHistory.updateColors(),c.accountActivity.updateColors(),m.update();const t=d.getSnapshot();g.update(t.personalBests),x.update("account",t),E=[],j=[];const o=[];L=0;let n=0,a="",i=0,r=0,f=0,h=0,w=0,S=0,T=0,P=0;const A={total:0,count:0,last10Total:0,last10Count:0,max:0};B=0;let R=0,D=0,F=0,V=0;const K={};O=[],$(".pageAccount .history table tbody").empty(),null===(e=d.getSnapshot().results)||void 0===e||e.forEach((e=>{var t,s,l,c,m;try{let o=e.difficulty;if(null==o&&(o="normal"),!u.getFilter("difficulty",o))return void(M&&console.log("skipping result due to difficulty filter",e));if(!u.getFilter("mode",e.mode))return void(M&&console.log("skipping result due to mode filter",e));if("time"==e.mode){let t="custom";if([15,30,60,120].includes(parseInt(e.mode2))&&(t=e.mode2),!u.getFilter("time",t))return void(M&&console.log("skipping result due to time filter",e))}else if("words"==e.mode){let t="custom";if([10,25,50,100,200].includes(parseInt(e.mode2))&&(t=e.mode2),!u.getFilter("words",t))return void(M&&console.log("skipping result due to word filter",e))}if(null!=e.quoteLength){let t;if(0===e.quoteLength?t="short":1===e.quoteLength?t="medium":2===e.quoteLength?t="long":3===e.quoteLength&&(t="thicc"),void 0!==t&&!u.getFilter("quoteLength",t))return void(M&&console.log("skipping result due to quoteLength filter",e))}let n=u.getFilter("language",null!==(t=e.language)&&void 0!==t?t:"english");if("english_expanded"===e.language&&u.getFilter("language","english_1k")&&(n=!0),!n)return void(M&&console.log("skipping result due to language filter",e));let a="off";if(e.punctuation&&(a="on"),!u.getFilter("punctuation",a))return void(M&&console.log("skipping result due to punctuation filter",e));let i="off";if(e.numbers&&(i="on"),!u.getFilter("numbers",i))return void(M&&console.log("skipping result due to numbers filter",e));if("none"===e.funbox||void 0===e.funbox){if(!u.getFilter("funbox","none"))return void(M&&console.log("skipping result due to funbox filter",e))}else if(!u.getFilter("funbox",e.funbox))return void(M&&console.log("skipping result due to funbox filter",e));let r=!0;if(void 0===e.tags||0===e.tags.length)(null===(s=d.getSnapshot().tags)||void 0===s?void 0:s.length)?u.getFilter("tags","none")&&(r=!1):r=!1;else{const t=null===(l=d.getSnapshot().tags)||void 0===l?void 0:l.map((e=>e._id));if(void 0===t)return;e.tags.forEach((e=>{r&&((null==t?void 0:t.includes(e))?u.getFilter("tags",e)&&(r=!1):u.getFilter("tags","none")&&(r=!1))}))}if(r)return void(M&&console.log("skipping result due to tag filter",e));const c=Math.abs(e.timestamp-Date.now())/1e3;let p=!0;if((u.getFilter("date","all")||u.getFilter("date","last_day")&&c<=86400||u.getFilter("date","last_week")&&c<=604800||u.getFilter("date","last_month")&&c<=2592e3||u.getFilter("date","last_3months")&&c<=7776e3)&&(p=!1),p)return void(M&&console.log("skipping result due to date filter",e));O.push(e)}catch(t){C.add("Something went wrong when filtering. Resetting filters.",0),console.log(e),console.error(t),u.reset(),u.updateActive(),q()}const g=new Date(e.timestamp);g.setSeconds(0),g.setMinutes(0),g.setHours(0),g.setMilliseconds(0);const v=g.getTime();Object.keys(K).includes(String(v))?(K[v].amount++,K[v].time+=e.testDuration+e.incompleteTestSeconds-(null!==(c=e.afkDuration)&&void 0!==c?c:0),K[v].totalWpm+=e.wpm):K[v]={amount:1,time:e.testDuration+e.incompleteTestSeconds-(null!==(m=e.afkDuration)&&void 0!==m?m:0),totalWpm:e.wpm};let y=0;if(null==e.testDuration&&"custom"!==e.mode2&&"zen"!==e.mode2?"time"==e.mode?y=e.mode2:"words"==e.mode&&(y=e.mode2/e.wpm*60):y=parseFloat(e.testDuration),null!=e.incompleteTestSeconds?y+=e.incompleteTestSeconds:null!=e.restartCount&&e.restartCount>0&&(y+=y/4*e.restartCount),B+=y,h<10&&(h++,w+=e.wpm,P+=e.acc,void 0!==e.consistency&&(F+=e.consistency)),f++,void 0!==e.consistency&&(V++,D+=e.consistency,e.consistency>R&&(R=e.consistency)),null!=e.rawWpm&&(A.last10Count<10&&(A.last10Count++,A.last10Total+=e.rawWpm),A.total+=e.rawWpm,A.count++,e.rawWpm>A.max&&(A.max=e.rawWpm)),e.acc>S&&(S=e.acc),T+=e.acc,null!=e.restartCount&&(i+=e.restartCount),E.push({x:e.timestamp,y:p.default.alwaysShowCPM?_.roundTo2(5*e.wpm):e.wpm,wpm:p.default.alwaysShowCPM?_.roundTo2(5*e.wpm):e.wpm,acc:e.acc,mode:e.mode,mode2:e.mode2,punctuation:e.punctuation,language:e.language,timestamp:e.timestamp,difficulty:e.difficulty,raw:p.default.alwaysShowCPM?_.roundTo2(5*e.rawWpm):e.rawWpm}),o.push(e.wpm),j.push({x:e.timestamp,y:100-e.acc,errorRate:100-e.acc}),e.wpm>n){const t=e.punctuation?",<br>with punctuation":"",o=e.numbers?",<br> "+(e.punctuation?"&":"")+"with numbers":"";n=e.wpm,a="custom"==e.mode?e.mode:e.mode+" "+e.mode2+t+o}r+=e.wpm})),p.default.alwaysShowCPM?$(".pageAccount .group.history table thead tr td:nth-child(2)").text("cpm"):$(".pageAccount .group.history table thead tr td:nth-child(2)").text("wpm"),W();const H=[],z=[],N=[];Object.keys(K).forEach((e=>{const t=parseInt(e);H.push({x:t,y:K[t].amount}),z.push({x:t,y:_.roundTo2(K[t].time),amount:K[t].amount}),N.push({x:t,y:_.roundTo2((p.default.alwaysShowCPM?5*K[t].totalWpm:K[t].totalWpm)/K[t].amount)})}));const Q=c.accountActivity.options.scales;p.default.alwaysShowCPM?Q.avgWpm.title.text="Average Cpm":Q.avgWpm.title.text="Average Wpm",c.accountActivity.data.datasets[0].data=z,c.accountActivity.data.datasets[1].data=N;const U=c.accountHistory.options.scales;p.default.alwaysShowCPM?U.wpm.title.text="Characters per Minute":U.wpm.title.text="Words per Minute",c.accountHistory.data.datasets[0].data=E,c.accountHistory.data.datasets[1].data=j;const G=E.map((e=>e.y)),J=Math.min(...G),Z=Math.max(...G);U.wpm.max=Math.floor(Z)+(10-Math.floor(Z)%10),p.default.startGraphsAtZero?U.wpm.min=0:U.wpm.min=Math.floor(J),E==[]||0==E.length?($(".pageAccount .group.noDataError").removeClass("hidden"),$(".pageAccount .group.chart").addClass("hidden"),$(".pageAccount .group.dailyActivityChart").addClass("hidden"),$(".pageAccount .group.history").addClass("hidden"),$(".pageAccount .triplegroup.stats").addClass("hidden")):($(".pageAccount .group.noDataError").addClass("hidden"),$(".pageAccount .group.chart").removeClass("hidden"),$(".pageAccount .group.dailyActivityChart").removeClass("hidden"),$(".pageAccount .group.history").removeClass("hidden"),$(".pageAccount .triplegroup.stats").removeClass("hidden")),$(".pageAccount .timeTotalFiltered .val").text(_.secondsToString(Math.round(B),!0,!0)),p.default.alwaysShowCPM?($(".pageAccount .highestWpm .title").text("highest cpm"),$(".pageAccount .highestWpm .val").text(_.roundTo2(5*n))):($(".pageAccount .highestWpm .title").text("highest wpm"),$(".pageAccount .highestWpm .val").text(_.roundTo2(n))),p.default.alwaysShowCPM?($(".pageAccount .averageWpm .title").text("average cpm"),$(".pageAccount .averageWpm .val").text(Math.round(5*r/f))):($(".pageAccount .averageWpm .title").text("average wpm"),$(".pageAccount .averageWpm .val").text(Math.round(r/f))),p.default.alwaysShowCPM?($(".pageAccount .averageWpm10 .title").text("average cpm (last 10 tests)"),$(".pageAccount .averageWpm10 .val").text(Math.round(5*w/h))):($(".pageAccount .averageWpm10 .title").text("average wpm (last 10 tests)"),$(".pageAccount .averageWpm10 .val").text(Math.round(w/h))),p.default.alwaysShowCPM?($(".pageAccount .highestRaw .title").text("highest raw cpm"),$(".pageAccount .highestRaw .val").text(_.roundTo2(5*A.max))):($(".pageAccount .highestRaw .title").text("highest raw wpm"),$(".pageAccount .highestRaw .val").text(_.roundTo2(A.max))),p.default.alwaysShowCPM?($(".pageAccount .averageRaw .title").text("average raw cpm"),$(".pageAccount .averageRaw .val").text(Math.round(5*A.total/A.count))):($(".pageAccount .averageRaw .title").text("average raw wpm"),$(".pageAccount .averageRaw .val").text(Math.round(A.total/A.count))),p.default.alwaysShowCPM?($(".pageAccount .averageRaw10 .title").text("average raw cpm (last 10 tests)"),$(".pageAccount .averageRaw10 .val").text(Math.round(5*A.last10Total/A.last10Count))):($(".pageAccount .averageRaw10 .title").text("average raw wpm (last 10 tests)"),$(".pageAccount .averageRaw10 .val").text(Math.round(A.last10Total/A.last10Count))),$(".pageAccount .highestWpm .mode").html(a),$(".pageAccount .testsTaken .val").text(f),$(".pageAccount .highestAcc .val").text(S+"%"),$(".pageAccount .avgAcc .val").text(Math.round(T/f)+"%"),$(".pageAccount .avgAcc10 .val").text(Math.round(P/h)+"%"),0==D||null==D?($(".pageAccount .avgCons .val").text("-"),$(".pageAccount .avgCons10 .val").text("-")):($(".pageAccount .highestCons .val").text(R+"%"),$(".pageAccount .avgCons .val").text(Math.round(D/V)+"%"),$(".pageAccount .avgCons10 .val").text(Math.round(F/Math.min(h,V))+"%")),$(".pageAccount .testsStarted .val").text(`${f+i}`),$(".pageAccount .testsCompleted .val").text(`${f}(${Math.floor(f/(f+i)*100)}%)`),$(".pageAccount .testsCompleted .avgres").text(`\n    ${(i/f).toFixed(1)} restarts per completed test\n  `);const Y=O.map((e=>e.wpm)).reverse(),X=_.findLineByLeastSquares(Y),ee=(X[1][1]-X[0][1])*(3600/B),te=ee>0?"+":"";$(".pageAccount .group.chart .below .text").text(`Speed change per hour spent typing: ${te+_.roundTo2(p.default.alwaysShowCPM?5*ee:ee)} ${p.default.alwaysShowCPM?"cpm":"wpm"}.`),I(),c.accountActivity.updateColors(),v.updateBar(100,!0),setTimeout((()=>{"account"==k.get()&&b.show()}),125),y.set(!1),_.swapElements($(".pageAccount .preloader"),$(".pageAccount .content"),250,(()=>s(this,void 0,void 0,(function*(){}))),(()=>s(this,void 0,void 0,(function*(){setTimeout((()=>{x.updateNameFontSize("account")}),1)}))))}()}catch(e){console.error(e),C.add(`Something went wrong: ${e}`,-1)}}}))}function F(e,t,o=null){if($("td").removeClass("headerSorted"),$("td").children("i").remove(),$(t).addClass("headerSorted"),O.length<2)return;const n=e;let a=!0;null!==o?1==o?$(t).append('<i class="fas fa-sort-down" aria-hidden="true"></i>'):(a=!1,$(t).append('<i class="fas fa-sort-up" aria-hidden="true"></i>')):parseInt(O[0][n])<=parseInt(O[O.length-1][n])?(a=!0,$(t).append('<i class="fas fa-sort-down" aria-hidden="true"></i>')):(a=!1,$(t).append('<i class="fas fa-sort-up", aria-hidden="true"></i>'));const i=[],s=[];for(;i.length<O.length;){let e=Number.MAX_VALUE,t=-1,o=-1;for(let i=0;i<O.length;i++)a?O[i][n]>=t&&!s.includes(i)&&(t=O[i][n],o=i):O[i][n]<=e&&!s.includes(i)&&(e=O[i][n],o=i);i.push(O[o]),s.push(o)}O=i,$(".pageAccount .history table tbody").empty(),L=0,W()}t.smoothHistory=R,t.downloadResults=D,t.update=q,$(".pageAccount .toggleAccuracyOnChart").on("click",(()=>{f.setChartAccuracy(!p.default.chartAccuracy)})),$(".pageAccount .toggleChartStyle").on("click",(()=>{"line"==p.default.chartStyle?f.setChartStyle("scatter"):f.setChartStyle("line")})),$(".pageAccount .loadMoreButton").on("click",(()=>{W()})),$(".pageAccount #accountHistoryChart").on("click",(()=>{var e,t,o;const n=c.accountHistoryActiveIndex;if(W(n),!window)return;const a=null!==(e=$(window).height())&&void 0!==e?e:0,i=(null!==(o=null===(t=$(`#result-${n}`).offset())||void 0===t?void 0:t.top)&&void 0!==o?o:0)-a/2;$([document.documentElement,document.body]).animate({scrollTop:i},500),$(".resultRow").removeClass("active"),$(`#result-${n}`).addClass("active")})),$(document).on("click",".pageAccount .miniResultChartButton",(e=>{var t;console.log("updating");const o=$(e.currentTarget).attr("filteredResultsId");void 0!==o&&(h.updateData(O[parseInt(o)].chartData),h.show(),h.updatePosition(e.pageX-(null!==(t=$(".pageAccount .miniResultChartWrapper").outerWidth())&&void 0!==t?t:0),e.pageY+30))})),$(document).on("click",".history-wpm-header",(()=>{F("wpm",".history-wpm-header")})),$(document).on("click",".history-raw-header",(()=>{F("rawWpm",".history-raw-header")})),$(document).on("click",".history-acc-header",(()=>{F("acc",".history-acc-header")})),$(document).on("click",".history-correct-chars-header",(()=>{F("correctChars",".history-correct-chars-header")})),$(document).on("click",".history-incorrect-chars-header",(()=>{F("incorrectChars",".history-incorrect-chars-header")})),$(document).on("click",".history-consistency-header",(()=>{F("consistency",".history-consistency-header")})),$(document).on("click",".history-date-header",(()=>{F("timestamp",".history-date-header")})),$(document).on("click",".buttonsAndTitle .buttons .button",(()=>{F("timestamp",".history-date-header",!0)})),$(document).on("click",".pageAccount .topFilters .button, .pageAccount .filterButtons .button",(()=>{setTimeout((()=>{q()}),0)})),$(document).on("click",".pageAccount .group.presetFilterButtons .filterBtns .filterPresets .select-filter-preset",(e=>{u.setFilterPreset($(e.target).data("id")),q()})),$(".pageAccount .content .below .smoothing input").on("input",(()=>{I()})),$(".pageAccount .content .group.aboveHistory .exportCSV").on("click",(()=>{_.downloadResultsCSV(O)})),$(document).on("click",".pageAccount .profile .details .copyLink",(()=>{var e;const t=`${location.origin}/profile/${null===(e=P.Auth.currentUser)||void 0===e?void 0:e.uid}`;navigator.clipboard.writeText(t).then((function(){C.add("URL Copied to clipboard",0)}),(function(){alert("Failed to copy using the Clipboard API. Here's the link: "+t)}))})),t.page=new S.default("account",$(".page.pageAccount"),"/account",(()=>s(void 0,void 0,void 0,(function*(){b.hide()}))),(()=>s(void 0,void 0,void 0,(function*(){A()}))),(()=>s(void 0,void 0,void 0,(function*(){yield q()}))),(()=>s(void 0,void 0,void 0,(function*(){}))))},4335:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.page=t.showBar=t.updateText=t.updateBar=void 0;const d=i(o(3388)),u=r(o(3361));t.updateBar=function(e,t){const o=t?100:1e3;$(".pageLoading .fill, .pageAccount .fill").stop(!0,!0).animate({width:e+"%"},o)},t.updateText=function(e){$(".pageLoading .text, .pageAccount .preloader .text").text(e)},t.showBar=function(){return new Promise((e=>{d.swapElements($(".pageLoading .icon"),$(".pageLoading .barWrapper"),125,(()=>s(this,void 0,void 0,(function*(){e()})))),d.swapElements($(".pageAccount .icon"),$(".pageAccount .barWrapper"),125,(()=>s(this,void 0,void 0,(function*(){e()}))))}))},t.page=new u.default("loading",$(".page.pageLoading"),"/",(()=>s(void 0,void 0,void 0,(function*(){}))),(()=>s(void 0,void 0,void 0,(function*(){}))),(()=>s(void 0,void 0,void 0,(function*(){}))),(()=>s(void 0,void 0,void 0,(function*(){}))))},2588:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.page=t.updateSignupButton=t.hidePreloader=t.showPreloader=t.disableInputs=t.enableInputs=t.disableSignInButton=t.enableSignInButton=t.disableSignUpButton=t.enableSignUpButton=void 0;const d=o(2189),u=r(o(7355)),l=r(o(3361)),c=i(o(3368)),p=o(5817);function f(){$(".page.pageLogin .register.side .button").removeClass("disabled")}function h(){$(".page.pageLogin .register.side .button").addClass("disabled")}t.enableSignUpButton=f,t.disableSignUpButton=h,t.enableSignInButton=function(){$(".page.pageLogin .login.side .button").removeClass("disabled")},t.disableSignInButton=function(){$(".page.pageLogin .login.side .button").addClass("disabled")},t.enableInputs=function(){$(".pageLogin input").prop("disabled",!1)},t.disableInputs=function(){$(".pageLogin input").prop("disabled",!0)},t.showPreloader=function(){$(".pageLogin .preloader").removeClass("hidden")},t.hidePreloader=function(){$(".pageLogin .preloader").addClass("hidden")},t.updateSignupButton=()=>{"available"!==b.get()||"valid"!==w.get()||"match"!==C.get()||"good"!==S.get()||"match"!==_.get()?h():f()};const m=(0,d.debounce)(1e3,(()=>s(void 0,void 0,void 0,(function*(){const e=$(".page.pageLogin .register.side .usernameInput").val();if(!e)return void(0,t.updateSignupButton)();const o=yield u.default.users.getNameAvailability(e);200===o.status?b.show("available",o.message):422===o.status?b.show("unavailable",o.message):409===o.status?b.show("taken",o.message):(b.show("unavailable",o.message),c.add("Failed to check name availability: "+o.message,-1)),(0,t.updateSignupButton)()})))),g=()=>{$(".page.pageLogin .register.side .emailInput").val()===$(".page.pageLogin .register.side .verifyEmailInput").val()?C.show("match"):C.show("mismatch"),(0,t.updateSignupButton)()},v=()=>{const e=$(".page.pageLogin .register.side .passwordInput").val();if(e.length<8)S.show("short","Password must be at least 8 characters");else{{const t=e.match(/[A-Z]/),o=e.match(/[\d]/),n=e.match(/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]/);t&&o&&n?S.show("good","Password is good"):S.show("weak","Password must contain at least one capital letter, number, and special character")}(0,t.updateSignupButton)()}},y=()=>{$(".page.pageLogin .register.side .passwordInput").val()===$(".page.pageLogin .register.side .verifyPasswordInput").val()?_.show("match"):_.show("mismatch"),(0,t.updateSignupButton)()},b=new p.InputIndicator($(".page.pageLogin .register.side input.usernameInput"),{available:{icon:"fa-check",level:1},unavailable:{icon:"fa-times",level:-1},taken:{icon:"fa-times",level:-1},checking:{icon:"fa-circle-notch",spinIcon:!0,level:0}}),w=new p.InputIndicator($(".page.pageLogin .register.side input.emailInput"),{valid:{icon:"fa-check",level:1},invalid:{icon:"fa-times",level:-1}}),C=new p.InputIndicator($(".page.pageLogin .register.side input.verifyEmailInput"),{match:{icon:"fa-check",level:1},mismatch:{icon:"fa-times",level:-1}}),S=new p.InputIndicator($(".page.pageLogin .register.side input.passwordInput"),{good:{icon:"fa-check",level:1},short:{icon:"fa-times",level:-1},weak:{icon:"fa-times",level:-1}}),_=new p.InputIndicator($(".page.pageLogin .register.side input.verifyPasswordInput"),{match:{icon:"fa-check",level:1},mismatch:{icon:"fa-times",level:-1}});$(".page.pageLogin .register.side .usernameInput").on("input",(()=>{setTimeout((()=>{if(""===$(".page.pageLogin .register.side .usernameInput").val())return b.hide();b.show("checking"),m()}),1)})),$(".page.pageLogin .register.side .emailInput").on("input",(()=>{if(!$(".page.pageLogin .register.side .emailInput").val()&&!$(".page.pageLogin .register.side .verifyEmailInput").val())return w.hide(),void C.hide();(()=>{const e=$(".page.pageLogin .register.side .emailInput").val();/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)?w.show("valid"):w.show("invalid"),(0,t.updateSignupButton)()})(),g()})),$(".page.pageLogin .register.side .verifyEmailInput").on("input",(()=>{if(!$(".page.pageLogin .register.side .emailInput").val()&&!$(".page.pageLogin .register.side .verifyEmailInput").val())return w.hide(),void C.hide();g()})),$(".page.pageLogin .register.side .passwordInput").on("input",(()=>{if(!$(".page.pageLogin .register.side .passwordInput").val()&&!$(".page.pageLogin .register.side .verifyPasswordInput").val())return S.hide(),void _.hide();v(),y()})),$(".page.pageLogin .register.side .verifyPasswordInput").on("input",(()=>{if(!$(".page.pageLogin .register.side .passwordInput").val()&&!$(".page.pageLogin .register.side .verifyPasswordInput").val())return S.hide(),void _.hide();v(),y()})),t.page=new l.default("login",$(".page.pageLogin"),"/login",(()=>s(void 0,void 0,void 0,(function*(){}))),(()=>s(void 0,void 0,void 0,(function*(){}))),(()=>s(void 0,void 0,void 0,(function*(){}))),(()=>s(void 0,void 0,void 0,(function*(){}))))},3361:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t,o,n,a,i,s){this.name=e,this.element=t,this.pathname=o,this.beforeHide=n,this.afterHide=a,this.beforeShow=i,this.afterShow=s}}},4471:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.page=void 0;const d=r(o(7355)),u=r(o(3361)),l=i(o(7686)),c=i(o(140)),p=i(o(3368));function f(){$(".page.pageProfile .preloader").removeClass("hidden"),$(".page.pageProfile .profile").html('\n      <div class="details none">\n        <div class="avatarAndName">\n          <div class="avatars">\n            <div class="placeholderAvatar">\n              <i class="fas fa-user-circle"></i>\n            </div>\n            <div class="avatar"></div>\n          </div>\n          <div>\n            <div class="name">-</div>\n            <div class="badges"></div>\n            <div class="allBadges"></div>\n            <div class="joined" data-balloon-pos="up">-</div>\n          </div>\n        </div>\n        <div class="separator sep1"></div>\n        <div class="typingStats vertical">\n          <div class="started">\n            <div class="title">tests started</div>\n            <div class="value">-</div>\n          </div>\n          <div class="completed">\n            <div class="title">tests completed</div>\n            <div class="value">-</div>\n          </div>\n          <div class="timeTyping">\n            <div class="title">time typing</div>\n            <div class="value">-</div>\n          </div>\n        </div>\n        <div class="separator sep2 hidden"></div>\n\n        <div class="bioAndKeyboard vertical hidden">\n          <div class="bio">\n            <div class="title">bio</div>\n            <div class="value">-</div>\n          </div>\n          <div class="keyboard hidden">\n            <div class="title">keyboard</div>\n            <div class="value">-</div>\n          </div>\n        </div>\n        <div class="separator sep3 hidden"></div>\n\n        <div class="socials big hidden">\n          <div class="title">socials</div>\n          <div class="value">-</div>\n        </div>\n      </div>\n      <div class="pbsWords">\n        <div class="group">\n          <div class="quick">\n            <div class="test">10 words</div>\n            <div class="wpm">-</div>\n            <div class="acc">-</div>\n          </div>\n        </div>\n        <div class="group">\n          <div class="quick">\n            <div class="test">25 words</div>\n            <div class="wpm">-</div>\n            <div class="acc">-</div>\n          </div>\n        </div>\n        <div class="group">\n          <div class="quick">\n            <div class="test">50 words</div>\n            <div class="wpm">-</div>\n            <div class="acc">-</div>\n          </div>\n        </div>\n        <div class="group">\n          <div class="quick">\n            <div class="test">100 words</div>\n            <div class="wpm">-</div>\n            <div class="acc">-</div>\n          </div>\n        </div>\n      </div>\n      <div class="pbsTime">\n        <div class="group">\n          <div class="quick">\n            <div class="test">15 seconds</div>\n            <div class="wpm">-</div>\n            <div class="acc">-</div>\n          </div>\n        </div>\n        <div class="group">\n          <div class="quick">\n            <div class="test">30 seconds</div>\n            <div class="wpm">-</div>\n            <div class="acc">-</div>\n          </div>\n        </div>\n        <div class="group">\n          <div class="quick">\n            <div class="test">60 seconds</div>\n            <div class="wpm">-</div>\n            <div class="acc">-</div>\n          </div>\n        </div>\n        <div class="group">\n          <div class="quick">\n            <div class="test">120 seconds</div>\n            <div class="wpm">-</div>\n            <div class="acc">-</div>\n          </div>\n        </div>\n      </div>')}t.page=new u.default("profile",$(".page.pageProfile"),"/profile",(()=>s(void 0,void 0,void 0,(function*(){}))),(()=>s(void 0,void 0,void 0,(function*(){f()}))),(e=>s(void 0,void 0,void 0,(function*(){var t;f(),function(e){s(this,void 0,void 0,(function*(){const t=yield d.default.users.getProfile(null!=e?e:"");if($(".page.pageProfile .preloader").addClass("hidden"),200!==t.status)return p.add("Failed to load profile: "+t.message,-1);l.update("profile",t.data),c.update(t.data.personalBests,!0)}))}(null!==(t=null==e?void 0:e.uid)&&void 0!==t?t:"")}))),(()=>s(void 0,void 0,void 0,(function*(){}))))},8835:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.page=t.setEventDisabled=t.update=t.showAccountSection=t.updateAuthSections=t.updateDiscordSection=t.hideAccountSection=t.fillSettingsPage=t.reset=t.groups=void 0;const d=r(o(8427)),u=i(o(6705)),l=u,c=i(o(5929)),p=i(o(3388)),f=i(o(6350)),h=i(o(8059)),m=i(o(9343)),g=i(o(4984)),v=i(o(4216)),y=i(o(3368)),b=i(o(9516)),w=i(o(1446)),C=i(o(7346)),S=i(o(6126)),_=i(o(4044)),k=r(o(3361)),x=o(6617);function T(){$(".pageSettings .section.themes .favThemes.buttons").empty(),$(".pageSettings .section.themes .allThemes.buttons").empty(),$(".pageSettings .section.themes .allCustomThemes.buttons").empty(),$(".pageSettings .section.languageGroups .buttons").empty(),$(".pageSettings select").empty().select2("destroy"),$(".pageSettings .section.funbox .buttons").empty(),$(".pageSettings .section.fontFamily .buttons").empty()}t.groups={},t.reset=T;let P=!1;function M(){return s(this,void 0,void 0,(function*(){u.default.showKeyTips?$(".pageSettings .tip").removeClass("hidden"):$(".pageSettings .tip").addClass("hidden");const e=$(".pageSettings .section.language select").empty();(yield p.getLanguageGroups()).forEach((t=>{let o=`<optgroup label="${t.name}">`;t.languages.forEach((e=>{o+=`<option value="${e}">\n        ${e.replace(/_/g," ")}\n      </option>`})),o+="</optgroup>",e.append(o)})),e.select2({width:"100%"});const o=$(".pageSettings .section.layout select").empty();o.append("<option value='default'>off</option>"),Object.keys(yield p.getLayoutsList()).forEach((e=>{o.append(`<option value='${e}'>${e.replace(/_/g," ")}</option>`)})),o.select2({width:"100%"});const n=$(".pageSettings .section.keymapLayout select").empty();n.append("<option value='overrideSync'>emulator sync</option>"),Object.keys(yield p.getLayoutsList()).forEach((e=>{"default"!=e.toString()&&n.append(`<option value='${e}'>${e.replace(/_/g," ")}</option>`)})),n.select2({width:"100%"});const a=$(".pageSettings .section.autoSwitchThemeInputs select.light").empty(),i=$(".pageSettings .section.autoSwitchThemeInputs select.dark").empty();for(const e of yield p.getThemesList())a.append(`<option value='${e.name}'>${e.name.replace(/_/g," ")}</option>`),i.append(`<option value='${e.name}'>${e.name.replace(/_/g," ")}</option>`);a.select2({width:"100%"}),i.select2({width:"100%"}),$(".pageSettings .section.autoSwitchThemeInputs select.light").val(u.default.themeLight).trigger("change.select2"),$(".pageSettings .section.autoSwitchThemeInputs select.dark").val(u.default.themeDark).trigger("change.select2");const r=$(".pageSettings .section.funbox .buttons").empty();r.append("<div class=\"funbox button\" funbox='none'>none</div>"),p.getFunboxList().then((e=>{e.forEach((e=>{"mirror"===e.name?r.append(`<div class="funbox button" funbox='${e.name}' aria-label="${e.info}" data-balloon-pos="up" data-balloon-length="fit" type="${e.type}" style="transform:scaleX(-1);">${e.name.replace(/_/g," ")}</div>`):r.append(`<div class="funbox button" funbox='${e.name}' aria-label="${e.info}" data-balloon-pos="up" data-balloon-length="fit" type="${e.type}">${e.name.replace(/_/g," ")}</div>`)}))}));let f=!0;const h=$(".pageSettings .section.fontFamily .buttons").empty();p.getFontsList().then((e=>{e.forEach((e=>{u.default.fontFamily===e.name&&(f=!1),h.append(`<div class="button${u.default.fontFamily===e.name?" active":""}" style="font-family:${void 0!==e.display?e.display:e.name}" fontFamily="${e.name.replace(/ /g,"_")}" tabindex="0"\n        onclick="this.blur();">${void 0!==e.display?e.display:e.name}</div>`)})),h.append(f?`<div class="button no-auto-handle custom active" onclick="this.blur();">Custom (${u.default.fontFamily.replace(/_/g," ")})</div>`:'<div class="button no-auto-handle custom" onclick="this.blur();">Custom</div>')})),$(".pageSettings .section.customBackgroundSize input").val(u.default.customBackground),$(".pageSettings .section.customLayoutfluid input").val(u.default.customLayoutfluid.replace(/#/g," ")),I(!0),P?Object.keys(t.groups).forEach((e=>{t.groups[e].updateInput()})):(yield function(){return s(this,void 0,void 0,(function*(){yield l.loadPromise,t.groups.smoothCaret=new d.default("smoothCaret",l.setSmoothCaret,"button"),t.groups.difficulty=new d.default("difficulty",l.setDifficulty,"button"),t.groups.quickRestart=new d.default("quickRestart",l.setQuickRestartMode,"button"),t.groups.showLiveWpm=new d.default("showLiveWpm",l.setShowLiveWpm,"button",(()=>{t.groups.keymapMode.updateInput()})),t.groups.showLiveAcc=new d.default("showLiveAcc",l.setShowLiveAcc,"button"),t.groups.showLiveBurst=new d.default("showLiveBurst",l.setShowLiveBurst,"button"),t.groups.showTimerProgress=new d.default("showTimerProgress",l.setShowTimerProgress,"button"),t.groups.showAverage=new d.default("showAverage",l.setShowAverage,"button"),t.groups.keymapMode=new d.default("keymapMode",l.setKeymapMode,"button",(()=>{t.groups.showLiveWpm.updateInput()}),(()=>{"off"===u.default.keymapMode?($(".pageSettings .section.keymapStyle").addClass("hidden"),$(".pageSettings .section.keymapLayout").addClass("hidden"),$(".pageSettings .section.keymapLegendStyle").addClass("hidden")):($(".pageSettings .section.keymapStyle").removeClass("hidden"),$(".pageSettings .section.keymapLayout").removeClass("hidden"),$(".pageSettings .section.keymapLegendStyle").removeClass("hidden"))})),t.groups.keymapMatrix=new d.default("keymapStyle",l.setKeymapStyle,"button"),t.groups.keymapLayout=new d.default("keymapLayout",l.setKeymapLayout,"select"),t.groups.keymapLegendStyle=new d.default("keymapLegendStyle",l.setKeymapLegendStyle,"button"),t.groups.showKeyTips=new d.default("showKeyTips",l.setKeyTips,"button",void 0,(()=>{u.default.showKeyTips?$(".pageSettings .tip").removeClass("hidden"):$(".pageSettings .tip").addClass("hidden")})),t.groups.freedomMode=new d.default("freedomMode",l.setFreedomMode,"button",(()=>{t.groups.confidenceMode.updateInput()})),t.groups.strictSpace=new d.default("strictSpace",l.setStrictSpace,"button"),t.groups.oppositeShiftMode=new d.default("oppositeShiftMode",l.setOppositeShiftMode,"button"),t.groups.confidenceMode=new d.default("confidenceMode",l.setConfidenceMode,"button",(()=>{t.groups.freedomMode.updateInput(),t.groups.stopOnError.updateInput()})),t.groups.indicateTypos=new d.default("indicateTypos",l.setIndicateTypos,"button"),t.groups.hideExtraLetters=new d.default("hideExtraLetters",l.setHideExtraLetters,"button"),t.groups.blindMode=new d.default("blindMode",l.setBlindMode,"button"),t.groups.quickEnd=new d.default("quickEnd",l.setQuickEnd,"button"),t.groups.repeatQuotes=new d.default("repeatQuotes",l.setRepeatQuotes,"button"),t.groups.enableAds=new d.default("enableAds",l.setEnableAds,"button"),t.groups.alwaysShowWordsHistory=new d.default("alwaysShowWordsHistory",l.setAlwaysShowWordsHistory,"button"),t.groups.britishEnglish=new d.default("britishEnglish",l.setBritishEnglish,"button"),t.groups.singleListCommandLine=new d.default("singleListCommandLine",l.setSingleListCommandLine,"button"),t.groups.capsLockWarning=new d.default("capsLockWarning",l.setCapsLockWarning,"button"),t.groups.flipTestColors=new d.default("flipTestColors",l.setFlipTestColors,"button"),t.groups.showOutOfFocusWarning=new d.default("showOutOfFocusWarning",l.setShowOutOfFocusWarning,"button"),t.groups.colorfulMode=new d.default("colorfulMode",l.setColorfulMode,"button"),t.groups.startGraphsAtZero=new d.default("startGraphsAtZero",l.setStartGraphsAtZero,"button"),t.groups.autoSwitchTheme=new d.default("autoSwitchTheme",l.setAutoSwitchTheme,"button"),t.groups.randomTheme=new d.default("randomTheme",l.setRandomTheme,"button"),t.groups.stopOnError=new d.default("stopOnError",l.setStopOnError,"button",(()=>{t.groups.confidenceMode.updateInput()})),t.groups.soundVolume=new d.default("soundVolume",l.setSoundVolume,"button"),t.groups.playSoundOnError=new d.default("playSoundOnError",l.setPlaySoundOnError,"button",(()=>{u.default.playSoundOnError&&c.playError()})),t.groups.playSoundOnClick=new d.default("playSoundOnClick",l.setPlaySoundOnClick,"button",(()=>{"off"!==u.default.playSoundOnClick&&c.playClick()})),t.groups.showAllLines=new d.default("showAllLines",l.setShowAllLines,"button"),t.groups.paceCaret=new d.default("paceCaret",l.setPaceCaret,"button"),t.groups.repeatedPace=new d.default("repeatedPace",l.setRepeatedPace,"button"),t.groups.minWpm=new d.default("minWpm",l.setMinWpm,"button"),t.groups.minAcc=new d.default("minAcc",l.setMinAcc,"button"),t.groups.minBurst=new d.default("minBurst",l.setMinBurst,"button"),t.groups.smoothLineScroll=new d.default("smoothLineScroll",l.setSmoothLineScroll,"button"),t.groups.lazyMode=new d.default("lazyMode",l.setLazyMode,"button"),t.groups.layout=new d.default("layout",l.setLayout,"select"),t.groups.language=new d.default("language",l.setLanguage,"select"),t.groups.fontSize=new d.default("fontSize",l.setFontSize,"button"),t.groups.pageWidth=new d.default("pageWidth",l.setPageWidth,"button"),t.groups.caretStyle=new d.default("caretStyle",l.setCaretStyle,"button"),t.groups.paceCaretStyle=new d.default("paceCaretStyle",l.setPaceCaretStyle,"button"),t.groups.timerStyle=new d.default("timerStyle",l.setTimerStyle,"button"),t.groups.highlightMode=new d.default("highlightMode",l.setHighlightMode,"button"),t.groups.tapeMode=new d.default("tapeMode",l.setTapeMode,"button"),t.groups.timerOpacity=new d.default("timerOpacity",l.setTimerOpacity,"button"),t.groups.timerColor=new d.default("timerColor",l.setTimerColor,"button"),t.groups.fontFamily=new d.default("fontFamily",l.setFontFamily,"button",void 0,(()=>{const e=$(".pageSettings .section.fontFamily .buttons .custom");0===$(".pageSettings .section.fontFamily .buttons .active").length?(e.addClass("active"),e.text(`Custom (${u.default.fontFamily.replace(/_/g," ")})`)):e.text("Custom")})),t.groups.alwaysShowDecimalPlaces=new d.default("alwaysShowDecimalPlaces",l.setAlwaysShowDecimalPlaces,"button"),t.groups.alwaysShowCPM=new d.default("alwaysShowCPM",l.setAlwaysShowCPM,"button"),t.groups.customBackgroundSize=new d.default("customBackgroundSize",l.setCustomBackgroundSize,"button")}))}(),P=!0),I(!1),yield v.refreshButtons(),yield l.loadPromise}))}function O(){if(null==x.Auth.currentUser)$(".pageSettings .section.discordIntegration").addClass("hidden");else{if(null==f.getSnapshot())return;$(".pageSettings .section.discordIntegration").removeClass("hidden"),null==f.getSnapshot().discordId?($(".pageSettings .section.discordIntegration .buttons").removeClass("hidden"),$(".pageSettings .section.discordIntegration .info").addClass("hidden")):($(".pageSettings .section.discordIntegration .buttons").addClass("hidden"),$(".pageSettings .section.discordIntegration .info").removeClass("hidden"))}}function L(){$(".pageSettings .section.passwordAuthSettings .button").addClass("hidden"),$(".pageSettings .section.googleAuthSettings .button").addClass("hidden");const e=x.Auth.currentUser;if(!e)return;const t=e.providerData.find((e=>"password"===e.providerId)),o=e.providerData.find((e=>"google.com"===e.providerId));t?($(".pageSettings .section.passwordAuthSettings #emailPasswordAuth").removeClass("hidden"),$(".pageSettings .section.passwordAuthSettings #passPasswordAuth").removeClass("hidden")):$(".pageSettings .section.passwordAuthSettings #addPasswordAuth").removeClass("hidden"),o?($(".pageSettings .section.googleAuthSettings #removeGoogleAuth").removeClass("hidden"),t?$(".pageSettings .section.googleAuthSettings #removeGoogleAuth").removeClass("disabled"):$(".pageSettings .section.googleAuthSettings #removeGoogleAuth").addClass("disabled")):$(".pageSettings .section.googleAuthSettings #addGoogleAuth").removeClass("hidden")}function W(){$(".pageSettings .section.funbox .button").removeClass("active"),$(`.pageSettings .section.funbox .button[funbox='${u.default.funbox}']`).addClass("active")}function A(){var e;if(null!==x.Auth.currentUser&&null!==f.getSnapshot()){const t=$(".pageSettings .section.tags .tagsList").empty();null===(e=f.getSnapshot().tags)||void 0===e||e.forEach((e=>{t.append(`\n\n      <div class="buttons tag" id="${e._id}">\n        <div class="button tagButton ${e.active?"active":""}" active="${e.active}">\n          <div class="title">${e.display}</div>\n        </div>\n        <div class="clearPbButton button">\n          <i class="fas fa-crown fa-fw"></i>\n        </div>\n        <div class="editButton button">\n          <i class="fas fa-pen fa-fw"></i>\n        </div>\n        <div class="removeButton button">\n          <i class="fas fa-trash fa-fw"></i>\n        </div>\n      </div>\n\n      `)})),$(".pageSettings .section.tags").removeClass("hidden")}else $(".pageSettings .section.tags").addClass("hidden")}function B(){var e;if(null!==x.Auth.currentUser&&null!==f.getSnapshot()){const t=$(".pageSettings .section.presets .presetsList").empty();null===(e=f.getSnapshot().presets)||void 0===e||e.forEach((e=>{t.append(`\n      <div class="buttons preset" id="${e._id}">\n        <div class="button presetButton">\n          <div class="title">${e.display}</div>\n        </div>\n        <div class="editButton button">\n          <i class="fas fa-pen fa-fw"></i>\n        </div>\n        <div class="removeButton button">\n          <i class="fas fa-trash fa-fw"></i>\n        </div>\n      </div>\n      \n      `)})),$(".pageSettings .section.presets").removeClass("hidden")}else $(".pageSettings .section.presets").addClass("hidden")}function E(){Object.keys(t.groups).forEach((e=>{t.groups[e].updateInput()})),A(),B(),W(),v.updateActiveTab(!0),v.setCustomInputs(!0),O(),L(),$(".pageSettings .section.paceCaret input.customPaceCaretSpeed").val(u.default.paceCaretCustomSpeed),$(".pageSettings .section.minWpm input.customMinWpmSpeed").val(u.default.minWpmCustomSpeed),$(".pageSettings .section.minAcc input.customMinAcc").val(u.default.minAccCustom),$(".pageSettings .section.minBurst input.customMinBurst").val(u.default.minBurstCustomSpeed),u.default.autoSwitchTheme?$(".pageSettings .section.autoSwitchThemeInputs").removeClass("hidden"):$(".pageSettings .section.autoSwitchThemeInputs").addClass("hidden"),""!==u.default.customBackground?$(".pageSettings .section.customBackgroundFilter").removeClass("hidden"):$(".pageSettings .section.customBackgroundFilter").addClass("hidden")}function j(e){$(`.pageSettings .settingsGroup.${e}`).stop(!0,!0).slideToggle(250).toggleClass("slideup"),$(`.pageSettings .settingsGroup.${e}`).hasClass("slideup")?$(`.pageSettings .sectionGroupTitle[group=${e}] .fas`).stop(!0,!0).animate({deg:-90},{duration:250,step:function(e){$(this).css({transform:"rotate("+e+"deg)"})}}):$(`.pageSettings .sectionGroupTitle[group=${e}] .fas`).stop(!0,!0).animate({deg:0},{duration:250,step:function(e){$(this).css({transform:"rotate("+e+"deg)"})}})}t.fillSettingsPage=M,t.hideAccountSection=function(){$(".sectionGroupTitle[group='account']").addClass("hidden"),$(".settingsGroup.account").addClass("hidden"),$(".pageSettings .section.needsAccount").addClass("hidden")},t.updateDiscordSection=O,t.updateAuthSections=L,t.showAccountSection=function(){$(".sectionGroupTitle[group='account']").removeClass("hidden"),$(".settingsGroup.account").removeClass("hidden"),$(".pageSettings .section.needsAccount").removeClass("hidden"),A(),B(),O()},t.update=E,$(document).on("focusout",".pageSettings .section.paceCaret input.customPaceCaretSpeed",(()=>{l.setPaceCaretCustomSpeed(parseInt($(".pageSettings .section.paceCaret input.customPaceCaretSpeed").val()))})),$(document).on("click",".pageSettings .section.paceCaret .button.save",(()=>{l.setPaceCaretCustomSpeed(parseInt($(".pageSettings .section.paceCaret input.customPaceCaretSpeed").val()))})),$(document).on("focusout",".pageSettings .section.minWpm input.customMinWpmSpeed",(()=>{l.setMinWpmCustomSpeed(parseInt($(".pageSettings .section.minWpm input.customMinWpmSpeed").val()))})),$(document).on("click",".pageSettings .section.minWpm .button.save",(()=>{l.setMinWpmCustomSpeed(parseInt($(".pageSettings .section.minWpm input.customMinWpmSpeed").val()))})),$(document).on("focusout",".pageSettings .section.minAcc input.customMinAcc",(()=>{l.setMinAccCustom(parseInt($(".pageSettings .section.minAcc input.customMinAcc").val()))})),$(document).on("click",".pageSettings .section.minAcc .button.save",(()=>{l.setMinAccCustom(parseInt($(".pageSettings .section.minAcc input.customMinAcc").val()))})),$(document).on("focusout",".pageSettings .section.minBurst input.customMinBurst",(()=>{l.setMinBurstCustomSpeed(parseInt($(".pageSettings .section.minBurst input.customMinBurst").val()))})),$(document).on("click",".pageSettings .section.minBurst .button.save",(()=>{l.setMinBurstCustomSpeed(parseInt($(".pageSettings .section.minBurst input.customMinBurst").val()))})),$(document).on("click",".pageSettings .section.funbox .button",(e=>{const t=$(e.currentTarget).attr("funbox"),o=$(e.currentTarget).attr("type");h.setFunbox(t,o),W()})),$(document).on("click",".pageSettings .section.tags .tagsList .tag .tagButton",(e=>{const t=e.currentTarget,o=$(t).parent(".tag").attr("id");m.toggle(o),$(t).toggleClass("active")})),$(document).on("click",".pageSettings .section.presets .presetsList .preset .presetButton",(e=>{const t=e.currentTarget,o=$(t).parent(".preset").attr("id");console.log("Applying Preset"),R=!0,g.apply(o),R=!1,E()})),$("#importSettingsButton").on("click",(()=>{b.show("import")})),$("#exportSettingsButton").on("click",(()=>{const e=JSON.stringify(u.default);navigator.clipboard.writeText(e).then((function(){y.add("JSON Copied to clipboard",0)}),(function(){b.show("export")}))})),$(".pageSettings .sectionGroupTitle").on("click",(e=>{j($(e.currentTarget).attr("group"))})),$(".pageSettings .section.apeKeys #showApeKeysPopup").on("click",(()=>{S.show()})),$(".pageSettings .section.customBackgroundSize .inputAndButton .save").on("click",(()=>{l.setCustomBackground($(".pageSettings .section.customBackgroundSize .inputAndButton input").val())})),$(".pageSettings .section.customBackgroundSize .inputAndButton input").keypress((e=>{"Enter"===e.key&&l.setCustomBackground($(".pageSettings .section.customBackgroundSize .inputAndButton input").val())})),$(".pageSettings .section.customLayoutfluid .inputAndButton .save").on("click",(()=>{l.setCustomLayoutfluid($(".pageSettings .section.customLayoutfluid .inputAndButton input").val()).then((e=>{e&&y.add("Custom layoutfluid saved",1)}))})),$(".pageSettings .section.customLayoutfluid .inputAndButton .input").keypress((e=>{"Enter"===e.key&&l.setCustomLayoutfluid($(".pageSettings .section.customLayoutfluid .inputAndButton input").val()).then((e=>{e&&y.add("Custom layoutfluid saved",1)}))})),$(".quickNav .links a").on("click",(e=>{const t=e.target.innerText;$(`.pageSettings .settingsGroup.${t}`).hasClass("slideup")&&j(t)})),$(".pageSettings .section.updateCookiePreferences .button").on("click",(()=>{_.show(),_.showSettings()})),$(document).on("change",".pageSettings .section.autoSwitchThemeInputs select.light",(e=>{const t=$(e.currentTarget);t.hasClass("disabled")||t.hasClass("no-auto-handle")||l.setThemeLight(t.val())})),$(document).on("change",".pageSettings .section.autoSwitchThemeInputs select.dark",(e=>{const t=$(e.currentTarget);t.hasClass("disabled")||t.hasClass("no-auto-handle")||l.setThemeDark(t.val())}));let R=!1;function I(e){R=e}t.setEventDisabled=I,w.subscribe((e=>{"fullConfigChange"===e&&I(!0),"fullConfigChangeFinished"===e&&I(!1),R||"saveToLocalStorage"===e||"settings"===C.get()&&"theme"!==e&&E()})),t.page=new k.default("settings",$(".page.pageSettings"),"/settings",(()=>s(void 0,void 0,void 0,(function*(){}))),(()=>s(void 0,void 0,void 0,(function*(){T()}))),(()=>s(void 0,void 0,void 0,(function*(){yield M(),E()}))),(()=>s(void 0,void 0,void 0,(function*(){}))))},9011:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.page=void 0;const d=r(o(6705)),u=i(o(2474)),l=i(o(8673)),c=i(o(2203)),p=i(o(5513)),f=i(o(3013)),h=i(o(8059)),m=r(o(3361));t.page=new m.default("test",$(".page.pageTest"),"/",(()=>s(void 0,void 0,void 0,(function*(){f.restart(),h.clear(),p.hide(),$("#wordsInput").focusout()}))),(()=>s(void 0,void 0,void 0,(function*(){}))),(()=>s(void 0,void 0,void 0,(function*(){p.show(),u.resetIncomplete(),c.set(),f.restart(void 0,void 0,void 0,void 0,!0),h.activate(d.default.funbox)}))),(()=>s(void 0,void 0,void 0,(function*(){l.focusWords()}))))},6126:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.show=t.hide=void 0;const d=r(o(7355)),u=i(o(9817)),l=i(o(3368)),c=r(o(9546));let p={};function f(){const e=p;if(!e)return;const t=$("#apeKeysPopupWrapper table tbody");t.empty();const o=Object.keys(e);0!==o.length?o.forEach((o=>{const n=e[o];t.append(`\n      <tr keyId="${o}">\n        <td>\n          <div class="textButton">\n            ${n.enabled?'<i class="fas fa-fw fa-check-square"></i>':'<i class="far fa-fw fa-square"></i>'}\n          </div>\n        </td>\n        <td>${n.name}</td>\n        <td>${(0,c.default)(new Date(n.createdOn),"dd MMM yyyy HH:mm")}</td>\n        <td>${(0,c.default)(new Date(n.modifiedOn),"dd MMM yyyy HH:mm")}</td>\n        <td>${-1===n.lastUsedOn?"-":(0,c.default)(new Date(n.lastUsedOn),"dd MMM yyyy HH:mm")}</td>\n        <td>\n          <div class="keyButtons">\n            <div class="button edit">\n              <i class="fas fa-fw fa-pen"></i>\n            </div>\n            <div class="button delete">\n              <i class="fas fa-fw fa-trash-alt"></i>\n            </div>\n          </div>\n        </td>\n      </tr>\n    `)})):t.append("<tr><td colspan='6' style='text-align: center;'>No keys found</td></tr>")}function h(){$("#apeKeysPopupWrapper").hasClass("hidden")||$("#apeKeysPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{$("#apeKeysPopupWrapper").addClass("hidden")}))}t.hide=h,t.show=function(){return s(this,void 0,void 0,(function*(){$("#apeKeysPopupWrapper").hasClass("hidden")&&(yield function(){return s(this,void 0,void 0,(function*(){u.show();const e=yield d.default.apeKeys.get();u.hide(),200===e.status?p=e.data:l.add("Error getting ape keys: "+e.message,-1)}))}(),f(),$("#apeKeysPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},100,(()=>{$("#apeKeysPopup textarea").trigger("focus").trigger("select")})))}))},$("#apeKeysPopupWrapper").on("mousedown",(e=>{"apeKeysPopupWrapper"===$(e.target).attr("id")&&h()})),$("#apeKeysPopup .generateApeKey").on("click",(()=>{h()})),$(document).on("click","#apeKeysPopup table .keyButtons .button",(()=>{h()})),$(document).on("click","#apeKeysPopup table .textButton",(e=>s(void 0,void 0,void 0,(function*(){const t=$(e.target).closest("tr").attr("keyId"),o=null==p?void 0:p[t];if(!o||!p)return;u.show();const n=yield d.default.apeKeys.update(t,{enabled:!o.enabled});if(u.hide(),200!==n.status)return l.add("Failed to update key: "+n.message,-1);p[t].enabled=!o.enabled,f(),o.enabled?l.add("Key active",1):l.add("Key inactive",1)}))))},5153:()=>{$(document.body).on("click","#contactPopupButton, #contactPopupButton2",(()=>{$("#contactPopupWrapper").css("opacity",0).removeClass("hidden").animate({opacity:1},125)})),$(document.body).on("click","#contactPopupWrapper",(e=>{"contactPopupWrapper"===$(e.target).attr("id")&&$("#contactPopupWrapper").css("opacity",1).animate({opacity:0},125,(()=>{$("#contactPopupWrapper").addClass("hidden")}))})),$(document.body).on("keypress","#contactPopupButton, #contactPopupButton2",(e=>{"Enter"===e.key&&$(e.currentTarget).trigger("click")})),$(document).on("keydown",(e=>{"Escape"!==e.key||$("#contactPopupWrapper").hasClass("hidden")||$("#contactPopupWrapper").css("opacity",1).animate({opacity:0},125,(()=>{$("#contactPopupWrapper").addClass("hidden")}))}))},4044:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.showSettings=t.hide=t.show=t.check=void 0;const a=o(3326),i=o(8673);let s=!1;function r(e){localStorage.setItem("acceptedCookies",JSON.stringify(e))}function d(){void 0!==$("#cookiePopupWrapper")[0]?$("#cookiePopupWrapper").hasClass("hidden")&&$("#cookiePopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},100,(()=>{s=!1!==$("#cookiePopupWrapper").is(":visible")&&0!==$("#cookiePopupWrapper").outerHeight(!0)})):s=!1}function u(){return n(this,void 0,void 0,(function*(){$("#cookiePopupWrapper").hasClass("hidden")||((0,i.focusWords)(),$("#cookiePopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{$("#cookiePopupWrapper").addClass("hidden"),s=!1})))}))}function l(){$("#cookiePopup .main").addClass("hidden"),$("#cookiePopup .settings").removeClass("hidden")}t.check=function(){null===function(){const e=localStorage.getItem("acceptedCookies");return e?JSON.parse(e):null}()&&d()},t.show=d,t.hide=u,t.showSettings=l,$("#cookiePopup .acceptAll").on("click",(()=>{r({security:!0,analytics:!0}),(0,a.activateAnalytics)(),u()})),$("#cookiePopup .acceptSelected").on("click",(()=>{const e=$("#cookiePopup .cookie.analytics input").prop("checked");r({security:!0,analytics:e}),u(),!0===e&&(0,a.activateAnalytics)()})),$("#cookiePopup .openSettings").on("click",(()=>{l()})),$(document).on("keypress",(e=>{s&&e.preventDefault()}))},3603:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=void 0;const s=i(o(6705)),r=i(o(2203)),d=i(o(3013)),u=i(o(3368));function l(e){const t=[...e.toLowerCase().matchAll(/((-\s*)?\d+(\.\d+)?\s*[hms]?)/g)].map((e=>{const t=e[0],o=parseFloat(t.replace(/\s+/g,""));return t.includes("h")?3600*o:t.includes("m")?60*o:o})).reduce(((e,t)=>e+t),0);return Math.floor(t)}function c(){const e=l($("#customTestDurationPopup input").val());let t="";t=e<0?"NEGATIVE TIME":0==e?"Infinite test":"Total time: "+function(e){const t=Math.floor(e/3600),o=Math.floor(e%3600/60),n=e%3600%60,a=[];return t>0&&a.push(`${t} hour${1===t?"":"s"}`),o>0&&a.push(`${o} minute${1===o?"":"s"}`),n>0&&a.push(`${n} second${1===n?"":"s"}`),3===a.length?`${a[0]}, ${a[1]} and ${a[2]}`:2===a.length?`${a[0]} and ${a[1]}`:`${a[0]}`}(e),$("#customTestDurationPopup .preview").text(t)}function p(){$("#customTestDurationPopupWrapper").hasClass("hidden")&&$("#customTestDurationPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},100,(()=>{$("#customTestDurationPopup input").trigger("focus").trigger("select")})),c()}function f(){$("#customTestDurationPopupWrapper").hasClass("hidden")||$("#customTestDurationPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{$("#customTestDurationPopupWrapper").addClass("hidden")}))}function h(){const e=l($("#customTestDurationPopup input").val());null!==e&&!isNaN(e)&&e>=0?(s.setTimeConfig(e),r.set(),d.restart(),e>=1800?u.add("Stay safe and take breaks!",0):0==e&&u.add("Infinite time! Make sure to use Bail Out from the command line to save your result.",0,7)):u.add("Custom time must be at least 1",0),f()}t.show=p,t.hide=f,$("#customTestDurationPopupWrapper").on("click",(e=>{"customTestDurationPopupWrapper"===$(e.target).attr("id")&&f()})),$("#customTestDurationPopup input").keyup((e=>{c(),"Enter"===e.key&&h()})),$("#customTestDurationPopup .button").on("click",(()=>{h()})),$(document).on("click","#top .config .time .textButton",(e=>{"custom"==$(e.currentTarget).attr("timeConfig")&&p()})),$(document).on("keydown",(e=>{"Escape"!==e.key||$("#customTestDurationPopupWrapper").hasClass("hidden")||(f(),e.preventDefault())}))},2786:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.isVisible=t.hide=t.show=void 0;const s=i(o(8248)),r=i(o(2203)),d=i(o(3013)),u=i(o(7567)),l=i(o(6705)),c=l,p=i(o(3388)),f=i(o(9231)),h=i(o(3368)),m=i(o(5177)),g="#customTextPopupWrapper",v="#customTextPopup";function y(){$(g).hasClass("hidden")&&($(`${v} .checkbox input`).prop("checked")?$(`${v} .inputs .randomInputFields`).removeClass("hidden"):$(`${v} .inputs .randomInputFields`).addClass("hidden"),$(g).stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},100,(()=>{let e=s.text.join(s.delimiter);e=e.replace(/\n /g,"\n"),$(`${v} textarea`).val(e),$(`${v} .wordcount input`).val(-1===s.word?"":s.word),$(`${v} .time input`).val(-1===s.time?"":s.time),$(`${v} textarea`).trigger("focus")}))),setTimeout((()=>{$(`${v} textarea`).trigger("focus")}),150)}function b(){$(g).hasClass("hidden")||$(g).stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{$(g).addClass("hidden")}))}t.show=y,$(`${v} .delimiterCheck input`).on("change",(()=>{let e;if(e=$(`${v} .delimiterCheck input`).prop("checked")?"|":" ",$(`${v} textarea`).val()!=s.text.join(s.delimiter)){let t=$(`${v} textarea`).val().split(s.delimiter).join(e);t=t.replace(/\n /g,"\n"),$(`${v} textarea`).val(t)}else{let t=s.text.join(e);t=t.replace(/\n /g,"\n"),$(`${v} textarea`).val(t)}s.setDelimiter(e)})),t.hide=b,t.isVisible=function(){return!$(g).hasClass("hidden")},$(g).on("mousedown",(e=>{"customTextPopupWrapper"===$(e.target).attr("id")&&b()})),$(`${v} .inputs .checkbox input`).on("change",(()=>{$(`${v} .checkbox input`).prop("checked")?$(`${v} .inputs .randomInputFields`).removeClass("hidden"):$(`${v} .inputs .randomInputFields`).addClass("hidden")})),$(`${v} textarea`).on("keypress",(e=>{"Enter"===e.code&&e.ctrlKey&&$(`${v} .button.apply`).trigger("click")})),$(`${v} .randomInputFields .wordcount input`).on("keypress",(()=>{$(`${v} .randomInputFields .time input`).val("")})),$(`${v} .randomInputFields .time input`).on("keypress",(()=>{$(`${v} .randomInputFields .wordcount input`).val("")})),$(`${v} .buttonsTop .showSavedTexts`).on("click",(()=>{m.show()})),$(`${v} .buttonsTop .saveCustomText`).on("click",(()=>{b()})),$(document).on("click",`${v} .button.apply`,(()=>{!function(){let e=$(`${v} textarea`).val().normalize();e=e.trim(),e=e.replace(/\\\\t/gm,"\t"),e=e.replace(/\\\\n/gm,"\n"),e=e.replace(/\\t/gm,"\t"),e=e.replace(/\\n/gm,"\n"),e=e.replace(/ +/gm," "),e=e.replace(/( *(\r\n|\r|\n) *)/g,"\n "),$(`${v} .typographyCheck input`).prop("checked")&&(e=p.cleanTypographySymbols(e)),e=e.replace(/[\u2060]/g,""),s.setText(e.split(s.delimiter)),s.setWord(parseInt($(`${v} .wordcount input`).val())||-1),s.setTime(parseInt($(`${v} .time input`).val())||-1),s.setIsWordRandom($(`${v} .checkbox input`).prop("checked")&&s.word>-1),s.setIsTimeRandom($(`${v} .checkbox input`).prop("checked")&&s.time>-1),!$(`${v} .checkbox input`).prop("checked")||s.isTimeRandom||s.isWordRandom?$(`${v} .checkbox input`).prop("checked")&&s.isTimeRandom&&s.isWordRandom?h.add("You need to pick between word count or time in seconds to start a random custom test",0,5):((s.isWordRandom&&0===s.word||s.isTimeRandom&&0===s.time)&&h.add("Infinite words! Make sure to use Bail Out from the command line to save your result.",0,7),u.clearActive(),r.set(),"custom"!==l.default.mode&&c.setMode("custom"),d.restart(),b()):h.add("You need to specify word count or time in seconds to start a random custom test",0,5)}()})),$(document).on("click",`${v} .wordfilter`,(()=>{f.show()})),$(document).on("click","#top .config .customText .textButton",(()=>{y()})),$(document).on("keydown",(e=>{"Escape"!==e.key||$("#customTextPopupWrapper").hasClass("hidden")||(b(),e.preventDefault())}))},8628:(e,t)=>{function o(){$("#customThemeShareWrapper").hasClass("hidden")||($("#customThemeShareWrapper input").val(""),$("#customThemeShareWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{$("#customThemeShareWrapper").addClass("hidden")})))}Object.defineProperty(t,"__esModule",{value:!0}),t.show=void 0,t.show=function(e){$("#customThemeShareWrapper").hasClass("hidden")&&($("#customThemeShareWrapper input").val(e),$("#customThemeShareWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},100,(()=>{$("#customThemeShare input").trigger("focus"),$("#customThemeShare input").trigger("select"),$("#customThemeShare input").trigger("focus")})))},$("#customThemeShareWrapper").on("click",(e=>{"customThemeShareWrapper"===$(e.target).attr("id")&&o()})),$("#customThemeShare .button").on("click",(()=>{o()}))},6021:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=void 0;const s=i(o(6705)),r=i(o(2203)),d=i(o(3013)),u=i(o(3368));function l(){$("#customWordAmountPopupWrapper").hasClass("hidden")&&$("#customWordAmountPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},100,(()=>{$("#customWordAmountPopup input").trigger("focus").trigger("select")}))}function c(){$("#customWordAmountPopupWrapper").hasClass("hidden")||$("#customWordAmountPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{$("#customWordAmountPopupWrapper").addClass("hidden")}))}function p(){const e=parseInt($("#customWordAmountPopup input").val());null!==e&&!isNaN(e)&&e>=0?(s.setWordCount(e),r.set(),d.restart(),e>2e3?u.add("Stay safe and take breaks!",0):0==e&&u.add("Infinite words! Make sure to use Bail Out from the command line to save your result.",0,7)):u.add("Custom word amount must be at least 1",0),c()}t.show=l,t.hide=c,$("#customWordAmountPopupWrapper").on("click",(e=>{"customWordAmountPopupWrapper"===$(e.target).attr("id")&&c()})),$("#customWordAmountPopup input").on("keypress",(e=>{"Enter"===e.key&&p()})),$("#customWordAmountPopup .button").on("click",(()=>{p()})),$(document).on("click","#top .config .wordCount .textButton",(e=>{"custom"==$(e.currentTarget).attr("wordCount")&&l()})),$(document).on("keydown",(e=>{"Escape"!==e.key||$("#customWordAmountPopupWrapper").hasClass("hidden")||(c(),e.preventDefault())}))},2845:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.show=void 0;const d=r(o(7355)),u=i(o(6350)),l=i(o(6705)),c=i(o(9817)),p=i(o(8835)),f=i(o(3368));function h(e,t,o){"add"===e?($("#presetWrapper #presetEdit").attr("action","add"),$("#presetWrapper #presetEdit .title").html("Add new preset"),$("#presetWrapper #presetEdit .button").html("add"),$("#presetWrapper #presetEdit input.text").val(""),$("#presetWrapper #presetEdit input.text").removeClass("hidden"),$("#presetWrapper #presetEdit label").addClass("hidden")):"edit"===e&&t&&o?($("#presetWrapper #presetEdit").attr("action","edit"),$("#presetWrapper #presetEdit").attr("presetid",t),$("#presetWrapper #presetEdit .title").html("Edit preset"),$("#presetWrapper #presetEdit .button").html("edit"),$("#presetWrapper #presetEdit input.text").val(o),$("#presetWrapper #presetEdit input.text").removeClass("hidden"),$("#presetWrapper #presetEdit label input").prop("checked",!1),$("#presetWrapper #presetEdit label").removeClass("hidden")):"remove"===e&&t&&($("#presetWrapper #presetEdit").attr("action","remove"),$("#presetWrapper #presetEdit").attr("presetid",t),$("#presetWrapper #presetEdit .title").html("Delete preset "+o),$("#presetWrapper #presetEdit .button").html("Delete"),$("#presetWrapper #presetEdit input.text").addClass("hidden"),$("#presetWrapper #presetEdit label").addClass("hidden")),$("#presetWrapper").hasClass("hidden")&&$("#presetWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},100,(()=>{$("#presetWrapper #presetEdit input").trigger("focus")}))}function m(){$("#presetWrapper").hasClass("hidden")||($("#presetWrapper #presetEdit").attr("action",""),$("#presetWrapper #presetEdit").attr("tagid",""),$("#presetWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{$("#presetWrapper").addClass("hidden")})))}function g(){return s(this,void 0,void 0,(function*(){const e=$("#presetWrapper #presetEdit").attr("action"),t=$("#presetWrapper #presetEdit input").val(),o=t.replaceAll(" ","_"),n=$("#presetWrapper #presetEdit").attr("presetId"),a=$("#presetWrapper #presetEdit label input").prop("checked");let i={};if(a&&"edit"===e||"add"===e){i=l.getConfigChanges();const e=(u.getSnapshot().tags||[]).filter((e=>e.active)).map((e=>e._id));i.tags=e}const s=u.getSnapshot().presets||[];if(m(),c.show(),"add"===e){const e=yield d.default.presets.add(o,i);200!==e.status?f.add("Failed to add preset: "+e.message.replace(o,t),-1):(f.add("Preset added",1,2),s.push({name:o,config:i,display:t,_id:e.data.presetId}))}else if("edit"===e){const e=yield d.default.presets.edit(n,o,i);if(200!==e.status)f.add("Failed to edit preset: "+e.message,-1);else{f.add("Preset updated",1);const e=s.filter((e=>e._id===n))[0];e.name=o,a&&(e.config=i)}}else if("remove"===e){const e=yield d.default.presets.delete(n);200!==e.status?f.add("Failed to remove preset: "+e.message,-1):(f.add("Preset removed",1),s.forEach(((e,t)=>{e._id===n&&s.splice(t,1)})))}p.update(),c.hide()}))}t.show=h,$("#presetWrapper").on("click",(e=>{"presetWrapper"===$(e.target).attr("id")&&m()})),$("#presetWrapper #presetEdit .button").on("click",(()=>{g()})),$("#presetWrapper #presetEdit input").on("keypress",(e=>{"Enter"===e.key&&g()})),$(document).on("click",".pageSettings .section.presets .addPresetButton",(()=>{h("add")})),$(document).on("click",".pageSettings .section.presets .editButton",(e=>{h("edit",$(e.currentTarget).parent(".preset").attr("id"),$(e.currentTarget).siblings(".button").children(".title").text())})),$(document).on("click",".pageSettings .section.presets .removeButton",(e=>{h("remove",$(e.currentTarget).parent(".preset").attr("id"),$(e.currentTarget).siblings(".button").children(".title").text())}))},8281:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=void 0;const d=r(o(7355)),u=o(7401),l=i(o(6350)),c=i(o(9817)),p=i(o(3368));let f=null;function h(){$("#editProfilePopupWrapper").hasClass("hidden")||(f&&f(),$("#editProfilePopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{$("#editProfilePopupWrapper").addClass("hidden")})))}t.show=function(e){$("#editProfilePopupWrapper").hasClass("hidden")&&(f=e,$("#editProfilePopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},100,(()=>{!function(){var e,t,o,n,a,i;const s=l.getSnapshot(),r=null!==(t=null===(e=s.inventory)||void 0===e?void 0:e.badges)&&void 0!==t?t:[],{bio:d,keyboard:c,socialProfiles:p}=null!==(o=s.details)&&void 0!==o?o:{};C=-1,m.val(null!=d?d:""),g.val(null!=c?c:""),v.val(null!==(n=null==p?void 0:p.twitter)&&void 0!==n?n:""),y.val(null!==(a=null==p?void 0:p.github)&&void 0!==a?a:""),b.val(null!==(i=null==p?void 0:p.website)&&void 0!==i?i:""),w.html(""),null==r||r.forEach((e=>{e.selected&&(C=e.id);const t=(0,u.getHTMLById)(e.id,!1,!0),o=`<div class="badgeSelectionItem ${e.selected?"selected":""}" selection-id=${e.id}>${t}</div>`;w.append(o)})),w.prepend(`<div class="badgeSelectionItem ${-1===C?"selected":""}" selection-id=-1>\n      <div class="badge">\n        <i class="fas fa-frown-open"></i>\n        <div class="text">none</div>\n      </div>\n    </div>`),$(".badgeSelectionItem").on("click",(({currentTarget:e})=>{const t=$(e).attr("selection-id");C=parseInt(t,10),w.find(".badgeSelectionItem").removeClass("selected"),$(e).addClass("selected")}))}()})))},t.hide=h;const m=$("#editProfilePopup .bio"),g=$("#editProfilePopup .keyboard"),v=$("#editProfilePopup .twitter"),y=$("#editProfilePopup .github"),b=$("#editProfilePopup .website"),w=$("#editProfilePopup .badgeSelectionContainer");let C=-1;$("#editProfilePopupWrapper").on("click",(e=>{"editProfilePopupWrapper"===$(e.target).attr("id")&&h()})),$("#editProfilePopup .edit-profile-submit").on("click",(()=>s(void 0,void 0,void 0,(function*(){yield function(){var e;return s(this,void 0,void 0,(function*(){const t=function(){var e,t,o,n,a;return{bio:null!==(e=m.val())&&void 0!==e?e:"",keyboard:null!==(t=g.val())&&void 0!==t?t:"",socialProfiles:{twitter:null!==(o=v.val())&&void 0!==o?o:"",github:null!==(n=y.val())&&void 0!==n?n:"",website:null!==(a=b.val())&&void 0!==a?a:""}}}();c.show();const o=yield d.default.users.updateProfile(t,C);if(c.hide(),200!==o.status)return void p.add("Failed to update profile: "+o.message,-1);const n=l.getSnapshot();n.details=t,null===(e=n.inventory)||void 0===e||e.badges.forEach((e=>{e.id===C?e.selected=!0:delete e.selected})),p.add("Profile updated",1),h()}))}()})))),$(document).on("keydown",(e=>{"Escape"!==e.key||$("#editProfilePopupWrapper").hasClass("hidden")||(h(),e.preventDefault())}))},7841:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.show=void 0;const d=r(o(7355)),u=i(o(1329)),l=i(o(6350)),c=i(o(3368)),p=i(o(9817)),f=i(o(8835)),h=i(o(3875));function m(e,t,o){"add"===e?($("#tagsWrapper #tagsEdit").attr("action","add"),$("#tagsWrapper #tagsEdit .title").html("Add new tag"),$("#tagsWrapper #tagsEdit .button").html("add"),$("#tagsWrapper #tagsEdit input").val(""),$("#tagsWrapper #tagsEdit input").removeClass("hidden")):"edit"===e&&t&&o?($("#tagsWrapper #tagsEdit").attr("action","edit"),$("#tagsWrapper #tagsEdit").attr("tagid",t),$("#tagsWrapper #tagsEdit .title").html("Edit tag name"),$("#tagsWrapper #tagsEdit .button").html("edit"),$("#tagsWrapper #tagsEdit input").val(o),$("#tagsWrapper #tagsEdit input").removeClass("hidden")):"remove"===e&&t&&o?($("#tagsWrapper #tagsEdit").attr("action","remove"),$("#tagsWrapper #tagsEdit").attr("tagid",t),$("#tagsWrapper #tagsEdit .title").html("Delete tag "+o),$("#tagsWrapper #tagsEdit .button").html("delete"),$("#tagsWrapper #tagsEdit input").addClass("hidden")):"clearPb"===e&&t&&o&&($("#tagsWrapper #tagsEdit").attr("action","clearPb"),$("#tagsWrapper #tagsEdit").attr("tagid",t),$("#tagsWrapper #tagsEdit .title").html("Clear PB for tag "+o),$("#tagsWrapper #tagsEdit .button").html("clear"),$("#tagsWrapper #tagsEdit input").addClass("hidden")),$("#tagsWrapper").hasClass("hidden")&&$("#tagsWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},100,(()=>{$("#tagsWrapper #tagsEdit input").trigger("focus")}))}function g(){$("#tagsWrapper").hasClass("hidden")||($("#tagsWrapper #tagsEdit").attr("action",""),$("#tagsWrapper #tagsEdit").attr("tagid",""),$("#tagsWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{$("#tagsWrapper").addClass("hidden")})))}function v(){var e,t,o,n;return s(this,void 0,void 0,(function*(){const a=$("#tagsWrapper #tagsEdit").attr("action"),i=$("#tagsWrapper #tagsEdit input").val(),s=i.replaceAll(" ","_"),r=$("#tagsWrapper #tagsEdit").attr("tagid");if(g(),p.show(),"add"===a){const t=yield d.default.users.createTag(s);200!==t.status?c.add("Failed to add tag: "+t.message.replace(s,i),-1):(c.add("Tag added",1),null===(e=l.getSnapshot().tags)||void 0===e||e.push({display:i,name:t.data.name,_id:t.data._id}),h.updateButtons(),f.update(),u.updateTags())}else if("edit"===a){const e=yield d.default.users.editTag(r,s);200!==e.status?c.add("Failed to edit tag: "+e.message,-1):(c.add("Tag updated",1),null===(t=l.getSnapshot().tags)||void 0===t||t.forEach((e=>{e._id===r&&(e.name=s,e.display=i)})),h.updateButtons(),f.update(),u.updateTags())}else if("remove"===a){const e=yield d.default.users.deleteTag(r);200!==e.status?c.add("Failed to remove tag: "+e.message,-1):(c.add("Tag removed",1),null===(o=l.getSnapshot().tags)||void 0===o||o.forEach(((e,t)=>{var o;e._id===r&&(null===(o=l.getSnapshot().tags)||void 0===o||o.splice(t,1))})),h.updateButtons(),f.update(),u.updateTags())}else if("clearPb"===a){const e=yield d.default.users.deleteTagPersonalBest(r);200!==e.status?c.add("Failed to clear tag pb: "+e.message,-1):(c.add("Tag PB cleared",1),null===(n=l.getSnapshot().tags)||void 0===n||n.forEach((e=>{e._id===r&&(e.personalBests={time:{},words:{},custom:{custom:[]},zen:{zen:[]},quote:{custom:[]}})})),h.updateButtons(),f.update(),u.updateTags())}p.hide()}))}t.show=m,$("#tagsWrapper").on("click",(e=>{"tagsWrapper"===$(e.target).attr("id")&&g()})),$("#tagsWrapper #tagsEdit .button").on("click",(()=>{v()})),$("#tagsWrapper #tagsEdit input").on("keypress",(e=>{"Enter"===e.key&&v()})),$(document).on("click",".pageSettings .section.tags .addTagButton",(()=>{m("add")})),$(document).on("click",".pageSettings .section.tags .tagsList .tag .editButton",(e=>{m("edit",$(e.currentTarget).parent(".tag").attr("id"),$(e.currentTarget).siblings(".tagButton").children(".title").text())})),$(document).on("click",".pageSettings .section.tags .tagsList .tag .clearPbButton",(e=>{m("clearPb",$(e.currentTarget).parent(".tag").attr("id"),$(e.currentTarget).siblings(".tagButton").children(".title").text())})),$(document).on("click",".pageSettings .section.tags .tagsList .tag .removeButton",(e=>{m("remove",$(e.currentTarget).parent(".tag").attr("id"),$(e.currentTarget).siblings(".tagButton").children(".title").text())}))},5764:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=void 0;const d=i(o(3368)),u=o(2189),l=o(2974),c=r(o(7355)),p=o(3388),f=i(o(2588)),h=i(o(2681)),m=i(o(4674)),g=i(o(3013)),v=i(o(6350)),y=i(o(9817)),b=o(5701),w=o(5817);let C;function S(e){$("#googleSignUpPopupWrapper").hasClass("hidden")&&($("#googleSignUpPopup input").prop("disabled",!1),x(),C=e,$("#googleSignUpPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},100,(()=>{$("#googleSignUpPopup input").trigger("focus").trigger("select")})))}function _(){var e;return s(this,void 0,void 0,(function*(){$("#googleSignUpPopupWrapper").hasClass("hidden")||(void 0!==C&&(d.add("Sign up process canceled",0,5),f.hidePreloader(),f.enableInputs(),C&&(null===(e=(0,l.getAdditionalUserInfo)(C))||void 0===e?void 0:e.isNewUser)&&(c.default.users.delete(),C.user.delete()),m.signOut(),C=void 0),$("#googleSignUpPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{$("#googleSignUpPopupWrapper").addClass("hidden")})))}))}function k(){var e;return s(this,void 0,void 0,(function*(){if($("#googleSignUpPopup .button").hasClass("disabled"))return;if($("#googleSignUpPopup input").prop("disabled",!0),x(),!C)return d.add("Missing user credential. Please close the popup and try again.",-1);y.show();const t=$("#googleSignUpPopup input").val();try{if(0===t.length)throw new Error("Name cannot be empty");const e=yield c.default.users.create(t);if(200!==e.status)throw e;if(200===e.status){if(yield(0,l.updateProfile)(C.user,{displayName:t}),yield(0,l.sendEmailVerification)(C.user),h.clear(),d.add("Account created",1,3),$("#menu .textButton.account .text").text(t),f.enableInputs(),f.hidePreloader(),yield m.loadUser(C.user),null!==g.notSignedInLastResult&&(g.setNotSignedInUid(C.user.uid),200===(yield c.default.results.save(g.notSignedInLastResult)).status)){const e=g.notSignedInLastResult;v.saveLocalResult(e),v.updateLocalStats(1,e.testDuration+e.incompleteTestSeconds-e.afkDuration)}C=void 0,y.hide(),_()}}catch(t){console.log(t);const o=(0,p.createErrorMessage)(t,"Failed to sign in with Google");return d.add(o,-1),f.hidePreloader(),f.enableInputs(),C&&(null===(e=(0,l.getAdditionalUserInfo)(C))||void 0===e?void 0:e.isNewUser)&&(yield c.default.users.delete(),yield C.user.delete()),m.signOut(),C=void 0,_(),void y.hide()}}))}function x(){$("#googleSignUpPopup .button").addClass("disabled")}t.show=S,t.hide=_,$("#googleSignUpPopupWrapper").on("mousedown",(e=>{"googleSignUpPopupWrapper"===$(e.target).attr("id")&&_()}));const T=new w.InputIndicator($("#googleSignUpPopup input"),{available:{icon:"fa-check",level:1},unavailable:{icon:"fa-times",level:-1},taken:{icon:"fa-times",level:-1},checking:{icon:"fa-circle-notch",spinIcon:!0,level:0}}),P=(0,u.debounce)(1e3,(()=>s(void 0,void 0,void 0,(function*(){const e=$("#googleSignUpPopup input").val();if(!e)return;const t=yield c.default.users.getNameAvailability(e);if(200===t.status)return T.show("available",t.message),void $("#googleSignUpPopup .button").removeClass("disabled");if(422!=t.status){if(409!=t.status)return 200!==t.status?(T.show("unavailable"),d.add("Failed to check name availability: "+t.message,-1)):void 0;T.show("taken",t.message)}else T.show("unavailable",t.message)}))));$("#googleSignUpPopup input").on("input",(()=>{setTimeout((()=>{if(x(),""===$("#googleSignUpPopup input").val())return T.hide();T.show("checking"),P()}),1)})),$("#googleSignUpPopup input").on("keypress",(e=>{"Enter"===e.key&&k()})),$("#googleSignUpPopup .button").on("click",(()=>{k()})),$(document).on("keydown",(e=>{"Escape"!==e.key||$("#googleSignUpPopupWrapper").hasClass("hidden")||(_(),e.preventDefault())})),(0,b.subscribe)(((e,t)=>{e&&t&&S(e)}))},9516:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.show=void 0;const s=i(o(6705)),r=i(o(3368));function d(){if(!$("#settingsImportWrapper").hasClass("hidden")){if(""!==$("#settingsImportWrapper input").val()){try{s.apply(JSON.parse($("#settingsImportWrapper input").val()))}catch(e){r.add("An error occured while importing settings: "+e,-1)}s.saveFullConfigToLocalStorage()}$("#settingsImportWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{$("#settingsImportWrapper").addClass("hidden")}))}}t.show=function(e,t){$("#settingsImportWrapper").hasClass("hidden")&&($("#settingsImportWrapper").attr("mode",e),"export"===e?($("#settingsImportWrapper .button").addClass("hidden"),$("#settingsImportWrapper input").val(null!=t?t:"")):"import"===e&&$("#settingsImportWrapper .button").removeClass("hidden"),$("#settingsImportWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},100,(()=>{$("#settingsImportWrapper input").trigger("focus"),$("#settingsImportWrapper input").trigger("select"),$("#settingsImportWrapper input").trigger("focus")})))},$("#settingsImport .button").on("click",(()=>{d()})),$("#settingsImportWrapper").on("click",(e=>{"settingsImportWrapper"===$(e.target).attr("id")&&d()}))},4611:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.update=void 0;const r=i(o(3013)),d=s(o(6705)),u=i(o(6705)),l=i(o(2203)),c=i(o(6021)),p=i(o(3603)),f=i(o(2338)),h=i(o(2786)),m=i(o(1446)),g=$("#mobileTestConfigPopup");function v(){g.find(".button").removeClass("active"),g.find(`.modeGroup .button[mode='${d.default.mode}']`).addClass("active"),g.find(".timeGroup").addClass("hidden"),g.find(".wordsGroup").addClass("hidden"),g.find(".quoteGroup").addClass("hidden"),g.find(".customGroup").addClass("hidden"),g.find(`.${d.default.mode}Group`).removeClass("hidden"),d.default.punctuation?g.find(".punctuation").addClass("active"):g.find(".punctuation").removeClass("active"),d.default.numbers?g.find(".numbers").addClass("active"):g.find(".numbers").removeClass("active"),"time"===d.default.mode?(g.find(`.timeGroup .button[time='${d.default.time}']`).addClass("active"),g.find(".punctuation").removeClass("disabled"),g.find(".numbers").removeClass("disabled")):"words"===d.default.mode?(g.find(`.wordsGroup .button[words='${d.default.words}']`).addClass("active"),g.find(".punctuation").removeClass("disabled"),g.find(".numbers").removeClass("disabled")):"quote"===d.default.mode?(g.find(`.quoteGroup .button[quote='${d.default.quoteLength}']`).addClass("active"),g.find(".punctuation").addClass("disabled"),g.find(".numbers").addClass("disabled")):"zen"===d.default.mode?(g.find(".punctuation").addClass("disabled"),g.find(".numbers").addClass("disabled")):"custom"===d.default.mode&&(g.find(".punctuation").removeClass("disabled"),g.find(".numbers").removeClass("disabled"))}function y(){$("#mobileTestConfigPopupWrapper").hasClass("hidden")||$("#mobileTestConfigPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{$("#mobileTestConfigPopupWrapper").addClass("hidden")}))}t.update=v,$("#mobileTestConfigPopupWrapper").on("click",(e=>{"mobileTestConfigPopupWrapper"===$(e.target).attr("id")&&y()})),$("#top .mobileConfig").on("click",(()=>{$("#mobileTestConfigPopupWrapper").hasClass("hidden")&&(v(),$("#mobileTestConfigPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},100))})),g.find(".wordsGroup .button").on("click",(e=>{const t=$(e.currentTarget).attr("words");if("custom"==t)y(),c.show();else if(void 0!==t){const e=parseInt(t);u.setWordCount(e),l.set(),r.restart()}})),g.find(".timeGroup .button").on("click",(e=>{const t=$(e.currentTarget).attr("time");if("custom"==t)y(),p.show();else if(void 0!==t){const e=parseInt(t);u.setTimeConfig(e),l.set(),r.restart()}})),g.find(".quoteGroup .button").on("click",(e=>{var t;let o=null!==(t=parseInt($(e.currentTarget).attr("quote"),10))&&void 0!==t?t:0;-2==o?(y(),f.show()):(-1==o&&(o=[0,1,2,3]),u.setQuoteLength(o,!1,e.shiftKey),l.set(),r.restart())})),g.find(".customChange").on("click",(()=>{y(),h.show()})),g.find(".punctuation").on("click",(()=>{u.setPunctuation(!d.default.punctuation),l.set(),r.restart()})),g.find(".numbers").on("click",(()=>{u.setNumbers(!d.default.numbers),l.set(),r.restart()})),g.find(".modeGroup .button").on("click",(e=>{if($(e.currentTarget).hasClass("active"))return;const t=$(e.currentTarget).attr("mode");u.setMode(t),l.set(),r.restart()})),$("#mobileTestConfigPopup .button").on("click",(()=>{v()})),m.subscribe((e=>{"mode"===e&&v()}))},2710:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.showNewResultFilterPresetPopup=t.hide=t.show=void 0;let o=null;function n(){$("#newResultFilterPresetPopupWrapper").hasClass("hidden")&&$("#newResultFilterPresetPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},100,(()=>{$("#newResultFilterPresetPopup input").trigger("focus").trigger("select")}))}function a(){$("#newResultFilterPresetPopupWrapper").hasClass("hidden")||$("#newResultFilterPresetPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{$("#newResultFilterPresetPopupWrapper").addClass("hidden")}))}function i(){const e=$("#newResultFilterPresetPopup input").val();o&&o(e),a()}t.show=n,t.hide=a,$("#newResultFilterPresetPopupWrapper").on("click",(e=>{"newResultFilterPresetPopupWrapper"===$(e.target).attr("id")&&a()})),$("#newResultFilterPresetPopup input").on("keypress",(e=>{"Enter"===e.key&&i()})),$("#newResultFilterPresetPopup .button").on("click",(()=>{i()})),t.showNewResultFilterPresetPopup=function(e){o=e,n()},$(document).on("keydown",(e=>{"Escape"!==e.key||$("#newResultFilterPresetPopupWrapper").hasClass("hidden")||(a(),e.preventDefault())}))},6327:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(o(6350)),d=s(o(9546));function u(e){$("#pbTablesPopupWrapper").hasClass("hidden")&&(function(e){$("#pbTablesPopup table tbody").empty(),$($("#pbTablesPopup table thead tr td")[0]).text(e);const t=r.getSnapshot(),o=void 0===t.personalBests?void 0:t.personalBests[e];if(void 0===o)return;const n=[];let a;Object.keys(o).forEach((function(e){let t=o[e];t=t.sort((function(e,t){return t.wpm-e.wpm})),t.forEach((function(t){t.mode2=e,n.push(t)}))})),n.forEach((e=>{let t='-<br><span class="sub">-</span>';const o=new Date(e.timestamp);e.timestamp&&(t=(0,d.default)(o,"dd MMM yyyy")+"<br><div class='sub'>"+(0,d.default)(o,"HH:mm")+"</div>"),$("#pbTablesPopup table tbody").append(`\n      <tr>\n        <td>${a===e.mode2?"":e.mode2}</td>\n        <td>\n          ${e.wpm}\n          <br />\n          <span class="sub">${e.acc?e.acc+"%":"-"}</span>\n        </td>\n        <td>\n          ${e.raw?e.raw:"-"}\n          <br />\n          <span class="sub">${e.consistency?e.consistency+"%":"-"}</span>\n        </td>\n        <td>${e.difficulty}</td>\n        <td>${e.language?e.language.replace(/_/g," "):"-"}</td>\n        <td>${e.punctuation?'<i class="fas fa-check"></i>':""}</td>\n        <td>${e.lazyMode?'<i class="fas fa-check"></i>':""}</td>\n        <td>${t}</td>\n      </tr>\n    `),a=e.mode2}))}(e),$("#pbTablesPopup .title").text(`All ${e} personal bests`),$("#pbTablesPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},100))}$("#pbTablesPopupWrapper").on("click",(e=>{"pbTablesPopupWrapper"===$(e.target).attr("id")&&($("#pbTablesPopupWrapper").hasClass("hidden")||$("#pbTablesPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{$("#pbTablesPopupWrapper").addClass("hidden"),$("#pbTablesPopup table tbody").empty()})))})),$(document).on("click",".pageAccount .profile .pbsTime .showAllButton",(()=>{u("time")})),$(document).on("click",".pageAccount .profile .pbsWords .showAllButton",(()=>{u("words")}))},4571:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=void 0;const d=r(o(7355)),u=i(o(9817)),l=i(o(3368)),c=r(o(9546));let p=[];function f(){$("#quoteApprovePopupWrapper .quotes").empty(),p.forEach(((e,t)=>{const o=$(`\n      <div class="quote" id="${t}" dbid="${e._id}">\n        <textarea class="text">${e.text}</textarea>\n        <input type="text" class="source" placeholder="Source" value="${e.source}">\n        <div class="buttons">\n          <div class="textButton disabled undo" aria-label="Undo changes" data-balloon-pos="left"><i class="fas fa-fw fa-undo-alt"></i></div>\n          <div class="textButton refuse" aria-label="Refuse quote" data-balloon-pos="left"><i class="fas fa-fw fa-times"></i></div>\n          <div class="textButton approve" aria-label="Approve quote" data-balloon-pos="left"><i class="fas fa-fw fa-check"></i></div>\n          <div class="textButton edit hidden" aria-label="Edit and approve quote" data-balloon-pos="left"><i class="fas fa-fw fa-pen"></i></div>\n        </div>\n        <div class="bottom">\n          <div class="length ${e.text.length<60?"red":""}">Quote length: ${e.text.length}</div>\n          <div class="language">Language: ${e.language}</div>\n          <div class="timestamp">Submitted on: ${(0,c.default)(new Date(e.timestamp),"dd MMM yyyy HH:mm")}</div>\n        </div>\n      </div>\n    `);$("#quoteApprovePopupWrapper .quotes").append(o)}))}function h(e){var t;const o=null===(t=$(`#quoteApprovePopup .quote[id=${e}] .text`).val())||void 0===t?void 0:t.length;$(`#quoteApprovePopup .quote[id=${e}] .length`).text("Quote length: "+o),o<60?$(`#quoteApprovePopup .quote[id=${e}] .length`).addClass("red"):$(`#quoteApprovePopup .quote[id=${e}] .length`).removeClass("red")}function m(){return s(this,void 0,void 0,(function*(){u.show();const e=yield d.default.quotes.get();if(u.hide(),200!==e.status)return l.add("Failed to get new quotes: "+e.message,-1);p=e.data,f()}))}function g(){$("#quoteApprovePopupWrapper").hasClass("hidden")||$("#quoteApprovePopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{$("#quoteApprovePopupWrapper").addClass("hidden"),$("#quoteApprovePopupWrapper .quotes").empty()}))}function v(e){$(e).closest(".quote").find(".textButton").removeClass("disabled"),$(e).closest(".quote").find(".edit").hasClass("hidden")&&$(e).closest(".quote").find(".undo").addClass("disabled")}t.show=function(e=!1){return s(this,void 0,void 0,(function*(){$("#quoteApprovePopupWrapper").hasClass("hidden")&&(p=[],m(),$("#quoteApprovePopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},e?0:100))}))},t.hide=g,$("#quoteApprovePopupWrapper").on("mousedown",(e=>{"quoteApprovePopupWrapper"===$(e.target).attr("id")&&g()})),$("#quoteApprovePopupWrapper .button.refreshList").on("click",(()=>{$("#quoteApprovePopupWrapper .quotes").empty(),m()})),$(document).on("click","#quoteApprovePopup .quote .undo",(e=>s(void 0,void 0,void 0,(function*(){const t=parseInt($(e.target).closest(".quote").attr("id"));$(`#quoteApprovePopup .quote[id=${t}] .text`).val(p[t].text),$(`#quoteApprovePopup .quote[id=${t}] .source`).val(p[t].source),$(`#quoteApprovePopup .quote[id=${t}] .undo`).addClass("disabled"),$(`#quoteApprovePopup .quote[id=${t}] .approve`).removeClass("hidden"),$(`#quoteApprovePopup .quote[id=${t}] .edit`).addClass("hidden"),h(t)})))),$(document).on("click","#quoteApprovePopup .quote .approve",(e=>s(void 0,void 0,void 0,(function*(){var t;if(!confirm("Are you sure?"))return;const o=parseInt($(e.target).closest(".quote").attr("id")),n=$(e.target).closest(".quote").attr("dbid"),a=e.target;$(a).closest(".quote").find(".textButton").addClass("disabled"),$(a).closest(".quote").find("textarea, input").prop("disabled",!0),u.show();const i=yield d.default.quotes.approveSubmission(n);if(u.hide(),200!==i.status)return v(a),$(a).closest(".quote").find("textarea, input").prop("disabled",!1),l.add("Failed to approve quote: "+i.message,-1);l.add(null!==(t="Quote approved. "+i.message)&&void 0!==t?t:"",1),p.splice(o,1),f()})))),$(document).on("click","#quoteApprovePopup .quote .refuse",(e=>s(void 0,void 0,void 0,(function*(){if(!confirm("Are you sure?"))return;const t=parseInt($(e.target).closest(".quote").attr("id")),o=$(e.target).closest(".quote").attr("dbid"),n=e.target;$(n).closest(".quote").find(".textButton").addClass("disabled"),$(n).closest(".quote").find("textarea, input").prop("disabled",!0),u.show();const a=yield d.default.quotes.rejectSubmission(o);if(u.hide(),200!==a.status)return v(n),$(n).closest(".quote").find("textarea, input").prop("disabled",!1),l.add("Failed to refuse quote: "+a.message,-1);l.add("Quote refused.",1),p.splice(t,1),f()})))),$(document).on("click","#quoteApprovePopup .quote .edit",(e=>s(void 0,void 0,void 0,(function*(){var t;if(!confirm("Are you sure?"))return;const o=parseInt($(e.target).closest(".quote").attr("id")),n=$(e.target).closest(".quote").attr("dbid"),a=$(`#quoteApprovePopup .quote[id=${o}] .text`).val(),i=$(`#quoteApprovePopup .quote[id=${o}] .source`).val(),s=e.target;$(s).closest(".quote").find(".textButton").addClass("disabled"),$(s).closest(".quote").find("textarea, input").prop("disabled",!0),u.show();const r=yield d.default.quotes.approveSubmission(n,a,i);if(u.hide(),200!==r.status)return v(s),$(s).closest(".quote").find("textarea, input").prop("disabled",!1),l.add("Failed to approve quote: "+r.message,-1);l.add(null!==(t="Quote edited and approved. "+r.message)&&void 0!==t?t:"",1),p.splice(o,1),f()})))),$(document).on("input","#quoteApprovePopup .quote .text",(e=>s(void 0,void 0,void 0,(function*(){const t=parseInt($(e.target).closest(".quote").attr("id"));$(`#quoteApprovePopup .quote[id=${t}] .undo`).removeClass("disabled"),$(`#quoteApprovePopup .quote[id=${t}] .approve`).addClass("hidden"),$(`#quoteApprovePopup .quote[id=${t}] .edit`).removeClass("hidden"),h(t)})))),$(document).on("input","#quoteApprovePopup .quote .source",(e=>s(void 0,void 0,void 0,(function*(){const t=parseInt($(e.target).closest(".quote").attr("id"));$(`#quoteApprovePopup .quote[id=${t}] .undo`).removeClass("disabled"),$(`#quoteApprovePopup .quote[id=${t}] .approve`).addClass("hidden"),$(`#quoteApprovePopup .quote[id=${t}] .edit`).removeClass("hidden")}))))},8182:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.clearQuoteStats=t.show=t.getQuoteStats=void 0;const d=r(o(7355)),u=i(o(6350)),l=i(o(9470)),c=i(o(9817)),p=i(o(3368));let f=0,h=null,m=null;function g(e){return e.totalRating&&e.ratings?Math.round(e.totalRating/e.ratings*10)/10:0}function v(e){return s(this,void 0,void 0,(function*(){if(!e)return;m=e;const t=yield d.default.quotes.getRating(m);if(c.hide(),200===t.status)return t.data?(h=t.data,h&&!h.average&&(h.average=g(h)),h):{};p.add("Failed to get quote ratings: "+t.message,-1)}))}function y(e){const t=e||f;$("#quoteRatePopup .star").removeClass("active");for(let e=1;e<=t;e++)$(`#quoteRatePopup .star[rating=${e}]`).addClass("active")}function b(e,t=!0){var o,n;if($("#quoteRatePopupWrapper").hasClass("hidden")){t&&($("#quoteRatePopup .quote .text").text("-"),$("#quoteRatePopup .quote .source .val").text("-"),$("#quoteRatePopup .quote .id .val").text("-"),$("#quoteRatePopup .quote .length .val").text("-"),$("#quoteRatePopup .ratingCount .val").text("-"),$("#quoteRatePopup .ratingAverage .val").text("-")),m=e,f=0;const a=u.getSnapshot(),i=null===(n=null===(o=null==a?void 0:a.quoteRatings)||void 0===o?void 0:o[m.language])||void 0===n?void 0:n[m.id];i&&(f=i),y(),function(){if(!m)return;let e;0==m.group?e="short":1==m.group?e="medium":2==m.group?e="long":3==m.group&&(e="thicc"),$("#quoteRatePopup .quote .text").text(m.text),$("#quoteRatePopup .quote .source .val").text(m.source),$("#quoteRatePopup .quote .id .val").text(m.id),$("#quoteRatePopup .quote .length .val").text(e),function(){var e,t,o;s(this,void 0,void 0,(function*(){h||(yield v()),$("#quoteRatePopup .ratingCount .val").text(null!==(e=null==h?void 0:h.ratings)&&void 0!==e?e:"0"),$("#quoteRatePopup .ratingAverage .val").text(null!==(o=null===(t=null==h?void 0:h.average)||void 0===t?void 0:t.toFixed(1))&&void 0!==o?o:"-")}))}()}(),$("#quoteRatePopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},125)}}function w(){$("#quoteRatePopupWrapper").hasClass("hidden")||$("#quoteRatePopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{$("#quoteRatePopupWrapper").addClass("hidden")}))}t.getQuoteStats=v,t.show=b,t.clearQuoteStats=function(){h=null},$("#quoteRatePopupWrapper").on("click",(e=>{"quoteRatePopupWrapper"===$(e.target).attr("id")&&w()})),$("#quoteRatePopup .stars .star").hover((e=>{y(parseInt($(e.currentTarget).attr("rating")))})),$("#quoteRatePopup .stars .star").on("click",(e=>{const t=parseInt($(e.currentTarget).attr("rating"));f=t})),$("#quoteRatePopup .stars .star").mouseout((()=>{$("#quoteRatePopup .star").removeClass("active"),y()})),$("#quoteRatePopup .submitButton").on("click",(()=>{!function(){var e,t,o;s(this,void 0,void 0,(function*(){if(0===f)return p.add("Please select a rating");if(!m)return;w();const n=yield d.default.quotes.addRating(m,f);if(c.hide(),200!==n.status)return p.add("Failed to submit quote rating: "+n.message,-1);const a=u.getSnapshot(),i=null!==(e=a.quoteRatings)&&void 0!==e?e:{};if(null===(t=null==i?void 0:i[m.language])||void 0===t?void 0:t[m.id]){const e=i[m.language][m.id],t=f-e;i[m.language][m.id]=f,h={ratings:null==h?void 0:h.ratings,totalRating:isNaN(null==h?void 0:h.totalRating)?0:(null==h?void 0:h.totalRating)+t,quoteId:m.id,language:m.language},p.add("Rating updated",1)}else i[m.language]||(i[m.language]={}),i[m.language][m.id]=f,(null==h?void 0:h.ratings)&&h.totalRating?(h.ratings++,h.totalRating+=f):h={ratings:1,totalRating:f,quoteId:m.id,language:m.language},p.add("Rating submitted",1);a.quoteRatings=i,u.setSnapshot(a),h.average=g(h),$(".pageTest #result #rateQuoteButton .rating").text(null===(o=h.average)||void 0===o?void 0:o.toFixed(1)),$(".pageTest #result #rateQuoteButton .icon").removeClass("far"),$(".pageTest #result #rateQuoteButton .icon").addClass("fas")}))}()})),$(".pageTest #rateQuoteButton").on("click",(()=>s(void 0,void 0,void 0,(function*(){b(l.randomQuote)}))))},5898:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=void 0;const d=r(o(7355)),u=r(o(6705)),l=i(o(9470)),c=i(o(9817)),p=i(o(3368)),f=r(o(6750)),h=i(o(6953)),m={previousPopupShowCallback:void 0,quoteToReport:void 0},g={quoteId:-1,previousPopupShowCallback:()=>{},noAnim:!1};function v(e=g){var t;return s(this,void 0,void 0,(function*(){if($("#quoteReportPopupWrapper").hasClass("hidden")){h.render(document.querySelector("#quoteReportPopup .g-recaptcha"),"quoteReportPopup");const{quoteId:o,previousPopupShowCallback:n,noAnim:a}=e;m.previousPopupShowCallback=n;const{quotes:i}=yield f.default.getQuotes(u.default.language);m.quoteToReport=i.find((e=>e.id===o)),$("#quoteReportPopup .quote").text(null===(t=m.quoteToReport)||void 0===t?void 0:t.text),$("#quoteReportPopup .reason").val("Grammatical error"),$("#quoteReportPopup .comment").val(""),$("#quoteReportPopup .characterCount").text("-"),$("#quoteReportPopup .reason").select2({minimumResultsForSearch:1/0}),$("#quoteReportPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},a?0:100,(()=>{$("#quoteReportPopup textarea").trigger("focus").trigger("select")}))}}))}function y(){return s(this,void 0,void 0,(function*(){if(!$("#quoteReportPopupWrapper").hasClass("hidden")){const e=!!m.previousPopupShowCallback;$("#quoteReportPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},e?0:100,(()=>{h.reset("quoteReportPopup"),$("#quoteReportPopupWrapper").addClass("hidden"),m.previousPopupShowCallback&&m.previousPopupShowCallback()}))}}))}t.show=v,t.hide=y,$("#quoteReportPopupWrapper").on("mousedown",(e=>{"quoteReportPopupWrapper"===$(e.target).attr("id")&&y()})),$("#quoteReportPopup .comment").on("input",(()=>{setTimeout((()=>{const e=$("#quoteReportPopup .comment").val().length;$("#quoteReportPopup .characterCount").text(e),e>250?$("#quoteReportPopup .characterCount").addClass("red"):$("#quoteReportPopup .characterCount").removeClass("red")}),1)})),$("#quoteReportPopup .submit").on("click",(()=>s(void 0,void 0,void 0,(function*(){yield function(){var e;return s(this,void 0,void 0,(function*(){const t=h.getResponse("quoteReportPopup");if(!t)return p.add("Please complete the captcha");const o=null===(e=m.quoteToReport)||void 0===e?void 0:e.id.toString(),n=u.default.language,a=$("#quoteReportPopup .reason").val(),i=$("#quoteReportPopup .comment").val(),s=t;if(!o)return p.add("Please select a quote");if(!a)return p.add("Please select a valid report reason");const r=i.length-250;if(r>0)return p.add(`Report comment is ${r} character(s) too long`);c.show();const l=yield d.default.quotes.report(o,n,a,i,s);if(c.hide(),200!==l.status)return p.add("Failed to report quote: "+l.message,-1);p.add("Report submitted. Thank you!",1),y()}))}()})))),$(".pageTest #reportQuoteButton").on("click",(()=>s(void 0,void 0,void 0,(function*(){var e;v({quoteId:null===(e=l.randomQuote)||void 0===e?void 0:e.id,noAnim:!1})}))))},2338:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.apply=t.hide=t.show=t.setSelectedId=t.selectedId=void 0;const d=i(o(8673)),u=i(o(6705)),l=u,c=i(o(6350)),p=i(o(2203)),f=i(o(3368)),h=i(o(9753)),m=i(o(4571)),g=i(o(5898)),v=o(6690),y=o(6037),b=r(o(6750)),w=o(6617),C=o(2189),S=r(o(7355)),_=i(o(9817));t.selectedId=1,t.setSelectedId=function(e){t.selectedId=e};const k={};function x(e,t){return 0===t.length?e:(0,y.splitByAndKeep)(e,'.,"/#!$%^&*;:{}=-_`~() '.split("")).map((e=>t.find((t=>e.startsWith(t)))?`<span class="highlight">${e}</span>`:e)).join("")}function T(e){return s(this,void 0,void 0,(function*(){const{quotes:t}=yield b.default.getQuotes(u.default.language),o=function(e,t,o){if(e in k)return k[e];const n=(0,v.buildSearchService)(t,(e=>`${e.text} ${e.id} ${e.source}`));return k[e]=n,n}(u.default.language,t),{results:n,matchedQueryTerms:a}=o.query(e),i=function(e){const t=$("#quoteSearchPopup .quoteLengthFilter").val();if(0===t.length)return e;const o=t.map((e=>parseInt(e,10)));return e.filter((e=>o.includes(e.group)))}(function(e){const t=document.querySelector("#toggleShowFavorites").classList.contains("active");return e.filter((e=>!t||b.default.isQuoteFavorite(e)))}(""===e?t:n)),s=$("#quoteSearchResults");s.empty(),i.slice(0,100).forEach((e=>{const t=function(e,t){let o;o=e.length<101?"short":e.length<301?"medium":e.length<601?"long":"thicc";const n=!w.Auth.currentUser,a=!n&&b.default.isQuoteFavorite(e);return`\n  <div class="searchResult" id="${e.id}">\n\n    <div class="text">\n      ${x(e.text,t)}\n    </div>\n\n    <div class="id">\n      <div class="sub">id</div>\n      <span class="quote-id">\n        ${x(e.id.toString(),t)}\n      </span>\n    </div>\n\n    <div class="length">\n      <div class="sub">length</div>\n      ${o}\n    </div>\n\n    <div class="source">\n      <div class="sub">source</div>\n      ${x(e.source,t)}\n    </div>\n\n    <div class="textButton report ${n&&"hidden"}" aria-label="Report quote" data-balloon-pos="left">\n      <i class="fas fa-flag report"></i>\n    </div>\n\n    <div class="textButton favorite ${n&&"hidden"}" aria-label="Favorite quote" data-balloon-pos="left">\n      <i class="${a?"fas":"far"} fa-heart favorite"></i>\n    </div>\n\n  </div>\n  `}(e,a);s.append(t)}));const r=i.length>100?"<span style='opacity: 0.5'>(only showing 100)</span>":"";$("#extraResults").html(`${i.length} result(s) ${r}`)}))}function P(e=!0){var t;return s(this,void 0,void 0,(function*(){if($("#quoteSearchPopupWrapper").hasClass("hidden")){e&&$("#quoteSearchPopup input").val("");const o=$("#quoteSearchPopup input").val();w.Auth.currentUser?($("#quoteSearchPopup #gotoSubmitQuoteButton").removeClass("hidden"),$("#quoteSearchPopup #toggleShowFavorites").removeClass("hidden")):($("#quoteSearchPopup #gotoSubmitQuoteButton").addClass("hidden"),$("#quoteSearchPopup #toggleShowFavorites").addClass("hidden")),(null===(t=c.getSnapshot())||void 0===t?void 0:t.quoteMod)?$("#quoteSearchPopup #goToApproveQuotes").removeClass("hidden"):$("#quoteSearchPopup #goToApproveQuotes").addClass("hidden"),$("#quoteSearchPopup .quoteLengthFilter").select2({placeholder:"Filter by length",maximumSelectionLength:1/0,multiple:!0,width:"100%",data:[{id:0,text:"short",selected:!1},{id:1,text:"medium",selected:!1},{id:2,text:"long",selected:!1},{id:3,text:"thicc",selected:!1}]}),$("#quoteSearchPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},100,(()=>{e&&$("#quoteSearchPopup input").trigger("focus").trigger("select"),T(o)}))}}))}function M(e=!1,t=!0){$("#quoteSearchPopupWrapper").hasClass("hidden")||$("#quoteSearchPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},e?0:100,(()=>{$("#quoteSearchPopupWrapper").addClass("hidden"),t&&(d.focusWords(),$("#quoteSearchPopup .quoteLengthFilter").val([]),$("#quoteSearchPopup .quoteLengthFilter").trigger("change"))}))}t.show=P,t.hide=M,t.apply=function(e){let o;return isNaN(e)&&(e=parseInt(document.getElementById("searchBox").value)),null!==e&&!isNaN(e)&&e>=0?(l.setQuoteLength(-2,!1),t.selectedId=e,p.set(),o=!0):(f.add("Quote ID must be at least 1",0),o=!1),M(),o};const O=(0,C.debounce)(250,(()=>{T(document.getElementById("searchBox").value)}));$("#quoteSearchPopup .searchBox").on("keyup",(e=>{"Escape"!==e.code&&O()})),$("#quoteSearchPopup .quoteLengthFilter").on("change",O),$("#quoteSearchPopupWrapper").on("click",(e=>{"quoteSearchPopupWrapper"===$(e.target).attr("id")&&M()})),$(document).on("click","#quoteSearchPopup #gotoSubmitQuoteButton",(()=>{M(!0),h.show(!0)})),$(document).on("click","#quoteSearchPopup #goToApproveQuotes",(()=>{M(!0),m.show(!0)})),$(document).on("click","#quoteSearchPopup .report",(e=>s(void 0,void 0,void 0,(function*(){const t=e.target.closest(".searchResult").id,o=parseInt(t);M(!0,!1),g.show({quoteId:o,noAnim:!0,previousPopupShowCallback:()=>{P(!1)}})})))),$(document).on("click","#quoteSearchPopup .textButton.favorite",(e=>s(void 0,void 0,void 0,(function*(){var t,o,n;const a=u.default.language,i=e.target.closest(".searchResult").id;if(""===a||""===i)return void f.add("Could not get quote stats!",-1);const s=$(`#quoteSearchPopup .searchResult[id=${i}] .textButton.favorite i`),r=c.getSnapshot();if(s.hasClass("fas")){_.show();const e=yield S.default.users.removeQuoteFromFavorites(a,i);if(_.hide(),f.add(e.message,200===e.status?1:-1),200===e.status){s.removeClass("fas").addClass("far");const e=null===(t=r.favoriteQuotes[a])||void 0===t?void 0:t.indexOf(i);null===(o=r.favoriteQuotes[a])||void 0===o||o.splice(e,1)}}else{_.show();const e=yield S.default.users.addQuoteToFavorites(a,i);_.hide(),f.add(e.message,200===e.status?1:-1),200===e.status&&(s.removeClass("far").addClass("fas"),r.favoriteQuotes[a]||(r.favoriteQuotes[a]=[]),null===(n=r.favoriteQuotes[a])||void 0===n||n.push(i))}e.preventDefault()})))),$(document).on("click","#toggleShowFavorites",(e=>{w.Auth.currentUser&&($(e.target).toggleClass("active"),O())})),$(document).on("click","#top .config .quoteLength .textButton",(e=>{var t;-2==(null!==(t=$(e.currentTarget).attr("quoteLength"))&&void 0!==t?t:0)&&P()})),$(document).on("keydown",(e=>{"Escape"!==e.key||$("#quoteSearchPopupWrapper").hasClass("hidden")||(M(),e.preventDefault())}))},9753:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=void 0;const d=r(o(7355)),u=i(o(9817)),l=i(o(3368)),c=i(o(6953));function p(){return s(this,void 0,void 0,(function*(){const e=$("#quoteSubmitPopup #submitQuoteText").val(),t=$("#quoteSubmitPopup #submitQuoteSource").val(),o=$("#quoteSubmitPopup #submitQuoteLanguage").val(),n=c.getResponse("submitQuote");if(!e||!t||!o)return l.add("Please fill in all fields",0);u.show();const a=yield d.default.quotes.submit(e,t,o,n);if(u.hide(),200!==a.status)return l.add("Failed to submit quote: "+a.message,-1);l.add("Quote submitted.",1),$("#quoteSubmitPopup #submitQuoteText").val(""),$("#quoteSubmitPopup #submitQuoteSource").val(""),$("#quoteSubmitPopup .characterCount").removeClass("red"),$("#quoteSubmitPopup .characterCount").text("-"),c.reset("submitQuote")}))}function f(){$("#quoteSubmitPopupWrapper").hasClass("hidden")||$("#quoteSubmitPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{$("#quoteSubmitPopupWrapper").addClass("hidden"),c.reset("submitQuote")}))}t.show=function(e=!1){return s(this,void 0,void 0,(function*(){l.add("Quote submission is disabled temporarily due to a large submission queue.",0,5)}))},t.hide=f,$("#quoteSubmitPopupWrapper").on("mousedown",(e=>{"quoteSubmitPopupWrapper"===$(e.target).attr("id")&&f()})),$(document).on("click","#quoteSubmitPopup #submitQuoteButton",(()=>{p()})),$("#quoteSubmitPopup textarea").on("input",(()=>{setTimeout((()=>{var e;const t=null===(e=$("#quoteSubmitPopup textarea").val())||void 0===e?void 0:e.length;$("#quoteSubmitPopup .characterCount").text(t),t<60?$("#quoteSubmitPopup .characterCount").addClass("red"):$("#quoteSubmitPopup .characterCount").removeClass("red")}),1)})),$("#quoteSubmitPopup input").on("keydown",(e=>{"Enter"===e.key&&p()}))},3875:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.updateButtons=void 0;const d=r(o(7355)),u=i(o(6350)),l=i(o(9817)),c=i(o(3368));function p(){$("#resultEditTagsPanelWrapper").hasClass("hidden")||$("#resultEditTagsPanelWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{$("#resultEditTagsPanelWrapper").addClass("hidden")}))}t.updateButtons=function(){var e;$("#resultEditTagsPanel .buttons").empty(),null===(e=u.getSnapshot().tags)||void 0===e||e.forEach((e=>{$("#resultEditTagsPanel .buttons").append(`<div class="button tag" tagid="${e._id}">${e.display}</div>`)}))},$(document).on("click",".pageAccount .group.history #resultEditTags",(e=>{var t,o;if(null===(t=u.getSnapshot().tags)||void 0===t?void 0:t.length){const t=$(e.target).parents("span").attr("resultid"),n=$(e.target).parents("span").attr("tags");$("#resultEditTagsPanel").attr("resultid",t),$("#resultEditTagsPanel").attr("tags",n),(o=JSON.parse(n))!==[]&&$.each($("#resultEditTagsPanel .buttons .button"),((e,t)=>{var n;const a=null!==(n=$(t).attr("tagid"))&&void 0!==n?n:"";o.includes(a)?$(t).addClass("active"):$(t).removeClass("active")})),$("#resultEditTagsPanelWrapper").hasClass("hidden")&&$("#resultEditTagsPanelWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},125)}})),$(document).on("click","#resultEditTagsPanelWrapper .button.tag",(e=>{$(e.target).toggleClass("active")})),$("#resultEditTagsPanelWrapper").on("click",(e=>{"resultEditTagsPanelWrapper"===$(e.target).attr("id")&&p()})),$("#resultEditTagsPanel .confirmButton").on("click",(()=>s(void 0,void 0,void 0,(function*(){var e;const t=$("#resultEditTagsPanel").attr("resultid"),o=[];$.each($("#resultEditTagsPanel .buttons .button"),((e,t)=>{var n;const a=null!==(n=$(t).attr("tagid"))&&void 0!==n?n:"";$(t).hasClass("active")&&o.push(a)})),l.show(),p();const n=yield d.default.results.updateTags(t,o);if(l.hide(),200!==n.status)return c.add("Failed to update result tags: "+n.message,-1);c.add("Tags updated",1,2),null===(e=u.getSnapshot().results)||void 0===e||e.forEach((e=>{e._id===t&&(e.tags=o)}));let a,i="";o.length>0&&(o.forEach((e=>{var t;null===(t=u.getSnapshot().tags)||void 0===t||t.forEach((t=>{e===t._id&&(i+=t.display+", ")}))})),i=i.substring(0,i.length-2)),a=void 0===o?"[]":JSON.stringify(o),$(`.pageAccount #resultEditTags[resultid='${t}']`).attr("tags",a),o.length>0?($(`.pageAccount #resultEditTags[resultid='${t}']`).css("opacity",1),$(`.pageAccount #resultEditTags[resultid='${t}']`).attr("aria-label",i)):($(`.pageAccount #resultEditTags[resultid='${t}']`).css("opacity",.25),$(`.pageAccount #resultEditTags[resultid='${t}']`).attr("aria-label","no tags"))}))))},5177:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.show=void 0;const r=i(o(8248));function d(e=!1){$("#savedTextsPopupWrapper").addClass("hidden"),e||$("#customTextPopupWrapper").removeClass("hidden")}t.show=function(){return s(this,void 0,void 0,(function*(){const e=r.getCustomTextNames(),t=$("#savedTextsPopup .list").empty();let o="";if(0===e.length)o+="<div>No saved custom texts found</div>";else for(const t of e)o+=`<div class="savedText">\n      <div class="button name">${t}</div>\n      <div class="button delete">\n      <i class="fas fa-fw fa-trash"></i>\n      </div>\n      </div>`;t.html(o),$("#savedTextsPopupWrapper").removeClass("hidden"),$("#customTextPopupWrapper").addClass("hidden")}))},$(document).on("click","#savedTextsPopupWrapper .list .savedText .button.name",(e=>{!function(e){const t=r.getCustomText(e);$("#customTextPopupWrapper textarea").val(t.join(r.delimiter))}($(e.target).text()),d()})),$(document).on("click","#savedTextsPopupWrapper .list .savedText .button.delete",(()=>{d(!0)})),$("#savedTextsPopupWrapper").on("mousedown",(e=>{"savedTextsPopupWrapper"===$(e.target).attr("id")&&d()}))},4924:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=void 0;const d=r(o(6705)),u=o(9470),l=o(3388),c=i(o(8248)),p=o(6965);function f(e){return $(`#shareTestSettingsPopupWrapper label.${e} input`).prop("checked")}function h(){const e=location.origin+"?testSettings=",t=[null,null,null,null,null,null,null,null];f("mode")&&(t[0]=d.default.mode),f("mode2")&&(t[1]=(0,l.getMode2)(d.default,u.randomQuote)),f("customText")&&(t[2]={text:c.text,isWordRandom:c.isWordRandom,isTimeRandom:c.isTimeRandom,word:c.word,time:c.time,delimiter:c.delimiter}),f("punctuation")&&(t[3]=d.default.punctuation),f("numbers")&&(t[4]=d.default.numbers),f("language")&&(t[5]=d.default.language),f("difficulty")&&(t[6]=d.default.difficulty),f("funbox")&&(t[7]=d.default.funbox);const o=e+(0,p.compressToURI)(JSON.stringify(t));$("#shareTestSettingsPopupWrapper textarea.url").val(o),o.length>2e3?$("#shareTestSettingsPopupWrapper .tooLongWarning").removeClass("hidden"):$("#shareTestSettingsPopupWrapper .tooLongWarning").addClass("hidden")}function m(){f("mode")?$("#shareTestSettingsPopupWrapper .subgroup").removeClass("hidden"):$("#shareTestSettingsPopupWrapper .subgroup").addClass("hidden")}function g(){return s(this,void 0,void 0,(function*(){$("#shareTestSettingsPopupWrapper").hasClass("hidden")||$("#shareTestSettingsPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{$("#shareTestSettingsPopupWrapper").addClass("hidden")}))}))}t.show=function(){$("#shareTestSettingsPopupWrapper").hasClass("hidden")&&(h(),m(),$("#shareTestSettingsPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},100))},t.hide=g,$("#shareTestSettingsPopupWrapper label input").on("change",(()=>{h(),m()})),$("#shareTestSettingsPopupWrapper").on("mousedown",(e=>{"shareTestSettingsPopupWrapper"===$(e.target).attr("id")&&g()})),$(document).on("keydown",(e=>{"Escape"!==e.key||$("#shareTestSettingsPopupWrapper").hasClass("hidden")||(g(),e.preventDefault())}))},9360:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.list=void 0;const d=r(o(7355)),u=i(o(4674)),l=i(o(6350)),c=i(o(6705)),p=i(o(9817)),f=i(o(3368)),h=i(o(8835)),m=i(o(6126)),g=i(o(4216)),v=i(o(8248)),y=i(o(2786)),b=i(o(5177)),w=i(o(5344)),C=o(6617),S=o(2974);let _=null;t.list={};class k{constructor(e,t,o,n=[],a="",i="Confirm",s,r,d){this.parameters=[],this.id=e,this.type=t,this.execFn=(e,...t)=>s(e,...t),this.title=o,this.inputs=n,this.text=a,this.wrapper=$("#simplePopupWrapper"),this.element=$("#simplePopup"),this.buttonText=i,this.beforeInitFn=e=>r(e),this.beforeShowFn=e=>d(e),this.canClose=!0}reset(){this.element.html('\n    <div class="title"></div>\n    <div class="inputs"></div>\n    <div class="text"></div>\n    <div class="button"></div>')}init(){const e=this.element;e.find("input").val(""),this.reset(),e.attr("popupId",this.id),e.find(".title").text(this.title),e.find(".text").text(this.text),this.initInputs(),""===this.buttonText?e.find(".button").remove():e.find(".button").text(this.buttonText),""===this.text?e.find(".text").addClass("hidden"):e.find(".text").removeClass("hidden")}initInputs(){const e=this.element;this.inputs.length>0?("number"===this.type?this.inputs.forEach((t=>{e.find(".inputs").append(`\n            <input\n              type="number"\n              min="1"\n              value="${t.initVal}"\n              placeholder="${t.placeholder}"\n              class="${t.hidden?"hidden":""}"\n              ${t.hidden?"":"required"}\n              autocomplete="off"\n            >\n          `)})):"text"===this.type&&this.inputs.forEach((t=>{t.type?"textarea"===t.type?e.find(".inputs").append(`\n                <textarea\n                  placeholder="${t.placeholder}"\n                  class="${t.hidden?"hidden":""}"\n                  ${t.hidden?"":"required"}\n                  ${t.disabled?"disabled":""}\n                  autocomplete="off"\n                >${t.initVal}</textarea>\n              `):"checkbox"===t.type?e.find(".inputs").append(`\n                <label class="checkbox">\n                  <input type="checkbox">\n                  <div class="customTextCheckbox">\n                    <div class="check">\n                      <i class="fas fa-fw fa-check"></i>\n                    </div>\n                  </div>\n                  ${t.label}\n                </label>\n              `):e.find(".inputs").append(`\n              <input\n              type="${t.type}"\n              value="${t.initVal}"\n              placeholder="${t.placeholder}"\n              class="${t.hidden?"hidden":""}"\n              ${t.hidden?"":"required"}\n              ${t.disabled?"disabled":""}\n              autocomplete="off"\n              >\n              `):e.find(".inputs").append(`\n              <input\n                type="text"\n                value="${t.initVal}"\n                placeholder="${t.placeholder}"\n                class="${t.hidden?"hidden":""}"\n                ${t.hidden?"":"required"}\n                ${t.disabled?"disabled":""}\n                autocomplete="off"\n              >\n            `)})),e.find(".inputs").removeClass("hidden")):e.find(".inputs").addClass("hidden")}exec(){if(!this.canClose)return;const e=[];$.each($("#simplePopup input"),((t,o)=>{$(o).is(":checkbox")?e.push($(o).is(":checked")?"true":"false"):e.push($(o).val())})),this.execFn(this,...e),this.hide()}show(e=[]){_=this,this.parameters=e,this.beforeInitFn(this),this.init(),this.beforeShowFn(this),this.wrapper.stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},125,(()=>{$($("#simplePopup").find("input")[0]).trigger("focus")}))}hide(){this.canClose&&(_=null,this.wrapper.stop(!0,!0).css("opacity",1).removeClass("hidden").animate({opacity:0},125,(()=>{this.wrapper.addClass("hidden")})))}}function x(){if(_)return _.hide();$("#simplePopupWrapper").stop(!0,!0).css("opacity",1).removeClass("hidden").animate({opacity:0},125,(()=>{$("#simplePopupWrapper").addClass("hidden")}))}t.hide=x,$("#simplePopupWrapper").on("mousedown",(e=>{if("simplePopupWrapper"===$(e.target).attr("id")){if(_)return _.hide();$("#simplePopupWrapper").stop(!0,!0).css("opacity",1).removeClass("hidden").animate({opacity:0},125,(()=>{$("#simplePopupWrapper").addClass("hidden")}))}})),$(document).on("click","#simplePopupWrapper .button",(()=>{var e;const o=null!==(e=$("#simplePopup").attr("popupId"))&&void 0!==e?e:"";t.list[o].exec()})),$(document).on("keyup","#simplePopupWrapper input",(e=>{var o;if("Enter"===e.key){e.preventDefault();const n=null!==(o=$("#simplePopup").attr("popupId"))&&void 0!==o?o:"";t.list[n].exec()}})),t.list.updateEmail=new k("updateEmail","text","Update Email",[{placeholder:"Password",type:"password",initVal:""},{placeholder:"New email",initVal:""},{placeholder:"Confirm new email",initVal:""}],"","Update",((e,t,o,n)=>s(void 0,void 0,void 0,(function*(){try{const e=C.Auth.currentUser;if(null===e)return;if(o!==n)return void f.add("Emails don't match",0);if(e.providerData.find((e=>"password"===(null==e?void 0:e.providerId)))){const o=S.EmailAuthProvider.credential(e.email,t);yield(0,S.reauthenticateWithCredential)(e,o)}p.show();const a=yield d.default.users.updateEmail(o,e.email);if(p.hide(),200!==a.status)return f.add("Failed to update email: "+a.message,-1);f.add("Email updated",1),setTimeout((()=>{window.location.reload()}),3e3)}catch(e){"auth/wrong-password"===e.code?f.add("Incorrect password",-1):f.add("Something went wrong: "+e,-1)}}))),(e=>{const t=C.Auth.currentUser;null!==t&&(t.providerData.find((e=>"password"===(null==e?void 0:e.providerId)))||(e.inputs=[],e.buttonText="",e.text="Password authentication is not enabled"))}),(e=>{})),t.list.removeGoogleAuth=new k("removeGoogleAuth","text","Remove Google Authentication",[{placeholder:"Password",type:"password",initVal:""}],"","Remove",((e,t)=>s(void 0,void 0,void 0,(function*(){try{const e=C.Auth.currentUser;if(null===e)return;if(e.providerData.find((e=>"password"===(null==e?void 0:e.providerId)))){const o=S.EmailAuthProvider.credential(e.email,t);yield(0,S.reauthenticateWithCredential)(e,o)}p.show(),(0,S.unlink)(e,"google.com").then((()=>{p.hide(),f.add("Google authentication removed",1),h.updateAuthSections()})).catch((e=>{p.hide(),f.add("Something went wrong: "+e.message,-1)})),setTimeout((()=>{window.location.reload()}),3e3)}catch(e){"auth/wrong-password"===e.code?f.add("Incorrect password",-1):f.add("Something went wrong: "+e,-1)}}))),(e=>{const t=C.Auth.currentUser;null!==t&&(t.providerData.find((e=>"password"===(null==e?void 0:e.providerId)))||(e.inputs=[],e.buttonText="",e.text="Password authentication is not enabled"))}),(e=>{})),t.list.updateName=new k("updateName","text","Update Name",[{placeholder:"Password",type:"password",initVal:""},{placeholder:"New name",type:"text",initVal:""}],"","Update",((e,t,o)=>s(void 0,void 0,void 0,(function*(){try{const e=C.Auth.currentUser;if(null===e)return;if(e.providerData.find((e=>"password"===(null==e?void 0:e.providerId)))){const o=S.EmailAuthProvider.credential(e.email,t);yield(0,S.reauthenticateWithCredential)(e,o)}else yield(0,S.reauthenticateWithPopup)(e,u.gmailProvider);p.show();const n=yield d.default.users.getNameAvailability(o);if(200!==n.status)return p.hide(),f.add("Failed to check name: "+n.message,-1);const a=yield d.default.users.updateName(o);if(200!==a.status)return p.hide(),f.add("Failed to update name: "+a.message,-1);f.add("Name updated",1),l.getSnapshot().name=o,$("#menu .textButton.account .text").text(o),l.getSnapshot().needsToChangeName&&setTimeout((()=>{location.reload()}),3e3)}catch(e){"auth/wrong-password"===e.code?f.add("Incorrect password",-1):f.add("Something went wrong: "+e,-1)}p.hide()}))),(e=>{const t=C.Auth.currentUser;null!==t&&(t.providerData.find((e=>"password"===(null==e?void 0:e.providerId)))||(e.inputs[0].hidden=!0,e.buttonText="Reauthenticate to update"),!0===l.getSnapshot().needsToChangeName&&(e.text="We've recently identified several issues that allowed users to register with names that were already taken. Accounts which signed up earliest get to keep the duplicated name, and others are forced to change. Unique names are essential for smooth operation of upcoming features like public profiles, multiplayer, and more. Sorry for the inconvenience."))}),(e=>{})),t.list.updatePassword=new k("updatePassword","text","Update Password",[{placeholder:"Password",type:"password",initVal:""},{placeholder:"New password",type:"password",initVal:""},{placeholder:"Confirm new password",type:"password",initVal:""}],"","Update",((e,t,o,n)=>s(void 0,void 0,void 0,(function*(){try{const e=C.Auth.currentUser;if(null===e)return;const a=S.EmailAuthProvider.credential(e.email,t);if(o!==n)return void f.add("New passwords don't match",0);p.show(),yield(0,S.reauthenticateWithCredential)(e,a),yield(0,S.updatePassword)(e,o),p.hide(),f.add("Password updated",1),setTimeout((()=>{window.location.reload()}),3e3)}catch(e){const t=e;p.hide(),"auth/wrong-password"===t.code?f.add("Incorrect password",-1):f.add("Something went wrong: "+e,-1)}}))),(e=>{const t=C.Auth.currentUser;null!==t&&(t.providerData.find((e=>"password"===(null==e?void 0:e.providerId)))||(e.inputs=[],e.buttonText="",e.text="Password authentication is not enabled"))}),(e=>{})),t.list.addPasswordAuth=new k("addPasswordAuth","text","Add Password Authentication",[{placeholder:"email",type:"email",initVal:""},{placeholder:"confirm email",type:"email",initVal:""},{placeholder:"new password",type:"password",initVal:""},{placeholder:"confirm new password",type:"password",initVal:""}],"","Add",((e,t,o,n,a)=>s(void 0,void 0,void 0,(function*(){t===o?n===a?yield u.addPasswordAuth(t,n):f.add("Passwords don't match",0):f.add("Emails don't match",0)}))),(()=>{}),(e=>{})),t.list.deleteAccount=new k("deleteAccount","text","Delete Account",[{placeholder:"Password",type:"password",initVal:""}],"This is the last time you can change your mind. After pressing the button everything is gone.","Delete",((e,t)=>s(void 0,void 0,void 0,(function*(){var e;try{const o=C.Auth.currentUser;if(null===o)return;if(o.providerData.find((e=>"password"===(null==e?void 0:e.providerId)))){const e=S.EmailAuthProvider.credential(o.email,t);yield(0,S.reauthenticateWithCredential)(o,e)}else yield(0,S.reauthenticateWithPopup)(o,u.gmailProvider);p.show(),f.add("Deleting stats...",0);const n=yield d.default.users.delete();if(p.hide(),200!==n.status)return f.add("Failed to delete user stats: "+n.message,-1);p.show(),f.add("Deleting results...",0);const a=yield d.default.results.deleteAll();if(p.hide(),200!==a.status)return f.add("Failed to delete user results: "+a.message,-1);f.add("Deleting login information...",0),yield null===(e=C.Auth.currentUser)||void 0===e?void 0:e.delete(),f.add("Goodbye",1,5),setTimeout((()=>{location.reload()}),3e3)}catch(e){const t=e;p.hide(),"auth/wrong-password"===t.code?f.add("Incorrect password",-1):f.add("Something went wrong: "+e,-1)}}))),(e=>{const t=C.Auth.currentUser;null!==t&&(t.providerData.find((e=>"password"===(null==e?void 0:e.providerId)))||(e.inputs=[],e.buttonText="Reauthenticate to delete"))}),(e=>{})),t.list.resetAccount=new k("resetAccount","text","Reset Account",[{placeholder:"Password",type:"password",initVal:""}],"This is the last time you can change your mind. After pressing the button everything is gone.","Reset",((e,t)=>s(void 0,void 0,void 0,(function*(){try{const e=C.Auth.currentUser;if(null===e)return;if(e.providerData.find((e=>"password"===(null==e?void 0:e.providerId)))){const o=S.EmailAuthProvider.credential(e.email,t);yield(0,S.reauthenticateWithCredential)(e,o)}else yield(0,S.reauthenticateWithPopup)(e,u.gmailProvider);if(f.add("Resetting settings...",0),c.reset(),p.show(),f.add("Resetting account and stats...",0),200!==(yield d.default.users.reset()).status)return p.hide(),f.add("There was an error resetting your account. Please try again.",-1);p.hide(),f.add("Reset complete",1),setTimeout((()=>{location.reload()}),3e3)}catch(e){const t=e;p.hide(),"auth/wrong-password"===t.code?f.add("Incorrect password",-1):f.add("Something went wrong: "+e,-1)}}))),(e=>{const t=C.Auth.currentUser;null!==t&&(t.providerData.find((e=>"password"===(null==e?void 0:e.providerId)))||(e.inputs=[],e.buttonText="Reauthenticate to reset"))}),(e=>{})),t.list.clearTagPb=new k("clearTagPb","text","Clear Tag PB",[],"Are you sure you want to clear this tags PB?","Clear",(e=>s(void 0,void 0,void 0,(function*(){var t;const o=e.parameters[0];p.show();const n=yield d.default.users.deleteTagPersonalBest(o);if(p.hide(),200!==n.status)return f.add("Failed to delete tag's PB: "+n.message);if(1===n.data.resultCode){const e=null===(t=l.getSnapshot().tags)||void 0===t?void 0:t.filter((e=>e._id===o))[0];if(void 0===e)return;e.personalBests={time:{},words:{},zen:{zen:[]},quote:{custom:[]},custom:{custom:[]}},$(`.pageSettings .section.tags .tagsList .tag[id="${o}"] .clearPbButton`).attr("aria-label","No PB found"),f.add("Tag PB cleared.",0)}else f.add("Something went wrong: "+n.message,-1)}))),(e=>{e.text=`Are you sure you want to clear PB for tag ${e.parameters[1]}?`}),(e=>{})),t.list.applyCustomFont=new k("applyCustomFont","text","Custom font",[{placeholder:"Font name",initVal:""}],"Make sure you have the font installed on your computer before applying","Apply",((e,t)=>{var o;""!==t&&(null===(o=h.groups.fontFamily)||void 0===o||o.setValue(t.replace(/\s/g,"_")))}),(()=>{}),(e=>{})),t.list.resetPersonalBests=new k("resetPersonalBests","text","Reset Personal Bests",[{placeholder:"Password",type:"password",initVal:""}],"","Reset",((e,t)=>s(void 0,void 0,void 0,(function*(){try{const e=C.Auth.currentUser;if(null===e)return;if(e.providerData.find((e=>"password"===(null==e?void 0:e.providerId)))){const o=S.EmailAuthProvider.credential(e.email,t);yield(0,S.reauthenticateWithCredential)(e,o)}else yield(0,S.reauthenticateWithPopup)(e,u.gmailProvider);p.show();const o=yield d.default.users.deletePersonalBests();if(p.hide(),200!==o.status)return f.add("Failed to reset personal bests: "+o.message,-1);f.add("Personal bests have been reset",1),l.getSnapshot().personalBests={time:{},words:{},zen:{zen:[]},quote:{custom:[]},custom:{custom:[]}}}catch(e){p.hide(),f.add(e,-1)}}))),(e=>{const t=C.Auth.currentUser;null!==t&&(t.providerData.find((e=>"password"===(null==e?void 0:e.providerId)))||(e.inputs=[],e.buttonText="Reauthenticate to reset"))}),(e=>{})),t.list.resetSettings=new k("resetSettings","text","Reset Settings",[],"Are you sure you want to reset all your settings?","Reset",(()=>{c.reset()}),(()=>{}),(e=>{})),t.list.unlinkDiscord=new k("unlinkDiscord","text","Unlink Discord",[],"Are you sure you want to unlink your Discord account?","Unlink",(()=>s(void 0,void 0,void 0,(function*(){p.show();const e=yield d.default.users.unlinkDiscord();if(p.hide(),200!==e.status)return f.add("Failed to unlink Discord: "+e.message,-1);f.add("Accounts unlinked",1);const t=l.getSnapshot();t.discordAvatar=void 0,t.discordId=void 0,w.update(),l.setSnapshot(t),h.updateDiscordSection()}))),(()=>{}),(e=>{})),t.list.generateApeKey=new k("generateApeKey","text","Generate new key",[{placeholder:"Name",initVal:""}],"","Generate",((e,o)=>s(void 0,void 0,void 0,(function*(){p.show();const e=yield d.default.apeKeys.generate(o,!1);if(p.hide(),200!==e.status)return f.add("Failed to generate key: "+e.message,-1);{const o=e.data;t.list.viewApeKey.show([o.apeKey])}}))),(()=>{}),(e=>{})),t.list.viewApeKey=new k("viewApeKey","text","Ape Key",[{type:"textarea",disabled:!0,placeholder:"Key",initVal:""}],"This is your new Ape Key. Please keep it safe. You will only see it once!","Close",(e=>{m.show()}),(e=>{e.inputs[0].initVal=e.parameters[0]}),(e=>{e.canClose=!1,$("#simplePopup textarea").css("height","110px"),$("#simplePopup .button").addClass("hidden"),setTimeout((()=>{e.canClose=!0,$("#simplePopup .button").removeClass("hidden")}),3e3)})),t.list.deleteApeKey=new k("deleteApeKey","text","Delete Ape Key",[],"Are you sure?","Delete",(e=>s(void 0,void 0,void 0,(function*(){p.show();const t=yield d.default.apeKeys.delete(e.parameters[0]);if(p.hide(),200!==t.status)return f.add("Failed to delete key: "+t.message,-1);f.add("Key deleted",1),m.show()}))),(e=>{}),(e=>{})),t.list.editApeKey=new k("editApeKey","text","Edit Ape Key",[{placeholder:"Name",initVal:""}],"","Edit",((e,t)=>s(void 0,void 0,void 0,(function*(){p.show();const o=yield d.default.apeKeys.update(e.parameters[0],{name:t});if(p.hide(),200!==o.status)return f.add("Failed to update key: "+o.message,-1);f.add("Key updated",1),m.show()}))),(e=>{}),(e=>{})),t.list.saveCustomText=new k("saveCustomText","text","Save custom text",[{placeholder:"Name",initVal:""}],"","Save",((e,t)=>{const o=$("#customTextPopup textarea").val().normalize();v.setCustomText(t,o),f.add("Custom text saved",1),y.show()}),(()=>{}),(()=>{})),t.list.deleteCustomText=new k("deleteCustomText","text","Delete custom text",[],"Are you sure?","Delete",(e=>{v.deleteCustomText(e.parameters[0]),f.add("Custom text deleted",1),b.show()}),(e=>{e.text=`Are you sure you want to delete custom text ${e.parameters[0]}?`}),(()=>{})),t.list.updateCustomTheme=new k("updateCustomTheme","text","Update Custom Theme",[{type:"text",placeholder:"Name",initVal:""},{type:"checkbox",initVal:"false",label:"Update custom theme to current colors"}],"","Update",((e,t,o)=>s(void 0,void 0,void 0,(function*(){const n=l.getSnapshot().customThemes.find((t=>t._id===e.parameters[0]));if(void 0===n)return void f.add("Custom theme does not exist",-1);let a=[];"true"===o?$.each($(".pageSettings .customTheme .customThemeEdit [type='color']"),((e,t)=>{a.push($(t).attr("value"))})):a=n.colors;const i={name:t.replaceAll(" ","_"),colors:a};p.show();const s=yield l.editCustomTheme(n._id,i);p.hide(),s&&(c.setCustomThemeColors(a),f.add("Custom theme updated",1),g.refreshButtons())}))),(e=>{const t=l.getSnapshot().customThemes.find((t=>t._id===e.parameters[0]));t&&(e.inputs[0].initVal=t.name)}),(e=>{})),t.list.deleteCustomTheme=new k("deleteCustomTheme","text","Delete Custom Theme",[],"Are you sure?","Delete",(e=>s(void 0,void 0,void 0,(function*(){p.show(),yield l.deleteCustomTheme(e.parameters[0]),p.hide(),f.add("Custom theme deleted",1),g.refreshButtons()}))),(e=>{}),(e=>{})),$(".pageSettings .section.discordIntegration #unlinkDiscordButton").on("click",(()=>{t.list.unlinkDiscord.show()})),$(".pageSettings #removeGoogleAuth").on("click",(()=>{t.list.removeGoogleAuth.show()})),$("#resetSettingsButton").on("click",(()=>{t.list.resetSettings.show()})),$(".pageSettings #resetPersonalBestsButton").on("click",(()=>{t.list.resetPersonalBests.show()})),$(".pageSettings #updateAccountName").on("click",(()=>{t.list.updateName.show()})),$(document).on("click","#bannerCenter .banner .text .openNameChange",(()=>{t.list.updateName.show()})),$(".pageSettings #addPasswordAuth").on("click",(()=>{t.list.addPasswordAuth.show()})),$(".pageSettings #emailPasswordAuth").on("click",(()=>{t.list.updateEmail.show()})),$(".pageSettings #passPasswordAuth").on("click",(()=>{t.list.updatePassword.show()})),$(".pageSettings #deleteAccount").on("click",(()=>{t.list.deleteAccount.show()})),$(".pageSettings #resetAccount").on("click",(()=>{t.list.resetAccount.show()})),$("#apeKeysPopup .generateApeKey").on("click",(()=>{t.list.generateApeKey.show()})),$("#customTextPopup .buttonsTop .saveCustomText").on("click",(()=>{t.list.saveCustomText.show()})),$(document).on("click",".pageSettings .section.themes .customTheme .delButton",(e=>{const o=$(e.currentTarget).parent(".customTheme.button").attr("customThemeId");t.list.deleteCustomTheme.show([o])})),$(document).on("click",".pageSettings .section.themes .customTheme .editButton",(e=>{const o=$(e.currentTarget).parent(".customTheme.button").attr("customThemeId");t.list.updateCustomTheme.show([o])})),$(document).on("click","#savedTextsPopupWrapper .list .savedText .button.delete",(e=>{const o=$(e.target).siblings(".button.name").text();t.list.deleteCustomText.show([o])})),$(document).on("click","#apeKeysPopup table tbody tr .button.delete",(e=>{const o=$(e.target).closest("tr").attr("keyId");t.list.deleteApeKey.show([o])})),$(document).on("click","#apeKeysPopup table tbody tr .button.edit",(e=>{const o=$(e.target).closest("tr").attr("keyId");t.list.editApeKey.show([o])})),$(document).on("click",".pageSettings .section.fontFamily .button.custom",(()=>{t.list.applyCustomFont.show([])})),$(document).on("keydown",(e=>{"Escape"!==e.key||$("#simplePopupWrapper").hasClass("hidden")||(x(),e.preventDefault())}))},4660:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const s=i(o(9654)),r=i(o(2400));$(document.body).on("click","#supportMeButton, #supportMeAboutButton",(()=>{$("#supportMeWrapper").css("opacity",0).removeClass("hidden").animate({opacity:1},125)})),$(document.body).on("click","#supportMeWrapper",(()=>{$("#supportMeWrapper").css("opacity",1).animate({opacity:0},125,(()=>{$("#supportMeWrapper").addClass("hidden")}))})),$(document.body).on("click","#supportMeWrapper .button.ads",(()=>{r.pushCurrent(r.commandsEnableAds),s.show(),$("#supportMeWrapper").css("opacity",1).animate({opacity:0},125,(()=>{$("#supportMeWrapper").addClass("hidden")}))})),$(document.body).on("click","#supportMeWrapper a.button",(()=>{$("#supportMeWrapper").css("opacity",1).animate({opacity:0},125,(()=>{$("#supportMeWrapper").addClass("hidden")}))})),$(document.body).on("keypress","#supportMeButton, #supportMeAboutButton",(e=>{"Enter"===e.key&&$(e.currentTarget).trigger("click")})),$(document).on("keydown",(e=>{"Escape"!==e.key||$("#supportMeWrapper").hasClass("hidden")||$("#supportMeWrapper").css("opacity",1).animate({opacity:0},125,(()=>{$("#supportMeWrapper").addClass("hidden")}))}))},2666:(e,t)=>{function o(){$("#versionHistoryWrapper").css("opacity",0).removeClass("hidden").animate({opacity:1},125)}Object.defineProperty(t,"__esModule",{value:!0}),t.show=void 0,t.show=o,$(document.body).on("click",".version",(e=>{e.shiftKey||o()})),$(document.body).on("click","#versionHistoryWrapper",(e=>{"versionHistoryWrapper"===$(e.target).attr("id")&&$("#versionHistoryWrapper").css("opacity",1).animate({opacity:0},125,(()=>{$("#versionHistoryWrapper").addClass("hidden")}))}))},9231:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.show=void 0;const r=i(o(3388)),d=i(o(8248));let u=!1;function l(){$("#wordFilterPopupWrapper").addClass("hidden"),$("#customTextPopupWrapper").removeClass("hidden")}t.show=function(){return s(this,void 0,void 0,(function*(){yield function(){return s(this,void 0,void 0,(function*(){u||($("#wordFilterPopup .languageInput").empty(),(yield r.getLanguageList()).forEach((e=>{let t=e;t=t.replace("_"," "),$("#wordFilterPopup .languageInput").append(`\n        <option value=${e}>${t}</option>\n      `)})),u=!0)}))}(),$("#wordFilterPopupWrapper").removeClass("hidden"),$("#customTextPopupWrapper").addClass("hidden"),$("#wordFilterPopup .languageInput").select2({width:"100%"})}))},$("#wordFilterPopupWrapper").on("mousedown",(e=>{"wordFilterPopupWrapper"===$(e.target).attr("id")&&l()})),$("#wordFilterPopup .languageInput").one("select2:open",(function(){$("input.select2-search__field").prop("placeholder","search")})),$("#wordFilterPopupWrapper .button").on("mousedown",(e=>{$("#wordFilterPopupWrapper .loadingIndicator").removeClass("hidden"),$("#wordFilterPopupWrapper .button").addClass("hidden"),setTimeout((()=>{(function(e){return s(this,void 0,void 0,(function*(){const t=$("#wordFilterPopup .languageInput").val(),o=yield function(e){return s(this,void 0,void 0,(function*(){let t=$("#wordFilterPopup .wordIncludeInput").val();t=r.escapeRegExp(null==t?void 0:t.trim()),t=t.replace(/\s+/gi,"|");const o=new RegExp(t,"i");let n=$("#wordFilterPopup .wordExcludeInput").val();n=r.escapeRegExp(n.trim()),n=n.replace(/\s+/gi,"|");const a=new RegExp(n,"i"),i=[],s=yield r.getLanguage(e),d=$("#wordFilterPopup .wordMaxInput").val(),u=$("#wordFilterPopup .wordMinInput").val();let l,c;l=""==d?999:parseInt(d),c=""==u?1:parseInt(u);for(let e=0;e<s.words.length;e++){const t=s.words[e],r=o.test(t),d=a.test(t);(r&&!d||r&&""==n)&&t.length<=l&&t.length>=c&&i.push(t)}return i}))}(t),n=o.join(d.delimiter);$("#customTextPopup textarea").val(((t,o)=>(e?"":o+" ")+n)),l()}))})($(e.target).is("#set")).then((()=>{$("#wordFilterPopupWrapper .loadingIndicator").addClass("hidden"),$("#wordFilterPopupWrapper .button").removeClass("hidden")}))}),1)}))},8325:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const s=i(o(2203)),r=i(o(6705)),d=r,u=i(o(3388)),l=i(o(6578)),c=i(o(8980)),p=i(o(3368)),f=i(o(8911)),h=i(o(4044)),m=i(o(2709)),g=o(6144);s.set(),d.loadFromLocalStorage(),"localhost"===window.location.hostname?($("#bottom .version .text").text("localhost"),$("#bottom .version").css("opacity",1),$("body").prepend("<a class='button configureAPI' href='http://localhost:5005/configure/' target='_blank'><i class=\"fas fa-fw fa-server\"></i>Configure Server</a>")):u.getReleasesFromGitHub().then((e=>{c.show(e[0].name)})),$("#nocss .requestedStylesheets").html("Requested stylesheets:<br>"+[...document.querySelectorAll("link[rel=stylesheet")].map((e=>e.href)).filter((e=>/\/css\//gi.test(e))).join("<br>")+"<br><br>Client version:<br>"+g.CLIENT_VERSION),f.set(!0,!0),$(document).ready((()=>{h.check(),$("body").css("transition","all .25s, transform .05s"),"tab"!==r.default.quickRestart&&"esc"!==r.default.quickRestart||$("#restartTestButton").addClass("hidden"),window.localStorage.getItem("merchbannerclosed")||p.addBanner('Check out our merchandise, available at <a target="_blank" href="https://monkeytype.store/">monkeytype.store</a>',1,"images/merchdropwebsite2.png",!1,(()=>{window.localStorage.setItem("merchbannerclosed","true")}),!0),$("#centerContent").css("opacity","0").removeClass("hidden").stop(!0,!0).animate({opacity:1},250),m.show(),l.init()}))},8427:function(e,t,o){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(o(6705));t.default=class{constructor(e,t,o,n,i){this.configName=e,this.configValue=a.default[e],this.mode=o,this.configFunction=t,this.setCallback=n,this.updateCallback=i,this.updateInput(),"select"===this.mode?$(document).on("change",`.pageSettings .section.${this.configName} select`,(e=>{const t=$(e.currentTarget);t.hasClass("disabled")||t.hasClass("no-auto-handle")||this.setValue(t.val())})):"button"===this.mode&&$(document).on("click",`.pageSettings .section.${this.configName} .button`,(t=>{const o=$(t.currentTarget);if(o.hasClass("disabled")||o.hasClass("no-auto-handle"))return;let n=o.attr(e);const a=o.attr("params");(n||a)&&("true"===n&&(n=!0),"false"===n&&(n=!1),this.setValue(n,a))}))}setValue(e,t){void 0===t?this.configFunction(e):this.configFunction(e,...t),this.updateInput(),this.setCallback&&this.setCallback()}updateInput(){this.configValue=a.default[this.configName],$(`.pageSettings .section.${this.configName} .button`).removeClass("active"),"select"===this.mode?$(`.pageSettings .section.${this.configName} select`).val(this.configValue).trigger("change.select2"):"button"===this.mode&&$(`.pageSettings .section.${this.configName} .button[${this.configName}='${this.configValue}']`).addClass("active"),this.updateCallback&&this.updateCallback()}}},4216:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.updateActiveTab=t.saveCustomThemeColors=t.setCustomInputs=t.refreshButtons=t.updateActiveButton=void 0;const r=i(o(6705)),d=r,u=i(o(743)),l=i(o(3388)),c=i(o(3368)),p=i(o(4203)),f=i(o(1833)),h=i(o(8628)),m=i(o(9817)),g=i(o(6350)),v=i(o(1446)),y=o(6617);function b(){let e=r.default.theme;"off"!==r.default.randomTheme&&"custom"!==r.default.randomTheme&&null!==u.randomTheme&&(e=u.randomTheme),$(".pageSettings .section.themes .theme").removeClass("active"),$(`.pageSettings .section.themes .theme[theme=${e}]`).addClass("active")}function w(e,t,o=!1,n=!1){if(o){const o=e.find("input.color").attr("id");void 0===o&&console.error("Could not find color ID!"),n||void 0===o||document.documentElement.style.setProperty(o,t);const a=e.find("label");return a.val(t),a.attr("value",t),"--bg-color"!==a.attr("for")&&a.css("background-color",t),e.find("input.input").val(t),void e.find("input.color").attr("value",t)}const a=[{rule:/\b[0-9]{1,3},\s?[0-9]{1,3},\s?[0-9]{1,3}\s*\b/,start:"rgb(",end:")"},{rule:/\b[A-Z, a-z, 0-9]{6}\b/,start:"#",end:""},{rule:/\b[0-9]{1,3},\s?[0-9]{1,3}%,\s?[0-9]{1,3}%?\s*\b/,start:"hsl(",end:")"}];t=t.replace("°","");for(const e of a)if(t.match(e.rule)){t=e.start+t+e.end;break}$(".colorConverter").css("color",t);const i=l.convertRGBtoHEX($(".colorConverter").css("color"));if(void 0===i)return;t=i;const s=e.find("input.color").attr("id");void 0===s&&console.error("Could not find color ID!"),n||void 0===s||document.documentElement.style.setProperty(s,t);const r=e.find("label");r.val(t),r.attr("value",t),"--bg-color"!==r.attr("for")&&r.css("background-color",t),e.find("input.input").val(t),e.find("input.color").attr("value",t)}function C(){return s(this,void 0,void 0,(function*(){if(r.default.customTheme){const e=$(".pageSettings .section.themes .allCustomThemes.buttons").empty(),t=$(".pageSettings .section.themes .addCustomThemeButton");if(null===y.Auth.currentUser)return void $(".pageSettings .section.themes .customThemeEdit .saveCustomThemeButton").text("save");$(".pageSettings .section.themes .customThemeEdit .saveCustomThemeButton").text("save as new"),t.removeClass("hidden"),g.getSnapshot().customThemes.forEach((t=>{const o=t.colors[0],n=t.colors[1];e.append(`<div class="customTheme button" customThemeId='${t._id}' \n        style="color:${n};background:${o}">\n        <div class="editButton"><i class="fas fa-pen"></i></div>\n        <div class="text">${t.name.replace(/_/g," ")}</div>\n        <div class="delButton"><i class="fas fa-trash fa-fw"></i></div>\n        </div>`)}))}else{const e=$(".pageSettings .section.themes .favThemes.buttons").empty(),t=$(".pageSettings .section.themes .allThemes.buttons").empty();let o=r.default.theme;"off"!==r.default.randomTheme&&"custom"!==r.default.randomTheme&&null!==u.randomTheme&&(o=u.randomTheme);const n=yield l.getSortedThemesList();r.default.favThemes.length>0?(e.css({paddingBottom:"1rem"}),n.forEach((t=>{if(r.default.favThemes.includes(t.name)){const n=o===t.name?"active":"";e.append(`<div class="theme button ${n}" theme='${t.name}' \n            style="color:${t.mainColor};background:${t.bgColor}">\n            <div class="activeIndicator"><i class="fas fa-circle"></i></div>\n            <div class="text">${t.name.replace(/_/g," ")}</div>\n            <div class="favButton active"><i class="fas fa-star"></i></div></div>`)}}))):e.css({paddingBottom:"0"}),n.forEach((e=>{if(r.default.favThemes.includes(e.name))return;const n=o===e.name?"active":"";t.append(`<div class="theme button ${n}" theme='${e.name}' style="color:${e.mainColor};background:${e.bgColor}">\n        <div class="activeIndicator"><i class="fas fa-circle"></i></div>\n        <div class="text">${e.name.replace(/_/g," ")}</div>\n        <div class="favButton"><i class="far fa-star"></i></div></div>`)}))}b()}))}function S(){const e=[];$.each($(".pageSettings .customTheme .customThemeEdit [type='color']"),((t,o)=>{e.push($(o).attr("value"))})),d.setCustomThemeColors(e),c.add("Custom theme saved",1)}function _(e=!1){const t=$(".pageSettings .section.themes .tabs .button[tab='preset']"),o=$(".pageSettings .section.themes .tabs .button[tab='custom']");r.default.customTheme?(t.removeClass("active"),o.hasClass("active")&&!e||(o.addClass("active"),C()),l.swapElements($('.pageSettings [tabContent="preset"]'),$('.pageSettings [tabContent="custom"]'),250)):(o.removeClass("active"),t.hasClass("active")&&!e||(t.addClass("active"),C()),l.swapElements($('.pageSettings [tabContent="custom"]'),$('.pageSettings [tabContent="preset"]'),250))}t.updateActiveButton=b,t.refreshButtons=C,t.setCustomInputs=function(e=!1){$(".pageSettings .section.themes .tabContainer .customTheme .colorPicker").each(((t,o)=>{const n=r.default.customThemeColors[u.colorVars.indexOf($(o).find("input.color").attr("id"))];w($(o),n,!1,e)}))},t.saveCustomThemeColors=S,t.updateActiveTab=_,$(".pageSettings .section.themes .tabs .button").on("click",(e=>{$(".pageSettings .section.themes .tabs .button").removeClass("active");const t=$(e.currentTarget);t.addClass("active"),"preset"==t.attr("tab")?d.setCustomTheme(!1):d.setCustomTheme(!0)})),$(document).on("click",".pageSettings .section.themes .customTheme.button",(e=>{var t;if($(e.target).hasClass("delButton"))return;if($(e.target).hasClass("editButton"))return;const o=null!==(t=$(e.currentTarget).attr("customThemeId"))&&void 0!==t?t:"";u.set(o,!0)})),$(document).on("click",".pageSettings .section.themes .theme .favButton",(e=>{const t=$(e.currentTarget).parents(".theme.button").attr("theme");void 0!==t?function(e){if(r.default.favThemes.includes(e))d.setFavThemes(r.default.favThemes.filter((t=>t!==e)));else{const t=r.default.favThemes;t.push(e),d.setFavThemes(t)}d.saveFullConfigToLocalStorage()}(t):console.error("Could not find the theme attribute attached to the button clicked!")})),$(document).on("click",".pageSettings .section.themes .theme.button",(e=>{const t=$(e.currentTarget).attr("theme");$(e.target).hasClass("favButton")||void 0===t||(d.setTheme(t),b())})),$(".pageSettings .section.themes .tabContainer .customTheme input[type=color]").on("input",(e=>{const t=$(e.currentTarget).attr("id"),o=$(e.currentTarget).val();w($(".colorPicker #"+t).parent(),o,!0)})),$(".pageSettings .section.themes .tabContainer .customTheme input[type=color]").on("change",(e=>{const t=$(e.currentTarget).attr("id"),o=$(e.currentTarget).val();w($(".colorPicker #"+t).parent(),o)})),$(".pageSettings .section.themes .tabContainer .customTheme input.input").on("blur",(e=>{if("name"===e.target.id)return;const t=$(e.currentTarget).attr("id"),o=$(e.currentTarget).val();w($(".colorPicker #"+t).parent(),o)})).on("keypress",(function(e){if("name"!==e.target.id&&"Enter"===e.code){$(this).attr("disabled","disabled");const t=$(e.currentTarget).attr("id"),o=$(e.currentTarget).val();w($(".colorPicker #"+t).parent(),o),$(this).removeAttr("disabled")}})),$(".pageSettings #loadCustomColorsFromPreset").on("click",(()=>{$("#currentTheme").attr("href",`themes/${r.default.theme}.css`),u.colorVars.forEach((e=>{document.documentElement.style.setProperty(e,"")})),setTimeout((()=>s(void 0,void 0,void 0,(function*(){f.updateAllChartColors();const e=yield p.getAll();u.colorVars.forEach((t=>{let o;"--bg-color"===t?o=e.bg:"--main-color"===t?o=e.main:"--sub-color"===t?o=e.sub:"--sub-alt-color"===t?o=e.subAlt:"--caret-color"===t?o=e.caret:"--text-color"===t?o=e.text:"--error-color"===t?o=e.error:"--error-extra-color"===t?o=e.errorExtra:"--colorful-error-color"===t?o=e.colorfulError:"--colorful-error-extra-color"===t&&(o=e.colorfulErrorExtra),w($(".colorPicker #"+t).parent(),o)}))}))),250)})),$("#shareCustomThemeButton").on("click",(()=>{const e=[];$.each($(".pageSettings .customTheme .customThemeEdit [type='color']"),((t,o)=>{e.push($(o).attr("value"))}));const t="https://monkeytype.com?customTheme="+btoa(JSON.stringify(e));navigator.clipboard.writeText(t).then((function(){c.add("URL Copied to clipboard",0)}),(function(){h.show(t)}))})),$(".pageSettings .saveCustomThemeButton").on("click",(()=>s(void 0,void 0,void 0,(function*(){if(S(),y.Auth.currentUser){const e={name:"custom",colors:r.default.customThemeColors};m.show();const t=yield g.addCustomTheme(e);m.hide(),t&&_(!0)}else _(!0)})))),v.subscribe((e=>{"customThemeId"===e&&C()}))},7346:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.set=t.get=void 0;let o="loading";t.get=function(){return o},t.set=function(e){o=e}},8526:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setStartPos=t.setComposing=t.getStartPos=t.getComposing=t.get=void 0;const o={composing:!1,startPos:-1};t.get=function(){return o},t.getComposing=function(){return o.composing},t.getStartPos=function(){return o.startPos},t.setComposing=function(e){o.composing=e},t.setStartPos=function(e){o.startPos=e}},9029:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.get=void 0;let o=!1;t.get=function(){return o},t.enable=function(){o=!0,console.log("Glarses Mode On - test result will be hidden. You can check the stats in the console (here)"),console.log("To disable Glarses Mode refresh the page.")}},5705:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.get=t.set=void 0;let o=!0;t.set=function(e){o=e},t.get=function(){return o}},210:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.get=t.clear=t.set=void 0;let o=!1;t.set=function(){o||(o=!0,console.error("Slow timer, disabling animations"))},t.clear=function(){o=!1},t.get=function(){return o}},6443:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.set=t.get=void 0;let o=!1;t.get=function(){return o},t.set=function(e){o=e}},195:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.increment=t.set=t.get=void 0;let o=0;t.get=function(){return o},t.set=function(e){o=e},t.increment=function(){o++}},262:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.replace=t.getList=void 0;const a=o(3388);let i=[];function s(){return n(this,void 0,void 0,(function*(){return 0===i.length?$.getJSON("languages/britishenglish.json",(function(e){return i=e,i})):i}))}t.getList=s,t.replace=function(e){return n(this,void 0,void 0,(function*(){const t=(yield s()).find((t=>e.match(RegExp(`^([\\W]*${t[0]}[\\W]*)$`,"gi"))));return t?e.replace(RegExp(`^(?:([\\W]*)(${t[0]})([\\W]*))$`,"gi"),((e,o,n,i)=>o+(n.charAt(0)===n.charAt(0).toUpperCase()?n===n.toUpperCase()?t[1].toUpperCase():(0,a.capitalizeFirstLetterOfEachWord)(t[1]):t[1])+i)):e}))}},4173:function(e,t,o){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.capsState=void 0;const a=n(o(6705));function i(){$("#capsWarning").hasClass("hidden")&&$("#capsWarning").removeClass("hidden")}function s(){$("#capsWarning").hasClass("hidden")||$("#capsWarning").addClass("hidden")}t.capsState=!1,$(document).keydown((function(e){var o,n;(null===(o=null==e?void 0:e.originalEvent)||void 0===o?void 0:o.getModifierState)&&(null===(n=null==e?void 0:e.originalEvent)||void 0===n?void 0:n.getModifierState("CapsLock"))?t.capsState=!0:t.capsState=!1;try{a.default.capsLockWarning&&t.capsState?i():s()}catch(e){}})),$(document).keyup((function(e){var o,n;(null===(o=null==e?void 0:e.originalEvent)||void 0===o?void 0:o.getModifierState)&&(null===(n=null==e?void 0:e.originalEvent)||void 0===n?void 0:n.getModifierState("CapsLock"))?t.capsState=!0:t.capsState=!1;try{a.default.capsLockWarning&&t.capsState?i():s()}catch(e){}}))},4292:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.show=t.updatePosition=t.hide=t.startAnimation=t.stopAnimation=t.caretAnimating=void 0;const d=i(o(3388)),u=r(o(6705)),l=i(o(4897)),c=i(o(210)),p=i(o(6443));function f(){!1===t.caretAnimating&&(u.default.smoothCaret&&!c.get()?$("#caret").css("animation-name","caretFlashSmooth"):$("#caret").css("animation-name","caretFlashHard"),t.caretAnimating=!0)}function h(){var e,t,o,n,a,i,r;return s(this,void 0,void 0,(function*(){if($("#wordsWrapper").hasClass("hidden"))return;const s=$("#caret");let f=Math.round(null!==(t=null===(e=document.querySelector("#caret"))||void 0===e?void 0:e.getBoundingClientRect().width)&&void 0!==t?t:0);["block","outline","underline"].includes(u.default.caretStyle)&&(f/=3);const h=l.input.current.length;let m=h-1;-1==m&&(m=0);const g=0==$("#words .active").children().length;g&&$("#words .active").append('<letter style="opacity: 0;">_</letter>');const v=null===(o=null===document||void 0===document?void 0:document.querySelector("#words .active"))||void 0===o?void 0:o.querySelectorAll("letter");if(!v)return;let y=v[m];if(h>v.length&&(y=v[v.length-1]),"zen"!=u.default.mode&&0==$(y).length)return;const b=(yield d.getCurrentLanguage(u.default.language)).leftToRight,w=b?y.offsetLeft:y.offsetLeft+(null!==(n=$(y).width())&&void 0!==n?n:0),C=y.offsetTop,S=$(y).height();let _=0,k=0;if(_=C-Math.round(S/5),"letter"===u.default.tapeMode)k=(null!==(a=$(document.querySelector("#wordsWrapper")).width())&&void 0!==a?a:0)/2-f/2;else if("word"===u.default.tapeMode)if(0==h)k=(null!==(i=$(document.querySelector("#wordsWrapper")).width())&&void 0!==i?i:0)/2-f/2;else{let e=0;for(let t=0;t<h;t++)e+=$(v[t]).outerWidth(!0);k=(null!==(r=$(document.querySelector("#wordsWrapper")).width())&&void 0!==r?r:0)/2+e-f/2}else k=0==h?b?w-f/2:w+f/2:b?w+$(y).width()-f/2:w-$(y).width()+f/2;let x=$("#words .smoothScroller").height();if(void 0===x&&(x=0),u.default.smoothCaret?s.stop(!0,!1).animate({top:_-x,left:k},c.get()?0:100):s.stop(!0,!0).animate({top:_-x,left:k},0),u.default.showAllLines){const e=window.innerHeight,t=e/2-$("#caret").outerHeight()/2,o=document.body.scrollHeight;if(_>=t&&o>e&&p.get()){const e=_-t/2;window.scrollTo({left:0,top:e,behavior:"smooth"})}}g&&$("#words .active").children().remove()}))}t.caretAnimating=!0,t.stopAnimation=function(){!0===t.caretAnimating&&($("#caret").css("animation-name","none"),$("#caret").css("opacity","1"),t.caretAnimating=!1)},t.startAnimation=f,t.hide=function(){$("#caret").addClass("hidden")},t.updatePosition=h,t.show=function(){$("#result").hasClass("hidden")&&($("#caret").removeClass("hidden"),h(),f())}},8248:(e,t)=>{function o(){var e;return JSON.parse(null!==(e=window.localStorage.getItem("customText"))&&void 0!==e?e:"{}")}Object.defineProperty(t,"__esModule",{value:!0}),t.getCustomTextNames=t.deleteCustomText=t.setCustomText=t.getCustomText=t.setDelimiter=t.setWord=t.setTime=t.setIsTimeRandom=t.setIsWordRandom=t.setText=t.delimiter=t.time=t.word=t.isTimeRandom=t.isWordRandom=t.text=void 0,t.text=["The","quick","brown","fox","jumps","over","the","lazy","dog"],t.isWordRandom=!1,t.isTimeRandom=!1,t.word=-1,t.time=-1,t.delimiter=" ",t.setText=function(e){t.text=e},t.setIsWordRandom=function(e){t.isWordRandom=e},t.setIsTimeRandom=function(e){t.isTimeRandom=e},t.setTime=function(e){t.time=e},t.setWord=function(e){t.word=e},t.setDelimiter=function(e){t.delimiter=e},t.getCustomText=function(e){return o()[e].split(/ +/)},t.setCustomText=function(e,t){const n=o();n[e]="string"==typeof t?t:t.join(" "),window.localStorage.setItem("customText",JSON.stringify(n))},t.deleteCustomText=function(e){const t=o();t[e]&&delete t[e],window.localStorage.setItem("customText",JSON.stringify(t))},t.getCustomTextNames=function(){return Object.keys(o())}},476:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.replace=t.check=t.getList=void 0;let n=[];function a(){return o(this,void 0,void 0,(function*(){return 0===n.length?$.getJSON("languages/english_punctuation.json",(function(e){return n=e,n})):n}))}t.getList=a,t.check=function(e){return o(this,void 0,void 0,(function*(){return void 0!==(yield a()).find((t=>e.match(RegExp(`^([\\W]*${t[0]}[\\W]*)$`,"gi"))))}))},t.replace=function(e){return o(this,void 0,void 0,(function*(){const t=(yield a()).find((t=>e.match(RegExp(`^([\\W]*${t[0]}[\\W]*)$`,"gi"))));return t?e.replace(RegExp(`^(?:([\\W]*)(${t[0]})([\\W]*))$`,"gi"),t[1]):e}))}},8911:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.set=void 0;const s=i(o(4292)),r=i(o(7346));let d=!1;function u(e,t=!1){e&&!d?(d=!0,s.stopAnimation(),$("#top").addClass("focus"),$("#bottom").addClass("focus"),t||$("body").css("cursor","none"),$("#middle").addClass("focus"),$("#bannerCenter").addClass("focus"),$("#capsWarning").addClass("focus")):!e&&d&&(d=!1,s.startAnimation(),$("#top").removeClass("focus"),$("#bottom").removeClass("focus"),$("body").css("cursor","default"),$("#middle").removeClass("focus"),$("#bannerCenter").removeClass("focus"),$("#capsWarning").removeClass("focus"))}t.set=u,$(document).mousemove((function(e){d&&"loading"!=r.get()&&("account"==r.get()&&1==d||$("#top").hasClass("focus")&&e.originalEvent&&(e.originalEvent.movementX>3||e.originalEvent.movementY>3)&&u(!1))}))},8059:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.rememberSettings=t.activate=t.clear=t.setFunbox=t.toggleScript=t.reset=t.startMemoryTimer=t.resetMemoryTimer=void 0;const r=i(o(9470)),d=i(o(3368)),u=i(o(3388)),l=i(o(2203)),c=i(o(6705)),p=c,f=i(o(6857)),h=i(o(2453));let m=null,g=null,v=null,y={};function b(e,t,o){var n;null!==(n=y[e])&&void 0!==n||(y[e]={value:t,setFunction:o})}function w(){$("#typingTest #memoryTimer").stop(!0,!0).animate({opacity:0},125)}function C(){null!==v&&(clearInterval(v),v=null),g=null,w()}function S(e){$("#typingTest #memoryTimer").text(`Timer left to memorise all words: ${e}s`)}function _(){C()}function k(){return s(this,void 0,void 0,(function*(){return $("#funBoxTheme").attr("href",""),$("#words").removeClass("nospace"),$("#words").removeClass("arrows"),_(),$("#wordsWrapper").removeClass("hidden"),l.set(),h.update(),!0}))}t.resetMemoryTimer=C,t.startMemoryTimer=function(){C(),g=Math.round(Math.pow(r.words.length,1.2)),S(g),$("#typingTest #memoryTimer").stop(!0,!0).animate({opacity:1},125),v=setInterval((()=>{null!==g&&(g-=1,0==g?w():S(g),g<=0&&(C(),$("#wordsWrapper").addClass("hidden")))}),1e3)},t.reset=_,t.toggleScript=function(...e){"tts"===c.default.funbox&&f.speak(e[0])},t.setFunbox=function(e,t){return m=t,p.setFunbox(e,!1),"none"===e&&(d.add("Reverting funbox settings",0),Object.keys(y).forEach((e=>{y[e].setFunction(y[e].value,!0)})),y={}),!0},t.clear=k,t.activate=function(e){return s(this,void 0,void 0,(function*(){let t=m;null==e&&(e=c.default.funbox);const o=yield u.getFunbox(e);return $("#funBoxTheme").attr("href",""),$("#words").removeClass("nospace"),$("#words").removeClass("arrows"),!(yield u.getCurrentLanguage(c.default.language)).ligatures||"choo_choo"!=e&&"earthquake"!=e?"none"===e||"zen"!==c.default.mode&&"quote"!=c.default.mode||!0!==(null==o?void 0:o.affectsWordGeneration)?(_(),$("#wordsWrapper").removeClass("hidden"),"none"===e&&void 0===t?t=null:("none"!==e&&void 0===t||"none"!==e&&null===t)&&(t=(yield u.getFunboxList()).filter((t=>t.name===e))[0].type),l.set(),"style"===t?(null!=e&&$("#funBoxTheme").attr("href",`funbox/${e}.css`),"simon_says"===e&&p.setKeymapMode("next",!0),"read_ahead"!==e&&"read_ahead_easy"!==e&&"read_ahead_hard"!==e||p.setHighlightMode("letter",!0)):"script"===t&&("tts"===e?($("#funBoxTheme").attr("href","funbox/simon_says.css"),p.setKeymapMode("off",!0),p.setHighlightMode("letter",!0)):"layoutfluid"===e?(p.setLayout(c.default.customLayoutfluid?c.default.customLayoutfluid.split("#")[0]:"qwerty",!0),p.setKeymapLayout(c.default.customLayoutfluid?c.default.customLayoutfluid.split("#")[0]:"qwerty",!0)):"memory"===e?(p.setMode("words",!0),p.setShowAllLines(!0,!0),"next"===c.default.keymapMode&&p.setKeymapMode("react",!0)):"nospace"===e?($("#words").addClass("nospace"),p.setHighlightMode("letter",!0)):"arrows"===e&&($("#words").addClass("arrows"),p.setHighlightMode("letter",!0))),!0):(d.add(`${u.capitalizeFirstLetterOfEachWord(c.default.mode)} mode does not support the ${e} funbox`,0),p.setFunbox("none",!0),void(yield k())):(d.add("Current language does not support this funbox mode",0),p.setFunbox("none",!0),void(yield k()))}))},t.rememberSettings=function(){return s(this,void 0,void 0,(function*(){const e=c.default.funbox;let t=m;"none"===e&&void 0===t?t=null:("none"!==e&&void 0===t||"none"!==e&&null===t)&&(t=(yield u.getFunboxList()).filter((t=>t.name===e))[0].type),"style"===t?("simon_says"===e&&b("keymapMode",c.default.keymapMode,p.setKeymapMode),"read_ahead"!==e&&"read_ahead_easy"!==e&&"read_ahead_hard"!==e||b("highlightMode",c.default.highlightMode,p.setHighlightMode)):"script"===t&&("tts"===e?b("keymapMode",c.default.keymapMode,p.setKeymapMode):"layoutfluid"===e?(b("keymapMode",c.default.keymapMode,p.setKeymapMode),b("layout",c.default.layout,p.setLayout),b("keymapLayout",c.default.keymapLayout,p.setKeymapLayout)):"memory"===e?(b("mode",c.default.mode,p.setMode),b("showAllLines",c.default.showAllLines,p.setShowAllLines),"next"===c.default.keymapMode&&b("keymapMode",c.default.keymapMode,p.setKeymapMode)):"nospace"===e||"arrows"===e?b("highlightMode",c.default.highlightMode,p.setHighlightMode):"58008"===e&&b("numbers",c.default.numbers,p.setNumbers))}))}},4583:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getCharFromEvent=void 0;const d=r(o(6705)),u=i(o(3388)),l=o(4173);t.getCharFromEvent=function(e){return s(this,void 0,void 0,(function*(){const t=yield u.getLayout(d.default.layout);let o=[];"ansi"===t.type?o=["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","Space"]:"iso"===t.type?o=["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Backslash","IntlBackslash","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","Space"]:"matrix"===t.type&&(o=["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","Space"]);const n=t.keys,a=n.row1.concat(n.row2).concat(n.row3).concat(n.row4).concat(n.row5);let i=null;for(let t=0;t<o.length;t++)e.code==o[t]&&(i=t);if(!i)return e.code.includes("Numpad")?e.key:null;const s=a[i][0],r=function(e,t){return l.capsState?u.isASCIILetter(t)!==e.shiftKey:e.shiftKey}(e,s)?1:0;return a[i][r]||e.key}))}},3439:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.replaceAccents=void 0;const o=[["áàâäåãąą́āą̄ă","a"],["éèêëẽęę́ēę̄ėě","e"],["íìîïĩįį́īį̄","i"],["óòôöøõóōǫǫ́ǭő","o"],["úùûüŭũúūůű","u"],["ńňñ","n"],["çĉčć","c"],["ř","r"],["ď","d"],["ťț","t"],["æ","ae"],["œ","oe"],["ẅŵ","w"],["ĝğg̃","g"],["ĥ","h"],["ĵ","j"],["ń","n"],["ŝśšș","s"],["ß","ss"],["żźž","z"],["ÿỹýÿŷ","y"],["łľ","l"],["أإآ","ا"],["َ",""],["ُ",""],["ِ",""],["ْ",""],["ً",""],["ٌ",""],["ٍ",""],["ّ",""]];t.replaceAccents=function(e,t){let n,a=e;if(!o&&!t)return a;const i=t||o;for(let e=0;e<i.length;e++)n=new RegExp(`[${i[e][0]}]`,"gi"),a=a.replace(n,i[e][1]);return a}},2331:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=t.update=void 0;const r=s(o(6705)),d=i(o(6443)),u=i(o(1446));function l(){if(r.default.showLiveAcc&&d.get())if("mini"===r.default.timerStyle){if(!$("#miniTimerAndLiveWpm .acc").hasClass("hidden"))return;$("#miniTimerAndLiveWpm .acc").removeClass("hidden").css("opacity",0).animate({opacity:r.default.timerOpacity},125)}else{if(!$("#liveAcc").hasClass("hidden"))return;$("#liveAcc").removeClass("hidden").css("opacity",0).animate({opacity:r.default.timerOpacity},125)}}function c(){$("#liveAcc").animate({opacity:r.default.timerOpacity},125,(()=>{$("#liveAcc").addClass("hidden")})),$("#miniTimerAndLiveWpm .acc").animate({opacity:r.default.timerOpacity},125,(()=>{$("#miniTimerAndLiveWpm .acc").addClass("hidden")}))}t.update=function(e){let t=Math.floor(e);r.default.blindMode&&(t=100),document.querySelector("#miniTimerAndLiveWpm .acc").innerHTML=t+"%",document.querySelector("#liveAcc").innerHTML=t+"%"},t.show=l,t.hide=c,u.subscribe(((e,t)=>{"showLiveAcc"===e&&(t?l():c())}))},8700:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=t.update=void 0;const d=r(o(6705)),u=i(o(6443)),l=i(o(1446));function c(){if(d.default.showLiveBurst&&u.get())if("mini"===d.default.timerStyle){if(!$("#miniTimerAndLiveWpm .burst").hasClass("hidden"))return;$("#miniTimerAndLiveWpm .burst").removeClass("hidden").css("opacity",0).animate({opacity:d.default.timerOpacity},125)}else{if(!$("#liveBurst").hasClass("hidden"))return;$("#liveBurst").removeClass("hidden").css("opacity",0).animate({opacity:d.default.timerOpacity},125)}}function p(){$("#liveBurst").animate({opacity:d.default.timerOpacity},125,(()=>{$("#liveBurst").addClass("hidden")})),$("#miniTimerAndLiveWpm .burst").animate({opacity:d.default.timerOpacity},125,(()=>{$("#miniTimerAndLiveWpm .burst").addClass("hidden")}))}t.update=function(e){return s(this,void 0,void 0,(function*(){if(!d.default.showLiveBurst)return;let t=e;d.default.blindMode&&(t=0),document.querySelector("#miniTimerAndLiveWpm .burst").innerHTML=t.toString(),document.querySelector("#liveBurst").innerHTML=t.toString()}))},t.show=c,t.hide=p,l.subscribe(((e,t)=>{"showLiveBurst"===e&&(t?c():p())}))},3261:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=t.update=void 0;const r=s(o(6705)),d=i(o(6443)),u=i(o(1446)),l=document.querySelector("#liveWpm"),c=document.querySelector("#miniTimerAndLiveWpm .wpm");function p(){if(r.default.showLiveWpm&&d.get())if("mini"===r.default.timerStyle){if(!$("#miniTimerAndLiveWpm .wpm").hasClass("hidden"))return;$("#miniTimerAndLiveWpm .wpm").removeClass("hidden").css("opacity",0).animate({opacity:r.default.timerOpacity},125)}else{if(!$("#liveWpm").hasClass("hidden"))return;$("#liveWpm").removeClass("hidden").css("opacity",0).animate({opacity:r.default.timerOpacity},125)}}function f(){$("#liveWpm").animate({opacity:r.default.timerOpacity},125,(()=>{$("#liveWpm").addClass("hidden")})),$("#miniTimerAndLiveWpm .wpm").animate({opacity:r.default.timerOpacity},125,(()=>{$("#miniTimerAndLiveWpm .wpm").addClass("hidden")}))}t.update=function(e,t){let o=e;r.default.blindMode&&(o=t),r.default.alwaysShowCPM&&(o=Math.round(5*o)),c.innerHTML=o.toString(),l.innerHTML=o.toString()},t.show=p,t.hide=f,u.subscribe(((e,t)=>{"showLiveWpm"===e&&(t?p():f())}))},2203:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.get=t.reset=t.set=void 0;let o=!1;t.set=function(){o=!0},t.reset=function(){o=!1},t.get=function(){return o}},7353:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=t.stop=t.type=t.updateFastOpacity=void 0;const r=o(3388),d=s(o(6705)),u=i(o(1446)),l=i(o(6443));u.subscribe((e=>{"monkey"===e&&l.get()&&(d.default.monkey?$("#monkey").removeClass("hidden"):$("#monkey").addClass("hidden"))}));let c=!1,p=!1;const f={"00":document.querySelector("#monkey .up"),"01":document.querySelector("#monkey .right"),10:document.querySelector("#monkey .left"),11:document.querySelector("#monkey .both")},h={"00":document.querySelector("#monkey .fast .up"),"01":document.querySelector("#monkey .fast .right"),10:document.querySelector("#monkey .fast .left"),11:document.querySelector("#monkey .fast .both")};let m="right";function g(e){return e?"1":"0"}function v(){var e,t,o;if(d.default.monkey&&!(null===(e=document.querySelector("#monkey"))||void 0===e?void 0:e.classList.contains("hidden"))){Object.keys(f).forEach((e=>{var t;null===(t=f[e])||void 0===t||t.classList.add("hidden")})),Object.keys(h).forEach((e=>{var t;null===(t=h[e])||void 0===t||t.classList.add("hidden")}));const e=`${g(c)}${g(p)}`;null===(t=f[e])||void 0===t||t.classList.remove("hidden"),null===(o=h[e])||void 0===o||o.classList.remove("hidden")}}t.updateFastOpacity=function(e){if(!d.default.monkey)return;const t=(0,r.mapRange)(e,130,180,0,1);$("#monkey .fast").animate({opacity:t},1e3);let o=(0,r.mapRange)(e,130,180,.25,.01);.25==o&&(o=0),$("#monkey").css({animationDuration:o+"s"})},t.type=function(){d.default.monkey&&(c||"right"!=m?p||(p=!0,m="right"):(c=!0,m="left"),v())},t.stop=function(){d.default.monkey&&(c?c=!1:p&&(p=!1),v())},t.show=function(){d.default.monkey&&$("#monkey").css("opacity",0).removeClass("hidden").animate({opacity:1},125)},t.hide=function(){$("#monkey").css("opacity",1).animate({opacity:1},125,(()=>{$("#monkey").addClass("hidden")}))}},1333:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.show=t.hide=void 0;const s=i(o(3388)),r=[];t.hide=function(){$("#words").css("transition","none").removeClass("blurred"),$(".outOfFocusWarning").addClass("hidden"),s.clearTimeouts(r)},t.show=function(){r.push(setTimeout((()=>{$("#words").css("transition","0.25s").addClass("blurred"),$(".outOfFocusWarning").removeClass("hidden")}),1e3))}},5886:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.start=t.handleSpace=t.reset=t.update=t.init=t.settings=void 0;const d=i(o(2474)),u=i(o(9470)),l=i(o(8673)),c=r(o(6705)),p=i(o(6350)),f=i(o(210)),h=i(o(3388)),m=i(o(6443)),g=i(o(1322)),v=i(o(1446));function y(){return s(this,void 0,void 0,(function*(){$("#paceCaret").addClass("hidden");const e=h.getMode2(c.default,u.randomQuote);let o;if("pb"===c.default.paceCaret?o=yield p.getLocalPB(c.default.mode,e,c.default.punctuation,c.default.language,c.default.difficulty,c.default.lazyMode,c.default.funbox):"average"===c.default.paceCaret?([o]=yield p.getUserAverage10(c.default.mode,e,c.default.punctuation,c.default.language,c.default.difficulty,c.default.lazyMode),o=Math.round(o)):"custom"===c.default.paceCaret?o=c.default.paceCaretCustomSpeed:"last"!==c.default.paceCaret&&1!=g.isPaceRepeat||(o=d.lastTestWpm),void 0===o||o<1||Number.isNaN(o))return void(t.settings=null);const n=5*o,a=n/60,i=60/n;t.settings={wpm:o,cps:a,spc:i,correction:0,currentWordIndex:0,currentLetterIndex:-1,wordsStatus:{},timeout:null},function(){var e;if("off"===c.default.paceCaret&&!g.isPaceRepeat)return;if($("#paceCaret").hasClass("hidden")||$("#paceCaret").addClass("hidden"),"zen"===c.default.mode)return;const t=$("#paceCaret"),o=null===(e=null===document||void 0===document?void 0:document.querySelector("#words .word"))||void 0===e?void 0:e.querySelector("letter"),n=$(o).height();void 0!==o&&void 0!==n&&t.stop(!0,!0).animate({top:o.offsetTop-n/4,left:o.offsetLeft},0,"linear")}()}))}function b(e){if(null!==t.settings&&m.get()&&!l.resultVisible){try{if(t.settings.currentLetterIndex++,t.settings.currentLetterIndex>=u.words.get(t.settings.currentWordIndex).length&&(t.settings.currentLetterIndex=-1,t.settings.currentWordIndex++),!c.default.blindMode)if(t.settings.correction<0)for(;t.settings.correction<0;)t.settings.currentLetterIndex--,t.settings.currentLetterIndex<=-2&&(t.settings.currentLetterIndex=u.words.get(t.settings.currentWordIndex-1).length-1,t.settings.currentWordIndex--),t.settings.correction++;else if(t.settings.correction>0)for(;t.settings.correction>0;)t.settings.currentLetterIndex++,t.settings.currentLetterIndex>=u.words.get(t.settings.currentWordIndex).length&&(t.settings.currentLetterIndex=-1,t.settings.currentWordIndex++),t.settings.correction--}catch(e){return t.settings=null,void $("#paceCaret").addClass("hidden")}try{const o=$("#paceCaret");let n,a,i;try{const e=t.settings.currentWordIndex-(u.words.currentIndex-l.currentWordElementIndex),s=document.querySelectorAll("#words .word")[e];n=-1===t.settings.currentLetterIndex?s.querySelectorAll("letter")[0]:s.querySelectorAll("letter")[t.settings.currentLetterIndex];const r=$(n).height(),d=$(n).width(),c=o.width();if(void 0===r||void 0===d||void 0===c)throw"";a=n.offsetTop-r/5,i=-1===t.settings.currentLetterIndex?n.offsetLeft:n.offsetLeft+d-c/2,o.removeClass("hidden")}catch(e){o.addClass("hidden")}const s=e-performance.now();if(void 0!==a){let e=$("#words .smoothScroller").height();void 0===e&&(e=0),$("#paceCaret").css({top:a-e}),c.default.smoothCaret?o.stop(!0,!0).animate({left:i},f.get()?0:s,"linear"):o.stop(!0,!0).animate({left:i},0,"linear")}t.settings.timeout=setTimeout((()=>{var o;try{b(e+1e3*(null!==(o=null===t.settings||void 0===t.settings?void 0:t.settings.spc)&&void 0!==o?o:0))}catch(e){t.settings=null}}),s)}catch(e){console.error(e),$("#paceCaret").addClass("hidden")}}}t.settings=null,t.init=y,t.update=b,t.reset=function(){null!==t.settings&&null!==t.settings.timeout&&clearTimeout(t.settings.timeout),t.settings=null},t.handleSpace=function(e,o){e?null===t.settings||!0!==t.settings.wordsStatus[u.words.currentIndex]||c.default.blindMode||(t.settings.wordsStatus[u.words.currentIndex]=void 0,t.settings.correction-=o.length+1):null===t.settings||void 0!==t.settings.wordsStatus[u.words.currentIndex]||c.default.blindMode||(t.settings.wordsStatus[u.words.currentIndex]=!0,t.settings.correction+=o.length+1)},t.start=function(){var e;b(performance.now()+1e3*(null!==(e=null===t.settings||void 0===t.settings?void 0:t.settings.spc)&&void 0!==e?e:0))},v.subscribe((e=>{"paceCaret"===e&&y()}))},5486:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.show=t.hide=void 0,t.hide=function(){$("#result .stats .wpm .crown").css("opacity",0).addClass("hidden")},t.show=function(){$("#result .stats .wpm .crown").removeClass("hidden").css("opacity","0").animate({opacity:1},250,"easeOutCubic")}},3118:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getPoem=t.Poem=void 0;const i=a(o(9669)),s=["—","_"," "];class r{constructor(e,t,o){this.title=e,this.author=t,this.words=o,this.cleanUpText()}cleanUpText(){let e=0;const t=[];for(let o=0;o<this.words.length;o++){let n="";for(let e=0;e<this.words[o].length;e++)s.includes(this.words[o][e])||(n+=this.words[o][e]);if(""!=n&&(t.push(n),e++,100==e))break}this.words=t}}t.Poem=r,t.getPoem=function(){return n(this,void 0,void 0,(function*(){console.log("Getting poem");const e=yield i.default.get("https://poetrydb.org/random");try{const t=e.data[0],o=[];return t.lines.forEach((e=>{e.split(/ +/).forEach((e=>{o.push(e)}))})),new r(t.title,t.author,o)}catch(e){console.log(e)}}))}},9196:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.hidePopup=t.showPopup=t.resetBefore=t.init=t.before=void 0;const s=i(o(9470)),r=i(o(3368)),d=i(o(6705)),u=d,l=i(o(8248)),c=i(o(4897)),p=i(o(1446));function f(){t.before.mode=null,t.before.punctuation=null,t.before.numbers=null}function h(e=!1){if($("#practiseWordsPopupWrapper").hasClass("hidden")){if("zen"===d.default.mode)return void r.add("Practice words is unsupported in zen mode",0);$("#practiseWordsPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},100,(()=>{e&&(console.log("focusing"),$("#practiseWordsPopup .missed").trigger("focus"))}))}}function m(){$("#practiseWordsPopupWrapper").hasClass("hidden")||$("#practiseWordsPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{$("#practiseWordsPopupWrapper").addClass("hidden")}))}t.before={mode:null,punctuation:null,numbers:null},t.init=function(e,o){if("zen"===d.default.mode)return;let n;n=e&&!o||!e&&o?20:10;let a=[];if(e&&(Object.keys(c.missedWords).forEach((e=>{a.push([e,c.missedWords[e]])})),a.sort(((e,t)=>t[1]-e[1])),a=a.slice(0,n)),e&&!o&&0==a.length)return void r.add("You haven't missed any words",0);let i=[];if(o&&(i=s.words.get().map(((e,t)=>[e,c.burstHistory[t]])),i.sort(((e,t)=>e[1]-t[1])),i=i.slice(0,Math.min(n,Math.round(.2*s.words.length)))),0==a.length&&0==i.length)return void r.add("Could not start a new custom test",0);const p=[];a.forEach((e=>{for(let t=0;t<e[1];t++)p.push(e[0])})),i.forEach(((e,t)=>{for(let o=0;o<i.length-t;o++)p.push(e[0])}));const f=null===t.before.mode?d.default.mode:t.before.mode,h=null===t.before.punctuation?d.default.punctuation:t.before.punctuation,m=null===t.before.numbers?d.default.numbers:t.before.numbers;u.setMode("custom"),l.setText(p),l.setIsWordRandom(!0),l.setIsTimeRandom(!1),l.setWord(5*(i.length+a.length)),l.setTime(-1),t.before.mode=f,t.before.punctuation=h,t.before.numbers=m},t.resetBefore=f,t.showPopup=h,t.hidePopup=m,$("#practiseWordsPopupWrapper").on("click",(e=>{"practiseWordsPopupWrapper"===$(e.target).attr("id")&&m()})),$("#practiseWordsPopup .button").on("keypress",(e=>{"Enter"===e.key&&$(e.currentTarget).trigger("click")})),$("#practiseWordsPopup .button.both").on("focusout",(e=>{e.preventDefault(),$("#practiseWordsPopup .missed").trigger("focus")})),$(document).on("keydown",(e=>{"Escape"!==e.key||$("#practiseWordsPopupWrapper").hasClass("hidden")||(m(),e.preventDefault())})),$(document).on("keypress","#practiseWordsButton",(e=>{"Enter"===e.key&&h(!0)})),$(document.body).on("click","#practiseWordsButton",(()=>{h()})),p.subscribe((e=>{"mode"===e&&f()}))},4626:function(e,t,o){var n,a=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&a(t,e,o);return i(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getReplayExport=t.replayGetWordsList=t.addReplayEvent=t.stopReplayRecording=t.startReplayRecording=t.pauseReplay=void 0;const d=r(o(6705)),u=s(o(5929));let l=[],c=[],p=0,f=!0,h=0,m=0,g=0,v=0,y=[],b=[];const w=null===(n=document.getElementById("playpauseReplayButton"))||void 0===n?void 0:n.children[0];function C(){const e=document.getElementById("replayWords");if(null===e)return;e.innerHTML="";let t=0;c.forEach((e=>{"backWord"===e.action?t--:"submitCorrectWord"!==e.action&&"submitErrorWord"!==e.action||t++})),l.forEach(((o,n)=>{if(n>t)return;const a=document.createElement("div");for(a.className="word",n=0;n<o.length;n++){const e=document.createElement("letter");e.innerHTML=o[n],a.appendChild(e)}e.appendChild(a)}))}function S(){var e;y.forEach((e=>{clearTimeout(e)})),y=[],b.forEach((e=>{clearTimeout(e)})),b=[],v=m,g=h,void 0!==w&&(w.className="fas fa-play",null===(e=w.parentNode)||void 0===e||e.setAttribute("aria-label","Resume replay"))}function _(e=!1){e&&d.default.playSoundOnError?u.playError():u.playClick()}function k(e,t=!1){var o,n,a;let i=null===(o=document.getElementById("replayWords"))||void 0===o?void 0:o.children[h];if(void 0!==i)if("correctLetter"===e.action)t||_(),i.children[m].classList.add("correct"),m++;else if("incorrectLetter"===e.action){let o;t||_(!0),m>=i.children.length&&(o=document.createElement("letter"),o.classList.add("extra"),o.innerHTML=null!==(a=null===(n=e.value)||void 0===n?void 0:n.toString())&&void 0!==a?a:"",i.appendChild(o)),o=i.children[m],o.classList.add("incorrect"),m++}else if("setLetterIndex"===e.action&&"number"==typeof e.value){t||_(),m=e.value;for(const e of[...i.children].slice(m))e.classList.contains("extra")?e.remove():e.className=""}else if("submitCorrectWord"===e.action)t||_(),h++,m=0;else if("submitErrorWord"===e.action)t||_(!0),i.classList.add("error"),h++,m=0;else if("backWord"===e.action){t||_(),h--;const e=document.getElementById("replayWords");for(null!==e&&(i=e.children[h]),m=i.children.length;""===i.children[m-1].className;)m--;i.classList.remove("error")}}function x(){let e=0;m=0,h=0,c.forEach(((t,o)=>{(h<g||h===g&&m<v)&&(k(t,!0),e=o+1)}));const t=Math.floor(c[e].time/1e3);return $("#replayStopwatch").text(t+"s"),e}function T(){var e;$("#resultReplay").stop(!0,!0).hasClass("hidden")?(C(),x(),$("#watchReplayButton").hasClass("loaded")||$("#words").html('<div class="preloader"><i class="fas fa-fw fa-spin fa-circle-notch"></i></div>'),$("#resultReplay").removeClass("hidden").css("display","none").slideDown(250)):("Start replay"!=(null===(e=null==w?void 0:w.parentNode)||void 0===e?void 0:e.getAttribute("aria-label"))&&S(),$("#resultReplay").slideUp(250,(()=>{$("#resultReplay").addClass("hidden")})))}t.replayGetWordsList=function(e){l=e},t.pauseReplay=S,t.startReplayRecording=function(){$("#resultReplay").stop(!0,!0).hasClass("hidden")||T(),$("#replayStopwatch").text("0s"),c=[],p=performance.now(),f=!0,v=0,g=0},t.stopReplayRecording=function(){f=!1},t.addReplayEvent=function(e,t){if(!f)return;const o=performance.now()-p;c.push({action:e,value:t,time:o})},t.getReplayExport=function(){return JSON.stringify({replayData:c,wordsList:l})},$(".pageTest #playpauseReplayButton").on("click",(()=>{"fas fa-play"===(null==w?void 0:w.className)?function(){var e;if(m=0,h=0,void 0===w)return;w.className="fas fa-pause",null===(e=w.parentNode)||void 0===e||e.setAttribute("aria-label","Pause replay"),C();const t=x(),o=c[t].time;let n=Math.round(o/1e3);const a=Math.round(c[c.length-1].time/1e3);for(;n<=a;){const e=n;b.push(setTimeout((()=>{$("#replayStopwatch").text(e+"s")}),1e3*e-o)),n++}c.forEach(((e,n)=>{n<t||y.push(setTimeout((()=>{k(e)}),e.time-o))})),y.push(setTimeout((()=>{v=0,g=0,w.className="fas fa-play",w.parentNode.setAttribute("aria-label","Start replay")}),c[c.length-1].time-o))}():"fas fa-pause"===(null==w?void 0:w.className)&&S()})),$("#replayWords").on("click","letter",(e=>{var t;S();const o=document.querySelector("#replayWords"),n=[...null!==(t=null==o?void 0:o.children)&&void 0!==t?t:[]];g=n.indexOf(e.target.parentNode);const a=[...n[g].children];v=a.indexOf(e.target),C(),x()})),$(document).on("keypress","#watchReplayButton",(e=>{"Enter"===e.key&&T()})),$(document.body).on("click","#watchReplayButton",(()=>{T()}))},3448:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.update=t.updateRateQuote=t.updateCrown=t.hideCrown=t.showCrown=t.updateTodayTracker=t.updateGraphPBLine=t.toggleUnsmoothedRaw=void 0;const d=i(o(8673)),u=r(o(6705)),l=i(o(3388)),c=i(o(2474)),p=i(o(2148)),f=i(o(1833)),h=i(o(4203)),m=i(o(6350)),g=i(o(2026)),v=i(o(5486)),y=i(o(8182)),b=i(o(9029)),w=i(o(4897)),C=i(o(3368)),S=i(o(9817)),_=r(o(6750)),k=o(3328),x=o(6617),T=r(o(7355));let P,M,O=!1,L="",W="";t.toggleUnsmoothedRaw=function(){O=!O,C.add(O?"on":"off",1)};let A=[],B=f.result.options.scales;function E(){var e,t,o;return s(this,void 0,void 0,(function*(){const n=yield h.getAll(),a=yield m.getLocalPB(P.mode,P.mode2,null!==(e=P.punctuation)&&void 0!==e&&e,P.language,P.difficulty,null!==(t=P.lazyMode)&&void 0!==t&&t,null!==(o=P.funbox)&&void 0!==o?o:"none");if(0==a)return;const i=l.roundTo2(u.default.alwaysShowCPM?5*a:a).toFixed(2);A.push({display:!0,type:"line",id:"lpb",scaleID:"wpm",value:i,borderColor:n.sub,borderWidth:1,borderDash:[2,2],label:{backgroundColor:n.sub,font:{family:u.default.fontFamily.replace(/_/g," "),size:11,style:"normal",weight:k.Chart.defaults.font.weight,lineHeight:k.Chart.defaults.font.lineHeight},color:n.bg,padding:3,borderRadius:3,position:"center",enabled:!0,content:`PB: ${i}`}}),M>=parseFloat(i)-20&&M<=parseFloat(i)+20&&(M=parseFloat(i)+15),B.wpm.max=Math.round(M+5),B.raw.max=Math.round(M+5)}))}t.updateGraphPBLine=E,t.updateTodayTracker=function(){$("#result .stats .time .bottom .timeToday").text(g.getString())},t.showCrown=function(){v.show()},t.hideCrown=function(){v.hide(),$("#result .stats .wpm .crown").attr("aria-label","")},t.updateCrown=function(){return s(this,void 0,void 0,(function*(){let e=0;const t=yield m.getLocalPB(u.default.mode,P.mode2,u.default.punctuation,u.default.language,u.default.difficulty,u.default.lazyMode,u.default.funbox);e=Math.abs(P.wpm-t),$("#result .stats .wpm .crown").attr("aria-label","+"+l.roundTo2(e))}))},t.updateRateQuote=function(e){var t,o;"quote"===u.default.mode&&((null===(o=null===(t=m.getSnapshot().quoteRatings)||void 0===t?void 0:t[e.language])||void 0===o?void 0:o[e.id])&&$(".pageTest #result #rateQuoteButton .icon").removeClass("far").addClass("fas"),y.getQuoteStats(e).then((e=>{var t,o;$(".pageTest #result #rateQuoteButton .rating").text(null!==(o=null===(t=null==e?void 0:e.average)||void 0===t?void 0:t.toFixed(1))&&void 0!==o?o:""),$(".pageTest #result #rateQuoteButton").css({opacity:0}).removeClass("hidden").css({opacity:1})})))},t.update=function(e,t,o,n,a,i,r,g){return s(this,void 0,void 0,(function*(){B=f.result.options.scales,A=[],P=e,$("#result #resultWordsHistory").addClass("hidden"),$("#retrySavingResultButton").addClass("hidden"),$(".pageTest #result #rateQuoteButton .icon").removeClass("fas").addClass("far"),$(".pageTest #result #rateQuoteButton .rating").text(""),$(".pageTest #result #rateQuoteButton").addClass("hidden"),$("#testModesNotice").css("opacity",0),$("#words").removeClass("blurred"),$("#wordsInput").blur(),$("#result .stats .time .bottom .afk").text(""),null!=x.Auth.currentUser?$("#result .loginTip").addClass("hidden"):$("#result .loginTip").removeClass("hidden"),function(){let e=!1;if(P.wpm>=1e3&&(e=!0),u.default.alwaysShowDecimalPlaces){0==u.default.alwaysShowCPM?($("#result .stats .wpm .top .text").text("wpm"),e?$("#result .stats .wpm .bottom").text("Infinite"):$("#result .stats .wpm .bottom").text(l.roundTo2(P.wpm).toFixed(2)),$("#result .stats .raw .bottom").text(l.roundTo2(P.rawWpm).toFixed(2)),$("#result .stats .wpm .bottom").attr("aria-label",l.roundTo2(5*P.wpm).toFixed(2)+" cpm")):($("#result .stats .wpm .top .text").text("cpm"),e?$("#result .stats .wpm .bottom").text("Infinite"):$("#result .stats .wpm .bottom").text(l.roundTo2(5*P.wpm).toFixed(2)),$("#result .stats .raw .bottom").text(l.roundTo2(5*P.rawWpm).toFixed(2)),$("#result .stats .wpm .bottom").attr("aria-label",l.roundTo2(P.wpm).toFixed(2)+" wpm")),$("#result .stats .acc .bottom").text(100==P.acc?"100%":l.roundTo2(P.acc).toFixed(2)+"%");let t=l.roundTo2(P.testDuration).toFixed(2)+"s";P.testDuration>61&&(t=l.secondsToString(l.roundTo2(P.testDuration))),$("#result .stats .time .bottom .text").text(t),$("#result .stats .raw .bottom").removeAttr("aria-label"),$("#result .stats .acc .bottom").removeAttr("aria-label")}else 0==u.default.alwaysShowCPM?($("#result .stats .wpm .top .text").text("wpm"),$("#result .stats .wpm .bottom").attr("aria-label",P.wpm+` (${l.roundTo2(5*P.wpm)} cpm)`),e?$("#result .stats .wpm .bottom").text("Infinite"):$("#result .stats .wpm .bottom").text(Math.round(P.wpm)),$("#result .stats .raw .bottom").text(Math.round(P.rawWpm)),$("#result .stats .raw .bottom").attr("aria-label",P.rawWpm)):($("#result .stats .wpm .top .text").text("cpm"),$("#result .stats .wpm .bottom").attr("aria-label",l.roundTo2(5*P.wpm)+` (${l.roundTo2(P.wpm)} wpm)`),e?$("#result .stats .wpm .bottom").text("Infinite"):$("#result .stats .wpm .bottom").text(Math.round(5*P.wpm)),$("#result .stats .raw .bottom").text(Math.round(5*P.rawWpm)),$("#result .stats .raw .bottom").attr("aria-label",5*P.rawWpm)),$("#result .stats .acc .bottom").text(Math.floor(P.acc)+"%"),$("#result .stats .acc .bottom").attr("aria-label",P.acc+"%")}(),u.default.alwaysShowDecimalPlaces?($("#result .stats .consistency .bottom").text(l.roundTo2(P.consistency).toFixed(2)+"%"),$("#result .stats .consistency .bottom").attr("aria-label",`${P.keyConsistency.toFixed(2)}% key`)):($("#result .stats .consistency .bottom").text(Math.round(P.consistency)+"%"),$("#result .stats .consistency .bottom").attr("aria-label",`${P.consistency}% (${P.keyConsistency}% key)`)),function(){const e=l.roundTo2(P.afkDuration/P.testDuration*100);if($("#result .stats .time .bottom .afk").text(""),e>0&&$("#result .stats .time .bottom .afk").text(e+"% afk"),$("#result .stats .time .bottom").attr("aria-label",`${P.afkDuration}s afk ${e}%`),u.default.alwaysShowDecimalPlaces){let e=l.roundTo2(P.testDuration).toFixed(2)+"s";P.testDuration>61&&(e=l.secondsToString(l.roundTo2(P.testDuration))),$("#result .stats .time .bottom .text").text(e)}else{let t=Math.round(P.testDuration)+"s";P.testDuration>61&&(t=l.secondsToString(Math.round(P.testDuration))),$("#result .stats .time .bottom .text").text(t),$("#result .stats .time .bottom").attr("aria-label",`${l.roundTo2(P.testDuration)}s (${P.afkDuration}s afk ${e}%)`)}}(),$("#result .stats .key .bottom").text(P.charStats[0]+"/"+P.charStats[1]+"/"+P.charStats[2]+"/"+P.charStats[3]),function(e){let t="";t+=u.default.mode,"time"===u.default.mode?t+=" "+u.default.time:"words"===u.default.mode?t+=" "+u.default.words:"quote"===u.default.mode&&void 0!==e.group&&(t+=" "+["short","medium","long","thicc"][e.group]),"custom"!=u.default.mode&&"gibberish"!==u.default.funbox&&"ascii"!==u.default.funbox&&"58008"!==u.default.funbox&&(t+="<br>"+P.language.replace(/_/g," ")),u.default.punctuation&&(t+="<br>punctuation"),u.default.numbers&&(t+="<br>numbers"),u.default.blindMode&&(t+="<br>blind"),u.default.lazyMode&&(t+="<br>lazy"),"none"!==u.default.funbox&&(t+="<br>"+u.default.funbox.replace(/_/g," ")),"expert"==u.default.difficulty?t+="<br>expert":"master"==u.default.difficulty&&(t+="<br>master"),$("#result .stats .testType .bottom").html(t)}(r),function(e){"quote"===u.default.mode?($("#result .stats .source").removeClass("hidden"),$("#result .stats .source .bottom").html(e.source)):$("#result .stats .source").addClass("hidden")}(r),function(e){L="quote"===u.default.mode?e.language:"",W="quote"===u.default.mode?e.id.toString():"";const t=$(".pageTest #result #favoriteQuoteButton .icon");if("quote"===u.default.mode&&x.Auth.currentUser){const o=_.default.isQuoteFavorite(e);t.removeClass(o?"far":"fas").addClass(o?"fas":"far"),t.parent().removeClass("hidden")}else t.parent().addClass("hidden")}(r),yield function(){var e,t;return s(this,void 0,void 0,(function*(){const o=[];for(let e=1;e<=w.wpmHistory.length;e++)c.lastSecondNotRound&&e===w.wpmHistory.length?o.push(l.roundTo2(P.testDuration).toString()):o.push(e.toString());f.result.data.labels=o,B.wpm.title.text=u.default.alwaysShowCPM?"Character per Minute":"Words per Minute";const n=u.default.alwaysShowCPM?w.wpmHistory.map((e=>5*e)):w.wpmHistory;let a;if("toolong"===P.chartData)return;if(a=O?null!==(t=u.default.alwaysShowCPM?null===(e=P.chartData.unsmoothedRaw)||void 0===e?void 0:e.map((e=>5*e)):P.chartData.unsmoothedRaw)&&void 0!==t?t:[]:u.default.alwaysShowCPM?P.chartData.raw.map((e=>5*e)):P.chartData.raw,f.result.data.datasets[0].data=n,f.result.data.datasets[1].data=a,f.result.data.datasets[0].label=u.default.alwaysShowCPM?"cpm":"wpm",M=Math.max(Math.max(...a),Math.max(...n)),u.default.startGraphsAtZero)B.wpm.min=0,B.raw.min=0;else{const e=Math.min(Math.min(...a),Math.min(...n));B.wpm.min=e,B.raw.min=e}f.result.data.datasets[2].data=P.chartData.err;const i=yield h.get("sub");if("none"!==u.default.funbox){let e=u.default.funbox;"layoutfluid"===u.default.funbox&&(e+=" "+u.default.customLayoutfluid.replace(/#/g," ")),A.push({display:!0,id:"funbox-label",type:"line",scaleID:"wpm",value:B.wpm.min,borderColor:"transparent",borderWidth:1,borderDash:[2,2],label:{backgroundColor:"transparent",font:{family:u.default.fontFamily.replace(/_/g," "),size:11,style:"normal",weight:k.Chart.defaults.font.weight,lineHeight:k.Chart.defaults.font.lineHeight},color:i,padding:3,borderRadius:3,position:"start",enabled:!0,content:`${e}`}})}B.wpm.max=M,B.raw.max=M,B.error.max=Math.max(...P.chartData.err)+1}))}(),yield E(),function(e){var t;const o=[];try{null===(t=m.getSnapshot().tags)||void 0===t||t.forEach((e=>{!0===e.active&&o.push(e)}))}catch(e){}$("#result .stats .tags").addClass("hidden"),0==o.length?$("#result .stats .tags").addClass("hidden"):$("#result .stats .tags").removeClass("hidden"),$("#result .stats .tags .bottom").text("");let n="start",a=15;o.forEach((t=>s(this,void 0,void 0,(function*(){const o=yield m.getLocalTagPB(t._id,u.default.mode,P.mode2,u.default.punctuation,u.default.language,u.default.difficulty,u.default.lazyMode);if($("#result .stats .tags .bottom").append(`\n      <div tagid="${t._id}" aria-label="PB: ${o}" data-balloon-pos="up">${t.display}<i class="fas fa-crown hidden"></i></div>\n    `),"quote"!=u.default.mode&&!e)if(o<P.wpm)m.saveLocalTagPB(t._id,u.default.mode,P.mode2,u.default.punctuation,u.default.language,u.default.difficulty,u.default.lazyMode,P.wpm,P.acc,P.rawWpm,P.consistency),$(`#result .stats .tags .bottom div[tagid="${t._id}"] .fas`).removeClass("hidden"),$(`#result .stats .tags .bottom div[tagid="${t._id}"]`).attr("aria-label","+"+l.roundTo2(P.wpm-o));else{const e=yield h.getAll();A.push({display:!0,type:"line",id:"tpb",scaleID:"wpm",value:u.default.alwaysShowCPM?5*o:o,borderColor:e.sub,borderWidth:1,borderDash:[2,2],label:{backgroundColor:e.sub,font:{family:u.default.fontFamily.replace(/_/g," "),size:11,style:"normal",weight:k.Chart.defaults.font.weight,lineHeight:k.Chart.defaults.font.lineHeight},color:e.bg,padding:3,borderRadius:3,position:n,xAdjust:a,enabled:!0,content:`${t.display} PB: ${l.roundTo2(u.default.alwaysShowCPM?5*o:o).toFixed(2)}`}}),"start"===n?(n="end",a=-15):(n="start",a=15)}}))))}(g),function(e,t,o,n,a){let i="";if(e&&(i+=`<br>failed (${t})`),o&&(i+="<br>afk detected"),c.invalid){i+="<br>invalid";let e="";(P.wpm<0||P.wpm>350)&&(e+="wpm"),(P.acc<75||P.acc>100)&&(e.length>0&&(e+=", "),e+="accuracy"),e.length>0&&(i+=` (${e})`)}n&&(i+="<br>repeated"),P.bailedOut&&(i+="<br>bailed out"),a&&(i+="<br>too short"),""==i?$("#result .stats .info").addClass("hidden"):($("#result .stats .info").removeClass("hidden"),i=i.substring(4),$("#result .stats .info .bottom").html(i))}(t,o,n,a,i),f.result.options.plugins.annotation.annotations=A,f.result.updateColors(),f.result.resize(),$("#result .stats .tags").hasClass("hidden")&&$("#result .stats .info").hasClass("hidden")?$("#result .stats .infoAndTags").addClass("hidden"):$("#result .stats .infoAndTags").removeClass("hidden"),b.get()?($("#middle #result .noStressMessage").remove(),$("#middle #result").prepend('\n\n      <div class=\'noStressMessage\' style="\n        text-align: center;\n        grid-column: 1/3;\n        font-size: 2rem;\n        padding-bottom: 2rem;\n      ">\n      <i class="fas fa-check"></i>\n      </div>\n\n    '),$("#middle #result .stats").addClass("hidden"),$("#middle #result .chart").addClass("hidden"),$("#middle #result #resultWordsHistory").addClass("hidden"),$("#middle #result #resultReplay").addClass("hidden"),$("#middle #result .loginTip").addClass("hidden"),$("#middle #result #showWordHistoryButton").addClass("hidden"),$("#middle #result #watchReplayButton").addClass("hidden"),$("#middle #result #saveScreenshotButton").addClass("hidden"),console.log(`Test Completed: ${P.wpm} wpm ${P.acc}% acc ${P.rawWpm} raw ${P.consistency}% consistency`)):($("#middle #result .stats").removeClass("hidden"),$("#middle #result .chart").removeClass("hidden"),null==x.Auth.currentUser&&$("#middle #result .loginTip").removeClass("hidden"),$("#middle #result #showWordHistoryButton").removeClass("hidden"),$("#middle #result #watchReplayButton").removeClass("hidden"),$("#middle #result #saveScreenshotButton").removeClass("hidden")),window.scrollY>0&&$([document.documentElement,document.body]).stop().animate({scrollTop:0},250),l.swapElements($("#typingTest"),$("#result"),250,(()=>s(this,void 0,void 0,(function*(){d.setResultCalculating(!1),$("#words").empty(),f.result.resize(),u.default.alwaysShowWordsHistory&&u.default.burstHeatmap&&d.applyBurstHeatmap(),$("#result").trigger("focus"),window.scrollTo({top:0}),$("#testModesNotice").addClass("hidden")}))),(()=>s(this,void 0,void 0,(function*(){$("#resultExtraButtons").removeClass("hidden").css("opacity",0).animate({opacity:1},125),u.default.alwaysShowWordsHistory&&!b.get()&&d.toggleResultWords(),p.hide()}))))}))},$(".pageTest #favoriteQuoteButton").on("click",(()=>s(void 0,void 0,void 0,(function*(){var e,t,o;if(""===L||""===W)return void C.add("Could not get quote stats!",-1);const n=$(".pageTest #favoriteQuoteButton .icon"),a=m.getSnapshot();if(n.hasClass("fas")){S.show();const o=yield T.default.users.removeQuoteFromFavorites(L,W);if(S.hide(),C.add(o.message,200===o.status?1:-1),200===o.status){n.removeClass("fas").addClass("far");const o=null===(e=a.favoriteQuotes[L])||void 0===e?void 0:e.indexOf(W);null===(t=a.favoriteQuotes[L])||void 0===t||t.splice(o,1)}}else{S.show();const e=yield T.default.users.addQuoteToFavorites(L,W);S.hide(),C.add(e.message,200===e.status?1:-1),200===e.status&&(n.removeClass("far").addClass("fas"),a.favoriteQuotes[L]||(a.favoriteQuotes[L]=[]),null===(o=a.favoriteQuotes[L])||void 0===o||o.push(W))}}))))},5578:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isUsingOppositeShift=t.reset=t.rightState=t.leftState=void 0;const d=r(o(6705)),u=i(o(3388)),l=o(4173);t.leftState=!1,t.rightState=!1;let c=!1;const p={left:null,right:null,keymap:null};function f(e){const t=[...document.getElementsByClassName("keymapKey")],o=t.map((e=>e.dataset.key)),n=t.map((e=>e.childNodes[1]));if(l.capsState&&(e=!e),o.filter((e=>void 0===e)).length>2)return;if(e&&c||!e&&!c)return;c=e;const a=c?1:0;for(let e=0;e<o.length;e++){const t=o[e],i=n[e];void 0!==i&&void 0!==t&&(i.textContent=t[a])}}$(document).on("keydown",(e=>{"ShiftLeft"===e.code?(t.leftState=!0,t.rightState=!1):"ShiftRight"===e.code&&(t.leftState=!1,t.rightState=!0),"dynamic"===d.default.keymapLegendStyle&&f(t.leftState||t.rightState)})),$(document).keyup((e=>{"ShiftLeft"!==e.code&&"ShiftRight"!==e.code||(t.leftState=!1,t.rightState=!1),"dynamic"===d.default.keymapLegendStyle&&f(t.leftState||t.rightState)})),t.reset=function(){t.leftState=!1,t.rightState=!1};const h=["KeyQ","KeyW","KeyE","KeyR","KeyT","KeyA","KeyS","KeyD","KeyF","KeyG","KeyZ","KeyX","KeyC","KeyV","Backquote","Digit1","Digit2","Digit3","Digit4","Digit5"],m=["KeyU","KeyI","KeyO","KeyP","KeyH","KeyJ","KeyK","KeyL","KeyN","KeyM","Digit7","Digit8","Digit9","Digit0","Backslash","BracketLeft","BracketRight","Semicolon","Quote","Comma","Period","Slash"];t.isUsingOppositeShift=function(e){return s(this,void 0,void 0,(function*(){return t.leftState||t.rightState?"on"===d.default.oppositeShiftMode?m.includes(e.code)||h.includes(e.code)?!!(t.leftState&&m.includes(e.code)||t.rightState&&h.includes(e.code)):null:"keymap"!==d.default.oppositeShiftMode||(yield function(){return s(this,void 0,void 0,(function*(){if(p.keymap===d.default.keymapLayout)return;const e=yield u.getLayout(d.default.keymapLayout);if(void 0===e)return;const t=e.keys,o=Object.entries(t);p.keymap=d.default.keymapLayout,e?(p.left=o.map((([e,t])=>t.slice(0,["row1","row2"].includes(e)?"row1"===e?7:6:5).map((e=>e.split(""))))).flat(2),p.right=o.map((([e,t])=>t.slice(["row1","row4"].includes(e)?"row1"===e?6:4:5).map((e=>e.split(""))))).flat(2)):(p.left=null,p.right=null)}))}(),p.left&&p.right?!!(t.leftState&&p.right.includes(e.key)||t.rightState&&p.left.includes(e.key)):null):null}))}},5513:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.hideFavoriteQuoteLength=t.showFavoriteQuoteLength=t.update=t.hide=t.show=void 0;const s=i(o(1446)),r=i(o(3388));function d(e,t){if(e===t)return;$("#top .config .mode .textButton").removeClass("active"),$("#top .config .mode .textButton[mode='"+t+"']").addClass("active"),"time"==t||"words"==t||"custom"==t?($("#top .config .punctuationMode").removeClass("disabled"),$("#top .config .numbersMode").removeClass("disabled")):"quote"==t&&($("#top .config .punctuationMode").addClass("disabled"),$("#top .config .numbersMode").addClass("disabled"));const o={time:"time",words:"wordCount",custom:"customText",quote:"quoteLength",zen:""};if("zen"==t)return $(`#top .config .${o[e]}`).animate({opacity:0},125,(()=>{$(`#top .config .${o[e]}`).addClass("hidden")})),void $("#top .config .puncAndNum").animate({opacity:0},125,(()=>{$("#top .config .puncAndNum").addClass("invisible")}));"zen"!=e?r.swapElements($("#top .config ."+o[e]),$("#top .config ."+o[t]),250):setTimeout((()=>{$(`#top .config .${o[t]}`).removeClass("hidden"),$(`#top .config .${o[t]}`).css({opacity:0}).animate({opacity:1},125),$("#top .config .puncAndNum").removeClass("invisible"),$("#top .config .puncAndNum").css({opacity:0}).animate({opacity:1},125)}),125)}t.show=function(){$("#top .config").css("transition","unset").stop(!0,!0).removeClass("hidden").css("opacity",0).animate({opacity:1},125,(()=>{$("#top .config").css("transition","0.125s")}))},t.hide=function(){$("#top .config").css("transition","unset").stop(!0,!0).css("opacity",1).animate({opacity:0},125,(()=>{$("#top .config").addClass("hidden").css("transition","0.125s")}))},t.update=d,t.showFavoriteQuoteLength=function(){$("#top .desktopConfig .group.quoteLength .favorite").removeClass("hidden")},t.hideFavoriteQuoteLength=function(){$("#top .desktopConfig .group.quoteLength .favorite").addClass("hidden")},s.subscribe(((e,t,o,n)=>{"mode"===e&&d(n,t)}))},4897:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.restart=t.pushBurstToHistory=t.pushToRawHistory=t.pushToWpmHistory=t.pushMissedWord=t.resetKeypressTimings=t.recordKeypressSpacing=t.setKeypressDuration=t.pushKeypressDuration=t.setKeypressTimingsTooLong=t.incrementAccuracy=t.pushKeypressesToHistory=t.setBurstStart=t.pushKeypressWord=t.incrementKeypressErrors=t.setKeypressNotAfk=t.incrementKeypressCount=t.updateLastKeypress=t.enableSpacingDebug=t.spacingDebug=t.setBailout=t.bailout=t.burstHistory=t.rawHistory=t.wpmHistory=t.keypressTimings=t.accuracy=t.missedWords=t.currentBurstStart=t.lastKeypress=t.currentKeypress=t.keypressPerSecond=t.corrected=t.input=void 0;const s=i(o(9470)),r=o(3388);t.input=new class{constructor(){this.current="",this.history=[],this.historyLength=0,this.length=0}reset(){this.current="",this.history=[],this.length=0}resetHistory(){this.history=[],this.length=0}setCurrent(e){this.current=e,this.length=this.current.length}appendCurrent(e){this.current+=e,this.length=this.current.length}resetCurrent(){this.current=""}getCurrent(){return this.current}pushHistory(){this.history.push(this.current),this.historyLength=this.history.length,this.resetCurrent()}popHistory(){var e;const t=null!==(e=this.history.pop())&&void 0!==e?e:"";return this.historyLength=this.history.length,t}getHistory(e){return void 0===e?this.history:this.history[e]}getHistoryLast(){return this.history[this.history.length-1]}},t.corrected=new class{constructor(){this.current="",this.history=[]}setCurrent(e){this.current=e}appendCurrent(e){this.current+=e}resetCurrent(){this.current=""}resetHistory(){this.history=[]}reset(){this.resetCurrent(),this.resetHistory()}getHistory(e){return this.history[e]}popHistory(){var e;return null!==(e=this.history.pop())&&void 0!==e?e:""}pushHistory(){this.history.push(this.current),this.current=""}},t.keypressPerSecond=[],t.currentKeypress={count:0,errors:0,words:[],afk:!0},t.currentBurstStart=0,t.missedWords={},t.accuracy={correct:0,incorrect:0},t.keypressTimings={spacing:{current:-1,array:[]},duration:{current:-1,array:[]}},t.wpmHistory=[],t.rawHistory=[],t.burstHistory=[],t.bailout=!1,t.setBailout=function(e){t.bailout=e},t.spacingDebug=!1,t.enableSpacingDebug=function(){t.spacingDebug=!0,console.clear()},t.updateLastKeypress=function(){t.lastKeypress=performance.now()},t.incrementKeypressCount=function(){t.currentKeypress.count++},t.setKeypressNotAfk=function(){t.currentKeypress.afk=!1},t.incrementKeypressErrors=function(){t.currentKeypress.errors++},t.pushKeypressWord=function(e){t.currentKeypress.words.push(e)},t.setBurstStart=function(e){t.currentBurstStart=e},t.pushKeypressesToHistory=function(){t.keypressPerSecond.push(t.currentKeypress),t.currentKeypress={count:0,errors:0,words:[],afk:!0}},t.incrementAccuracy=function(e){e?t.accuracy.correct++:t.accuracy.incorrect++},t.setKeypressTimingsTooLong=function(){t.keypressTimings.spacing.array="toolong",t.keypressTimings.duration.array="toolong"},t.pushKeypressDuration=function(e){t.keypressTimings.duration.array.push((0,r.roundTo2)(e))},t.setKeypressDuration=function(e){t.keypressTimings.duration.current=(0,r.roundTo2)(e)},t.recordKeypressSpacing=function(){const e=performance.now(),o=Math.abs(t.keypressTimings.spacing.current-e);var n;-1!==t.keypressTimings.spacing.current&&(n=o,t.keypressTimings.spacing.array.push((0,r.roundTo2)(n)),t.spacingDebug&&console.log("spacing debug","push",o,"length",t.keypressTimings.spacing.array.length)),function(e){t.keypressTimings.spacing.current=(0,r.roundTo2)(e)}(e),t.spacingDebug&&console.log("spacing debug","set",e,"length",t.keypressTimings.spacing.array.length),t.spacingDebug&&console.log("spacing debug","recorded","length",t.keypressTimings.spacing.array.length)},t.resetKeypressTimings=function(){t.keypressTimings={spacing:{current:performance.now(),array:[]},duration:{current:performance.now(),array:[]}},t.spacingDebug&&console.clear()},t.pushMissedWord=function(e){Object.keys(t.missedWords).includes(e)?t.missedWords[e]++:t.missedWords[e]=1},t.pushToWpmHistory=function(e){t.wpmHistory.push(e)},t.pushToRawHistory=function(e){t.rawHistory.push(e)},t.pushBurstToHistory=function(e){void 0===t.burstHistory[s.words.currentIndex]?t.burstHistory.push(e):t.burstHistory[s.words.currentIndex]=e},t.restart=function(){t.wpmHistory=[],t.rawHistory=[],t.burstHistory=[],t.keypressPerSecond=[],t.currentKeypress={count:0,errors:0,words:[],afk:!0},t.currentBurstStart=0,t.missedWords={},t.accuracy={correct:0,incorrect:0},t.keypressTimings={spacing:{current:-1,array:[]},duration:{current:-1,array:[]}}}},3013:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.fail=t.finish=t.retrySavingResult=t.addWord=t.init=t.restart=t.startTest=t.punctuateWord=t.setNotSignedInUid=t.clearNotSignedInResult=t.notSignedInLastResult=void 0;const d=r(o(7355)),u=i(o(8673)),l=i(o(2203)),c=i(o(6705)),p=c,f=i(o(3388)),h=r(o(6750)),m=i(o(3368)),g=i(o(8248)),v=i(o(2474)),y=i(o(9196)),b=i(o(5578)),w=i(o(8911)),C=i(o(8059)),S=i(o(2148)),_=i(o(743)),k=i(o(5886)),x=i(o(4292)),T=i(o(3261)),P=i(o(2331)),M=i(o(8700)),O=i(o(8824)),L=i(o(2338)),W=i(o(9753)),A=i(o(5486)),B=i(o(6084)),E=i(o(1333)),j=i(o(5344)),R=i(o(6350)),I=i(o(4626)),D=i(o(3118)),q=i(o(277)),F=i(o(2026)),V=i(o(5708)),K=i(o(4905)),H=i(o(7567)),z=i(o(8182)),N=i(o(262)),Q=i(o(476)),U=i(o(3439)),G=i(o(3448)),J=i(o(6578)),Z=i(o(7346)),Y=i(o(6443)),X=i(o(4897)),ee=i(o(9470)),te=i(o(1322)),oe=i(o(2453)),ne=i(o(5705)),ae=i(o(1446)),ie=i(o(6507)),se=i(o(7274)),re=i(o(7353)),de=r(o(705)),ue=i(o(3326)),le=o(6617);let ce="";t.notSignedInLastResult=null,t.clearNotSignedInResult=function(){t.notSignedInLastResult=null},t.setNotSignedInUid=function(e){null!==t.notSignedInLastResult&&(t.notSignedInLastResult.uid=e,delete t.notSignedInLastResult.hash,t.notSignedInLastResult.hash=(0,de.default)(t.notSignedInLastResult))};let pe,fe="";function he(e,t,o,n){return s(this,void 0,void 0,(function*(){let a=t;const i=c.default.language.split("_")[0],r=f.getLastChar(e);if("58008"===c.default.funbox){if(t.length>3&&(Math.random()<.5&&(a=f.setCharAt(a,f.randomIntFromRange(1,a.length-2),".")),Math.random()<.75)){const e=f.randomIntFromRange(1,a.length-2);if("."!==a[e-1]&&"."!==a[e+1]&&"0"!==a[e+1]){const t=f.randomElementFromArray(["/","*","-","+"]);a=f.setCharAt(a,e,t)}}}else if("code"==i||0!=o&&!function(e){return/[?!.؟]/.test(e)}(r))if(Math.random()<.1&&"."!=r&&","!=r&&o!=n-2||o==n-1)if("spanish"==i||"catalan"==i)"?"!=fe&&"!"!=fe||(a+=fe,fe="");else{const e=Math.random();e<=.8?a+=".":e>.8&&e<.9?"french"==i?a="?":a+="arabic"==i||"persian"==i||"urdu"==i||"kurdish"==i?"؟":"greek"==i?";":"?":"french"==i?a="!":a+="!"}else if(Math.random()<.01&&","!=r&&"."!=r&&"russian"!==i)a=`"${a}"`;else if(Math.random()<.011&&","!=r&&"."!=r&&"russian"!==i&&"ukrainian"!==i)a=`'${a}'`;else if(Math.random()<.012&&","!=r&&"."!=r)if("code"==i){const e=Math.random();a=e<.25?`(${a})`:e<.5?`{${a}}`:e<.75?`[${a}]`:`<${a}>`}else a=`(${a})`;else if(Math.random()<.013&&","!=r&&"."!=r&&";"!=r&&"؛"!=r&&":"!=r)"french"==i?a=":":"greek"==i?a="·":a+=":";else if(Math.random()<.014&&","!=r&&"."!=r&&"-"!=e)a="-";else if(Math.random()<.015&&","!=r&&"."!=r&&";"!=r&&"؛"!=r&&":"!=r)"french"==i?a=";":"greek"==i?a="·":a+="arabic"==i||"kurdish"==i?"؛":";";else if(Math.random()<.2&&","!=r)a+="arabic"==i||"urdu"==i||"persian"==i||"kurdish"==i?"،":",";else if(Math.random()<.25&&"code"==i){const e=["{","}","[","]","(",")",";","=","+","%","/"];a=f.randomElementFromArray(e)}else Math.random()<.5&&"english"===i&&(yield Q.check(a))&&(a=yield function(e){return s(this,void 0,void 0,(function*(){return Q.replace(e)}))}(a));else if(a=f.capitalizeFirstLetterOfEachWord(a),"turkish"==i&&(a=a.replace(/I/g,"İ")),"spanish"==i||"catalan"==i){const e=Math.random();e>.9?(a="¿"+a,fe="?"):e>.8&&(a="¡"+a,fe="!")}return a}))}function me(e=!1,t,o,n=!1,a=!1){if(u.testRestarting||u.resultCalculating)return void(null==o||o.preventDefault());if("test"==Z.get()&&!u.resultVisible&&!l.get()){if(ee.hasTab&&!(null==o?void 0:o.shiftKey)&&"esc"!==c.default.quickRestart)return;if("zen"!==c.default.mode&&(null==o||o.preventDefault()),!f.canQuickRestart(c.default.mode,c.default.words,c.default.time,g)){let e="Use your mouse to confirm.";return"tab"===c.default.quickRestart?e="Press shift + tab or use your mouse to confirm.":"esc"===c.default.quickRestart&&(e="Press shift + escape or use your mouse to confirm."),void m.add("Quick restart disabled. "+e,0,3)}}if(Y.get()){"typing"===c.default.repeatQuotes&&"quote"===c.default.mode&&c.default.language.replace(/_\d*k$/g,"")===ee.randomQuote.language&&(e=!0),te.isRepeated&&(e=!0),X.pushKeypressesToHistory();const t=v.calculateTestSeconds(performance.now()),o=v.calculateAfkSeconds(t);let n=t-o;n<0&&(n=0),console.log(`increasing incomplete time by ${n}s (${t}s - ${o}s afk)`),v.incrementIncompleteSeconds(n),v.incrementRestartCount(),n>600&&m.add(`Your time typing just increased by ${f.roundTo2(n/60)} minutes. If you think this is incorrect please contact Miodec and dont refresh the website.`,-1)}"zen"==c.default.mode&&$("#words").empty(),null===y.before.mode||e||n||(m.add("Reverting to previous settings.",0),null!==y.before.punctuation&&p.setPunctuation(y.before.punctuation),null!==y.before.numbers&&p.setNumbers(y.before.numbers),p.setMode(y.before.mode),y.resetBefore());let i=!1;u.resultVisible&&c.default.repeatedPace&&e&&(i=!0),l.reset(),B.clear(),v.restart(),X.restart(),X.corrected.reset(),b.reset(),x.hide(),Y.set(!1),I.stopReplayRecording(),T.hide(),P.hide(),M.hide(),O.hide(),I.pauseReplay(),X.setBailout(!1),k.reset(),re.hide(),$("#showWordHistoryButton").removeClass("loaded"),$("#restartTestButton").blur(),C.resetMemoryTimer(),z.clearQuoteStats(),"test"==Z.get()&&window.scrollY>0&&window.scrollTo({top:0,behavior:"smooth"}),$("#wordsInput").val(" "),u.reset(),$("#timerNumber").css("opacity",0);let r=null;r=u.resultVisible?$("#result"):$("#typingTest"),u.resultVisible&&("off"===c.default.randomTheme||ne.get()||_.randomizeTheme()),u.setResultVisible(!1),ne.set(!0),u.setTestRestarting(!0),r.stop(!0,!0).animate({opacity:0},a?0:125,(()=>s(this,void 0,void 0,(function*(){"test"==Z.get()&&w.set(!1),u.focusWords(),$("#monkey .fast").stop(!0,!0).css("opacity",0),$("#monkey").stop(!0,!0).css({animationDuration:"0s"}),$("#typingTest").css("opacity",0).removeClass("hidden"),$("#wordsInput").val(" ");let t=!1;if("quote"===c.default.mode&&"typing"===c.default.repeatQuotes&&""!==ce&&(t=!0),yield C.rememberSettings(),"arrows"===c.default.funbox?(p.setPunctuation(!1,!0),p.setNumbers(!1,!0)):"58008"===c.default.funbox?p.setNumbers(!1,!0):("specials"===c.default.funbox||"ascii"===c.default.funbox)&&(p.setPunctuation(!1,!0),p.setNumbers(!1,!0)),e&&("plus_one"===c.default.funbox||"plus_two"===c.default.funbox)){const e=[];"plus_one"===c.default.funbox&&(e.push(ee.words.get(0)),e.push(ee.words.get(1))),"plus_two"===c.default.funbox&&(e.push(ee.words.get(0)),e.push(ee.words.get(1)),e.push(ee.words.get(2))),ee.words.reset(),e.forEach((e=>ee.words.push(e)))}e||t?(te.setRepeated(!0),te.setPaceRepeat(i),Y.set(!1),I.stopReplayRecording(),ee.words.resetCurrentIndex(),X.input.reset(),u.showWords(),"next"===c.default.keymapMode&&"zen"!==c.default.mode&&S.highlightKey(ee.words.getCurrent().substring(X.input.current.length,X.input.current.length+1).toString()),C.toggleScript(ee.words.getCurrent()),yield k.init()):(te.setRepeated(!1),te.setPaceRepeat(i),ee.setHasTab(!1),yield we(),yield k.init()),ce="","quote"===c.default.mode&&te.setRepeated(!1),"off"!==c.default.keymapMode?S.show():S.hide(),document.querySelector("#miniTimerAndLiveWpm .wpm").innerHTML="0",document.querySelector("#miniTimerAndLiveWpm .acc").innerHTML="100%",document.querySelector("#miniTimerAndLiveWpm .burst").innerHTML="0",document.querySelector("#liveWpm").innerHTML="0",document.querySelector("#liveAcc").innerHTML="100%",document.querySelector("#liveBurst").innerHTML="0","memory"===c.default.funbox&&(C.startMemoryTimer(),"next"===c.default.keymapMode&&p.setKeymapMode("react")),"off"!==c.default.showAverage&&se.update();const o=f.getMode2(c.default,ee.randomQuote);let n="";"none"!==c.default.funbox&&(n=" "+c.default.funbox),$(".pageTest #premidTestMode").text(`${c.default.mode} ${o} ${c.default.language.replace(/_/g," ")}${n}`),$(".pageTest #premidSecondsLeft").text(c.default.time),"layoutfluid"===c.default.funbox&&(p.setLayout(c.default.customLayoutfluid?c.default.customLayoutfluid.split("#")[0]:"qwerty",!0),p.setKeymapLayout(c.default.customLayoutfluid?c.default.customLayoutfluid.split("#")[0]:"qwerty",!0),S.highlightKey(ee.words.getCurrent().substring(X.input.current.length,X.input.current.length+1).toString())),$("#result").addClass("hidden"),$("#testModesNotice").removeClass("hidden").css({opacity:1}),oe.update(),$("#typingTest").css("opacity",0).removeClass("hidden").stop(!0,!0).animate({opacity:1},a?0:125,(()=>{u.setTestRestarting(!1),A.hide(),B.clear(),$("#commandLineWrapper").hasClass("hidden")&&u.focusWords(),ne.set(!1)}))}))))}function ge(e,t){if("rAnDoMcAsE"===c.default.funbox){let t="";for(let o=0;o<e.length;o++)t+=o%2!=0?e[o].toUpperCase():e[o];e=t}else"capitals"===c.default.funbox?e=f.capitalizeFirstLetterOfEachWord(e):"gibberish"===c.default.funbox?e=f.getGibberish():"arrows"===c.default.funbox?e=f.getArrows():"58008"===c.default.funbox?(e=f.getNumbers(7),"kurdish"===c.default.language.split("_")[0]&&(e=f.convertNumberToArabicIndic(e))):"specials"===c.default.funbox?e=f.getSpecials():"ascii"===c.default.funbox?e=f.getASCII():void 0!==t&&"weakspot"===c.default.funbox&&(e=V.getWord(t));return e}function ve(e){return s(this,void 0,void 0,(function*(){return c.default.britishEnglish&&/english/.test(c.default.language)&&(e=yield N.replace(e)),e}))}function ye(e,t){return!0!==c.default.lazyMode||t.noLazyMode||(e=U.replaceAccents(e,t.accents)),e}function be(e,t,o){var n,a;return s(this,void 0,void 0,(function*(){let i=e.randomWord();const s=ee.words.get(ee.words.length-1,!0),r=ee.words.get(ee.words.length-2,!0);if("quote"===c.default.mode)i=null!==(a=null===(n=ee.randomQuote.textSplit)||void 0===n?void 0:n[ee.words.length])&&void 0!==a?a:"";else if("custom"!=c.default.mode||g.isWordRandom||g.isTimeRandom)if("custom"==c.default.mode&&(g.isWordRandom||g.isTimeRandom)&&(e.length<4||null!==y.before.mode))i=e.randomWord();else{let t=0;for(;t<100&&(s==i||r==i||"custom"!==c.default.mode&&!c.default.punctuation&&"I"==i||"custom"!==c.default.mode&&!c.default.punctuation&&/[-=_+[\]{};'\\:"|,./<>?]/i.test(i));)t++,i=e.randomWord()}else i=g.text[ee.words.length];return void 0===i&&(i=e.randomWord()),i=i.replace(/ +/gm," "),i=i.replace(/^ | $/gm,""),i=ye(i,t),i=yield ve(i),i=ge(i,e),c.default.punctuation&&(i=yield he(ee.words.get(ee.words.length-1),i,ee.words.length,o)),c.default.numbers&&Math.random()<.1&&(i=f.getNumbers(4),"kurdish"===c.default.language.split("_")[0]&&(i=f.convertNumberToArabicIndic(i))),i}))}function we(){return s(this,void 0,void 0,(function*(){Y.set(!1),J.reset(),I.stopReplayRecording(),ee.words.reset(),u.setCurrentWordElementIndex(0),X.input.resetHistory(),X.input.resetCurrent(),"test"==Z.get()&&(yield C.activate()),c.default.quoteLength.includes(-3)&&!le.Auth.currentUser&&p.setQuoteLength(-1);let e=yield f.getLanguage(c.default.language);e&&e.name!==c.default.language&&p.setLanguage("english"),e||(p.setLanguage("english"),e=yield f.getLanguage(c.default.language)),!0===c.default.lazyMode&&e.noLazyMode?(pe=!0,m.add("This language does not support lazy mode.",0),p.setLazyMode(!1,!0)):!0!==pe||e.noLazyMode||p.setLazyMode(!0,!0),!1!==c.default.lazyMode||e.noLazyMode||(pe=!1);let t=100;if(c.default.showAllLines?"quote"===c.default.mode?t=100:"custom"===c.default.mode?t=g.isWordRandom?g.word:g.isTimeRandom?100:g.text.length:"time"!=c.default.mode&&(t=c.default.words):("words"===c.default.mode&&c.default.words<t&&(t=c.default.words),"custom"==c.default.mode&&g.isWordRandom&&g.word<t&&(t=g.word),"custom"==c.default.mode&&g.isTimeRandom&&(t=100),"custom"==c.default.mode&&!g.isWordRandom&&!g.isTimeRandom&&g.text.length<t&&(t=g.text.length)),("custom"===c.default.mode&&g.isWordRandom&&0==g.word||"custom"===c.default.mode&&g.isTimeRandom&&0==g.time)&&(t=100),"words"===c.default.mode&&0===c.default.words&&(t=100),"plus_one"===c.default.funbox&&(t=2,"words"===c.default.mode&&c.default.words<t&&(t=c.default.words)),"plus_two"===c.default.funbox&&(t=3,"words"===c.default.mode&&c.default.words<t&&(t=c.default.words)),"time"==c.default.mode||"words"==c.default.mode||"custom"==c.default.mode){let o=e.words;"custom"==c.default.mode&&(o=g.text);const n=K.withWords(o,c.default.funbox);if("wikipedia"!=c.default.funbox&&"poetry"!=c.default.funbox||"custom"==c.default.mode)for(let o=0;o<t;o++){const a=yield be(n,e,t);/\t/g.test(a)&&ee.setHasTab(!0);const i=a.replace("\n","\n ").trim();if(/ +/.test(i)){const e=i.split(" ");let n=0;for(;n<e.length&&(ee.words.push(e[n]),n++,ee.words.length!=t||"custom"!=c.default.mode||!g.isWordRandom););("custom"!=c.default.mode||g.isWordRandom||g.isTimeRandom)&&(o=ee.words.length-1)}else ee.words.push(a)}else{let e=0;for(;"words"==c.default.mode&&c.default.words>=e||"time"===c.default.mode&&e<100;){const t="wikipedia"==c.default.funbox?yield q.getSection(c.default.language):yield D.getPoem();if(void 0!==t)for(const o of t.words){if(e>=c.default.words&&"words"==c.default.mode){e++;break}e++,ee.words.push(o)}}}}else if("quote"===c.default.mode){const o=yield h.default.getQuotes(c.default.language,c.default.quoteLength);if(0===o.length)return u.setTestRestarting(!1),m.add(`No ${c.default.language.replace(/_\d*k$/g,"")} quotes found`,0),le.Auth.currentUser&&W.show(!1),p.setMode("words"),void me();let n;if(c.default.quoteLength.includes(-2)&&1===c.default.quoteLength.length){const e=h.default.getQuoteById(L.selectedId);void 0===e?(n=o.groups[0][0],m.add("Quote Id Does Not Exist",0)):n=e}else if(c.default.quoteLength.includes(-3)){const e=h.default.getRandomFavoriteQuote(c.default.language);if(null===e)return m.add("No favorite quotes found",0),p.setQuoteLength(-1),void me();n=e}else{const e=h.default.getRandomQuote();if(null===e)return m.add("No quotes found for selected quote length",0),void u.setTestRestarting(!1);n=e}if(void 0===n)return;n.text=n.text.replace(/ +/gm," "),n.text=n.text.replace(/\\\\t/gm,"\t"),n.text=n.text.replace(/\\\\n/gm,"\n"),n.text=n.text.replace(/\\t/gm,"\t"),n.text=n.text.replace(/\\n/gm,"\n"),n.text=n.text.replace(/( *(\r\n|\r|\n) *)/g,"\n "),n.text=n.text.replace(/…/g,"..."),n.text=n.text.trim(),n.textSplit=n.text.split(" "),n.language=c.default.language.replace(/_\d*k$/g,""),ee.setRandomQuote(n);const a=ee.randomQuote.textSplit;if(void 0===a)return;t=c.default.showAllLines?a.length:Math.min(t,a.length);for(let o=0;o<t;o++)/\t/g.test(a[o])&&ee.setHasTab(!0),a[o]=ye(a[o],e),a[o]=yield ve(a[o]),a[o]=ge(a[o]),ee.words.push(a[o])}e.leftToRight?u.arrangeCharactersLeftToRight():u.arrangeCharactersRightToLeft(),e.ligatures?($("#words").addClass("withLigatures"),$("#resultWordsHistory .words").addClass("withLigatures"),$("#resultReplay .words").addClass("withLigatures")):($("#words").removeClass("withLigatures"),$("#resultWordsHistory .words").removeClass("withLigatures"),$("#resultReplay .words").removeClass("withLigatures")),u.showWords(),"next"===c.default.keymapMode&&"zen"!==c.default.mode&&S.highlightKey(ee.words.getCurrent().substring(X.input.current.length,X.input.current.length+1).toString()),C.toggleScript(ee.words.getCurrent())}))}t.punctuateWord=he,t.startTest=function(){if(ne.get())return!1;p.dbConfigLoaded||p.setChangedBeforeDb(!0),null!==le.Auth.currentUser?ue.log("testStarted"):ue.log("testStartedNoLogin"),Y.set(!0),I.startReplayRecording(),I.replayGetWordsList(ee.words.list),X.resetKeypressTimings(),O.restart(),O.show(),$("#liveWpm").text("0"),T.show(),P.show(),M.show(),O.update(),B.clear(),re.show(),"memory"===c.default.funbox&&(C.resetMemoryTimer(),$("#wordsWrapper").addClass("hidden"));try{("off"!==c.default.paceCaret||c.default.repeatedPace&&te.isPaceRepeat)&&k.start()}catch(e){}return v.setStart(performance.now()),B.start(),!0},t.restart=me,t.init=we,t.addWord=function(){var e,t;return s(this,void 0,void 0,(function*(){let o=100;if("plus_one"===c.default.funbox&&(o=1),"plus_two"===c.default.funbox&&(o=2),ee.words.length-X.input.history.length>o||"words"===c.default.mode&&ee.words.length>=c.default.words&&c.default.words>0||"custom"===c.default.mode&&g.isWordRandom&&ee.words.length>=g.word&&0!=g.word||"custom"===c.default.mode&&!g.isWordRandom&&!g.isTimeRandom&&ee.words.length>=g.text.length||"quote"===c.default.mode&&ee.words.length>=(null!==(t=null===(e=ee.randomQuote.textSplit)||void 0===e?void 0:e.length)&&void 0!==t?t:0))return;if("wikipedia"===c.default.funbox||"poetry"==c.default.funbox){if(!(ee.words.length-ee.words.currentIndex<20))return;{const e="wikipedia"==c.default.funbox?yield q.getSection(c.default.language):yield D.getPoem();if(void 0===e)return;let t=0;for(const o of e.words){if(t>=c.default.words&&"words"==c.default.mode)break;t++,ee.words.push(o),u.addWord(o)}}}const n="custom"!==c.default.mode?yield f.getCurrentLanguage(c.default.language):Object.assign(Object.assign({},yield f.getCurrentLanguage(c.default.language)),{words:g.text}),a=K.withWords(n.words,c.default.funbox),i=yield be(a,n,o),s=i.split(" ");s.length>1?s.forEach((e=>{ee.words.push(e),u.addWord(e)})):(ee.words.push(i),u.addWord(i))}))};const $e={completedEvent:null,canRetry:!1};function Ce(){return s(this,void 0,void 0,(function*(){const{completedEvent:e}=$e;if(null===e)return void m.add("Could not retry saving the result as the result no longer exists.",0,-1);if(!$e.canRetry)return;$e.canRetry=!1,$("#retrySavingResultButton").addClass("hidden"),j.loading(!0),m.add("Retrying to save...");const t=yield d.default.results.save(e);if(j.loading(!1),G.hideCrown(),200!==t.status)return $e.canRetry=!0,$("#retrySavingResultButton").removeClass("hidden"),m.add("Result not saved. "+t.message,-1);e._id=t.data.insertedId,t.data.isPb&&(e.isPb=!0),R.saveLocalResult(e),R.updateLocalStats(v.restartCount+1,e.testDuration+e.incompleteTestSeconds-e.afkDuration),ue.log("testCompleted"),t.data.isPb&&(G.showCrown(),G.updateCrown(),R.saveLocalPB(c.default.mode,e.mode2,c.default.punctuation,c.default.language,c.default.difficulty,c.default.lazyMode,e.wpm,e.acc,e.rawWpm,e.consistency)),$("#retrySavingResultButton").addClass("hidden"),m.add("Result saved",1)}))}function Se(e=!1){var o;return s(this,void 0,void 0,(function*(){if(!Y.get())return;if("zen"==c.default.mode&&0!=X.input.current.length&&(X.input.pushHistory(),X.corrected.pushHistory(),I.replayGetWordsList(X.input.history)),X.recordKeypressSpacing(),u.setResultCalculating(!0),u.setResultVisible(!0),v.setEnd(performance.now()),Y.set(!1),I.stopReplayRecording(),w.set(!1),x.hide(),T.hide(),A.hide(),P.hide(),M.hide(),O.hide(),E.hide(),B.clear(),C.clear(),re.hide(),X.burstHistory.length!==X.input.getHistory().length){const e=v.calculateBurst();X.pushBurstToHistory(e)}("zen"==c.default.mode||X.bailout)&&v.removeAfkData();const n=function(e){var t,o,n;const a={wpm:void 0,rawWpm:void 0,charStats:void 0,acc:void 0,mode:c.default.mode,mode2:void 0,quoteLength:-1,punctuation:c.default.punctuation,numbers:c.default.numbers,lazyMode:c.default.lazyMode,timestamp:Date.now(),language:c.default.language,restartCount:v.restartCount,incompleteTestSeconds:v.incompleteSeconds<0?0:f.roundTo2(v.incompleteSeconds),difficulty:c.default.difficulty,blindMode:c.default.blindMode,tags:void 0,keySpacing:X.keypressTimings.spacing.array,keyDuration:X.keypressTimings.duration.array,consistency:void 0,keyConsistency:void 0,funbox:c.default.funbox,bailedOut:X.bailout,chartData:{wpm:X.wpmHistory,raw:void 0,err:void 0},customText:void 0,testDuration:void 0,afkDuration:void 0},i=v.calculateStats();if(i.time%1!=0&&"time"!==c.default.mode&&v.setLastSecondNotRound(),v.setLastTestWpm(i.wpm),a.wpm=i.wpm,a.rawWpm=i.wpmRaw,a.charStats=[i.correctChars+i.correctSpaces,i.incorrectChars,i.extraChars,i.missedChars],a.acc=i.acc,v.lastSecondNotRound&&!e){const e=v.calculateWpmAndRaw();X.pushToWpmHistory(e.wpm),X.pushToRawHistory(e.raw),X.pushKeypressesToHistory()}const s=X.keypressPerSecond.map((e=>Math.round(e.count/5*60))),r=f.stdDev(s),d=f.mean(s);let u=f.roundTo2(f.kogasa(r/d)),l="toolong"===X.keypressTimings.spacing.array?[]:X.keypressTimings.spacing.array.slice();l.length>0&&(l=l.slice(0,l.length-1));let p=f.roundTo2(f.kogasa(f.stdDev(l)/f.mean(l)));u&&!isNaN(u)||(u=0),p&&!isNaN(p)||(p=0),a.keyConsistency=p,a.consistency=u;const h=f.smooth(s,1);a.chartData.raw=h,a.chartData.unsmoothedRaw=s;const m=f.stdDev(h),y=f.mean(h),b=f.roundTo2(f.kogasa(m/y));a.smoothConsistency=b;const w=f.stdDev(null!==(t=a.chartData.wpm)&&void 0!==t?t:[]),$=f.mean(null!==(o=a.chartData.wpm)&&void 0!==o?o:[]),C=f.roundTo2(f.kogasa(w/$));a.wpmConsistency=C,a.testDuration=parseFloat(i.time.toString()),a.afkDuration=v.calculateAfkSeconds(a.testDuration),a.chartData.err=[];for(let e=0;e<X.keypressPerSecond.length;e++)a.chartData.err.push(X.keypressPerSecond[e].errors);"quote"===c.default.mode?(a.quoteLength=ee.randomQuote.group,a.language=c.default.language.replace(/_\d*k$/g,"")):delete a.quoteLength,a.mode2=f.getMode2(c.default,ee.randomQuote),"custom"===c.default.mode?(a.customText={},a.customText.textLen=g.text.length,a.customText.isWordRandom=g.isWordRandom,a.customText.isTimeRandom=g.isTimeRandom,a.customText.word=g.word,a.customText.time=g.time):delete a.customText;const S=[];try{null===(n=R.getSnapshot().tags)||void 0===n||n.forEach((e=>{!0===e.active&&S.push(e._id)}))}catch(e){}return a.tags=S,"custom"!=a.mode&&delete a.customText,a}(e);if(function e(t){return void 0===t?1:"object"==typeof t&&null!==t?Object.values(t).reduce(((t,o)=>t+e(o)),0):0}(n)>0)return console.log(n),void m.add("Failed to save result: One of the result fields is undefined. Please report this",-1);let a=X.keypressPerSecond.slice(-5).every((e=>e.afk));X.bailout&&(a=!1);let i=!1,s=!1;if(e?(m.add(`Test failed - ${ce}`,0,1),s=!0):a?(m.add("Test invalid - AFK detected",0),s=!0):te.isRepeated?(m.add("Test invalid - repeated",0),s=!0):"time"===c.default.mode&&n.mode2<15&&n.mode2>0||"time"===c.default.mode&&0==n.mode2&&n.testDuration<15||"words"===c.default.mode&&n.mode2<10&&n.mode2>0||"words"===c.default.mode&&0==n.mode2&&n.testDuration<15||"custom"===c.default.mode&&!g.isWordRandom&&!g.isTimeRandom&&g.text.length<10||"custom"===c.default.mode&&g.isWordRandom&&!g.isTimeRandom&&g.word<10||"custom"===c.default.mode&&!g.isWordRandom&&g.isTimeRandom&&g.time<15||"zen"===c.default.mode&&n.testDuration<15?(m.add("Test invalid - too short",0),i=!0,s=!0):n.wpm<0||n.wpm>350?(m.add("Test invalid - wpm",0),v.setInvalid(),s=!0):(n.acc<75||n.acc>100)&&(m.add("Test invalid - accuracy",0),v.setInvalid(),s=!0),s||(F.addSeconds(n.testDuration+(v.incompleteSeconds<0?0:f.roundTo2(v.incompleteSeconds))-n.afkDuration),G.updateTodayTracker()),null==le.Auth.currentUser?($(".pageTest #result #rateQuoteButton").addClass("hidden"),$(".pageTest #result #reportQuoteButton").addClass("hidden"),ue.log("testCompletedNoLogin"),s||(t.notSignedInLastResult=n),s=!0):$(".pageTest #result #reportQuoteButton").removeClass("hidden"),v.setLastResult(n),yield G.update(n,e,ce,a,te.isRepeated,i,ee.randomQuote,s),"toolong"!==n.chartData&&delete n.chartData.unsmoothedRaw,n.testDuration>122&&(n.chartData="toolong",n.keySpacing="toolong",n.keyDuration="toolong",X.setKeypressTimingsTooLong()),s)return void ue.log("testCompletedInvalid");"normal"!=c.default.difficulty&&("master"!=c.default.difficulty&&"expert"!=c.default.difficulty||e)||v.resetIncomplete(),n.uid=null===(o=le.Auth.currentUser)||void 0===o?void 0:o.uid,G.updateRateQuote(ee.randomQuote),j.loading(!0),n.challenge=H.verify(n),null===n.challenge&&(null==n||delete n.challenge),n.hash=(0,de.default)(n);const r=yield d.default.results.save(n);if(j.loading(!1),200!==r.status)return console.log("Error saving result",n),$("#retrySavingResultButton").removeClass("hidden"),"Incorrect result hash"===r.message&&console.log(n),$e.completedEvent=n,$e.canRetry=!0,m.add("Failed to save result: "+r.message,-1);G.hideCrown(),n._id=r.data.insertedId,r.data.isPb&&(n.isPb=!0),R.saveLocalResult(n),R.updateLocalStats(v.restartCount+1,n.testDuration+n.incompleteTestSeconds-n.afkDuration),ue.log("testCompleted"),r.data.isPb&&(G.showCrown(),G.updateCrown(),R.saveLocalPB(c.default.mode,n.mode2,c.default.punctuation,c.default.language,c.default.difficulty,c.default.lazyMode,n.wpm,n.acc,n.rawWpm,n.consistency)),r.data.dailyLeaderboardRank&&m.add(`New ${n.language} ${n.mode} ${n.mode2} rank: `+f.getPositionString(r.data.dailyLeaderboardRank),1,10,"Daily Leaderboard","list-ol"),$("#retrySavingResultButton").addClass("hidden")}))}function _e(e){ce=e,X.pushKeypressesToHistory(),Se(!0);const t=v.calculateTestSeconds(performance.now());let o=t-v.calculateAfkSeconds(t);o<0&&(o=0),v.incrementIncompleteSeconds(o),v.incrementRestartCount()}t.retrySavingResult=Ce,t.finish=Se,t.fail=_e,$(document).on("click","#testModesNotice .textButton.restart",(()=>{me()})),$(document).on("keypress","#restartTestButton",(e=>{"Enter"===e.key&&me()})),$(document.body).on("click","#restartTestButton",(()=>{l.set(),u.resultCalculating||(Y.get()&&"typing"===c.default.repeatQuotes&&"quote"===c.default.mode?me(!0):me())})),$(document.body).on("click","#retrySavingResultButton",Ce),$(document).on("keypress","#nextTestButton",(e=>{"Enter"===e.key&&me()})),$(document.body).on("click","#nextTestButton",(()=>{l.set(),me()})),$(document.body).on("click","#restartTestButtonWithSameWordset",(()=>{"zen"!=c.default.mode?(l.set(),me(!0)):m.add("Repeat test disabled in zen mode")})),$(document).on("keypress","#restartTestButtonWithSameWordset",(e=>{"zen"!=c.default.mode?"Enter"===e.key&&me(!0):m.add("Repeat test disabled in zen mode")})),$(document).on("click","#top .config .wordCount .textButton",(e=>{var t;if(u.testRestarting)return;const o=null!==(t=$(e.currentTarget).attr("wordCount"))&&void 0!==t?t:"15";"custom"!=o&&(p.setWordCount(parseInt(o)),l.set(),me())})),$(document).on("click","#top .config .time .textButton",(e=>{var t;if(u.testRestarting)return;const o=null!==(t=$(e.currentTarget).attr("timeConfig"))&&void 0!==t?t:"10";"custom"!=o&&(p.setTimeConfig(parseInt(o)),l.set(),me())})),$(document).on("click","#top .config .quoteLength .textButton",(e=>{var t;if(u.testRestarting)return;let o=parseInt(null!==(t=$(e.currentTarget).attr("quoteLength"))&&void 0!==t?t:"1");-2!=o&&(-1==o&&(o=[0,1,2,3]),p.setQuoteLength(o,!1,e.shiftKey),l.set(),me())})),$(document).on("click","#top .config .punctuationMode .textButton",(()=>{u.testRestarting||(p.setPunctuation(!c.default.punctuation),l.set(),me())})),$(document).on("click","#top .config .numbersMode .textButton",(()=>{u.testRestarting||(p.setNumbers(!c.default.numbers),l.set(),me())})),$(document).on("click","#top .config .mode .textButton",(e=>{var t;if(u.testRestarting)return;if($(e.currentTarget).hasClass("active"))return;const o=null!==(t=$(e.currentTarget).attr("mode"))&&void 0!==t?t:"time";void 0!==o&&(p.setMode(o),l.set(),me())})),$("#practiseWordsPopup .button.missed").on("click",(()=>{y.hidePopup(),y.init(!0,!1),me(!1,0,void 0,!0)})),$("#practiseWordsPopup .button.slow").on("click",(()=>{y.hidePopup(),y.init(!1,!0),me(!1,0,void 0,!0)})),$("#practiseWordsPopup .button.both").on("click",(()=>{y.hidePopup(),y.init(!0,!0),me(!1,0,void 0,!0)})),$(document).on("click","#quoteSearchPopup #quoteSearchResults .searchResult",(e=>{var t;if(e.target.classList.contains("report")||e.target.classList.contains("favorite"))return;const o=parseInt(null!==(t=$(e.currentTarget).attr("id"))&&void 0!==t?t:"");L.setSelectedId(o),!0===L.apply(o)&&me()})),$(document).on("click","#top #menu #startTestButton, #top .logo",(()=>{"test"===Z.get()&&me()})),ae.subscribe(((e,t,o)=>{"test"===Z.get()&&("difficulty"!==e||o||me(!1),"showAllLines"!==e||o||me(!1),"keymapMode"!==e||o||me(!1),"tapeMode"!==e||o||me(!1)),"lazyMode"!==e||!1!==t||o||(pe=!1)})),ie.subscribe(((e,t)=>{"fail"===e&&void 0!==t&&_e(t),"finish"===e&&Se()}))},1322:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setActiveChallenge=t.setPaceRepeat=t.setRepeated=t.activeChallenge=t.isPaceRepeat=t.isRepeated=void 0,t.isRepeated=!1,t.isPaceRepeat=!1,t.activeChallenge=null,t.setRepeated=function(e){t.isRepeated=e},t.setPaceRepeat=function(e){t.isPaceRepeat=e},t.setActiveChallenge=function(e){t.activeChallenge=e}},2474:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.calculateStats=t.removeAfkData=t.calculateAccuracy=t.calculateBurst=t.setLastSecondNotRound=t.calculateAfkSeconds=t.setStart=t.setEnd=t.calculateWpmAndRaw=t.calculateTestSeconds=t.setInvalid=t.resetIncomplete=t.incrementIncompleteSeconds=t.incrementRestartCount=t.incompleteSeconds=t.restartCount=t.restart=t.getStats=t.setLastResult=t.lastResult=t.setLastTestWpm=t.lastTestWpm=t.lastSecondNotRound=t.end2=t.start2=t.end=t.start=t.invalid=void 0;const r=s(o(6705)),d=i(o(3388)),u=i(o(4897)),l=i(o(9470));function c(e){if(void 0===e){const e=(t.end-u.lastKeypress)/1e3;return("zen"==r.default.mode||u.bailout)&&e<7?(u.lastKeypress-t.start)/1e3:(t.end-t.start)/1e3}return(e-t.start)/1e3}function p(){const e=u.accuracy.correct/(u.accuracy.correct+u.accuracy.incorrect)*100;return isNaN(e)?100:e}t.invalid=!1,t.lastSecondNotRound=!1,t.lastTestWpm=0,t.setLastTestWpm=function(e){t.lastTestWpm=e},t.setLastResult=function(e){t.lastResult=e},t.getStats=function(){const e={lastResult:t.lastResult,start:t.start,end:t.end,wpmHistory:u.wpmHistory,rawHistory:u.wpmHistory,burstHistory:u.burstHistory,keypressPerSecond:u.keypressPerSecond,currentKeypress:u.currentKeypress,lastKeypress:u.lastKeypress,currentBurstStart:u.currentBurstStart,lastSecondNotRound:t.lastSecondNotRound,missedWords:u.missedWords,accuracy:u.accuracy,keypressTimings:u.keypressTimings};try{e.keySpacingStats={average:u.keypressTimings.spacing.array.reduce(((e,t)=>t+e))/u.keypressTimings.spacing.array.length,sd:d.stdDev(u.keypressTimings.spacing.array)}}catch(e){}try{e.keyDurationStats={average:u.keypressTimings.duration.array.reduce(((e,t)=>t+e))/u.keypressTimings.duration.array.length,sd:d.stdDev(u.keypressTimings.duration.array)}}catch(e){}return e},t.restart=function(){t.start=0,t.end=0,t.invalid=!1,t.lastSecondNotRound=!1},t.restartCount=0,t.incompleteSeconds=0,t.incrementRestartCount=function(){t.restartCount++},t.incrementIncompleteSeconds=function(e){t.incompleteSeconds+=e},t.resetIncomplete=function(){t.restartCount=0,t.incompleteSeconds=0},t.setInvalid=function(){t.invalid=!0},t.calculateTestSeconds=c,t.calculateWpmAndRaw=function(){let e=0,t=0,o=0;for(let n=0;n<u.input.history.length;n++){const a="zen"==r.default.mode?u.input.getHistory(n):l.words.get(n);u.input.getHistory(n)==a&&(t+=a.length,n<u.input.history.length-1&&"\n"!==d.getLastChar(u.input.getHistory(n))&&o++),e+=u.input.getHistory(n).length}if(""!==u.input.current){const o="zen"==r.default.mode?u.input.current:l.words.getCurrent(),n={correct:0,incorrect:0,missed:0};for(let e=0;e<o.length;e++)e<u.input.current.length?u.input.current[e]==o[e]?n.correct++:n.incorrect++:n.missed++;e+=n.correct,e+=n.incorrect,e+=n.missed,0==n.incorrect&&(t+=n.correct)}"nospace"!==r.default.funbox&&"arrows"!==r.default.funbox||(o=0),e+=u.input.current.length;const n=c(performance.now());return{wpm:Math.round((t+o)*(60/n)/5),raw:Math.round((e+o)*(60/n)/5)}},t.setEnd=function(e){t.end=e,t.end2=Date.now()},t.setStart=function(e){t.start=e,t.start2=Date.now()},t.calculateAfkSeconds=function(e){let t=0;return void 0!==e&&(t="time"===r.default.mode?Math.round(e)-u.keypressPerSecond.length:Math.ceil(e)-u.keypressPerSecond.length,t<0&&(t=0)),u.keypressPerSecond.filter((e=>e.afk)).length+t},t.setLastSecondNotRound=function(){t.lastSecondNotRound=!0},t.calculateBurst=function(){var e,t;const o=(performance.now()-u.currentBurstStart)/1e3;let n;if(n=u.input.current.length,0==n&&(n=null!==(t=null===(e=u.input.getHistoryLast())||void 0===e?void 0:e.length)&&void 0!==t?t:0),0==n)return 0;const a=d.roundTo2(n*(60/o)/5);return Math.round(a)},t.calculateAccuracy=p,t.removeAfkData=function(){const e=c();u.keypressPerSecond.splice(e),u.wpmHistory.splice(e),u.burstHistory.splice(e),u.rawHistory.splice(e)},t.calculateStats=function(){let e=c();"custom"!=r.default.mode&&(e=d.roundTo2(e));const t=function(){let e=0,t=0,o=0,n=0,a=0,i=0,s=0;for(let c=0;c<u.input.history.length;c++){const p="zen"==r.default.mode?u.input.getHistory(c):l.words.get(c);if(""!==u.input.getHistory(c)){if(u.input.getHistory(c)==p)e+=p.length,t+=p.length,c<u.input.history.length-1&&"\n"!==d.getLastChar(u.input.getHistory(c))&&s++;else if(u.input.getHistory(c).length>=p.length)for(let e=0;e<u.input.getHistory(c).length;e++)e<p.length?u.input.getHistory(c)[e]==p[e]?t++:o++:n++;else{const n={correct:0,incorrect:0,missed:0};for(let e=0;e<p.length;e++)e<u.input.getHistory(c).length?u.input.getHistory(c)[e]==p[e]?n.correct++:n.incorrect++:n.missed++;t+=n.correct,o+=n.incorrect,c===u.input.history.length-1&&"time"==r.default.mode?0===n.incorrect&&(e+=n.correct):a+=n.missed}c<u.input.history.length-1&&i++}}return"nospace"!==r.default.funbox&&"arrows"!==r.default.funbox||(i=0,s=0),{spaces:i,correctWordChars:e,allCorrectChars:t,incorrectChars:"zen"==r.default.mode?u.accuracy.incorrect:o,extraChars:n,missedChars:a,correctSpaces:s}}(),o=d.roundTo2((t.correctWordChars+t.correctSpaces)*(60/e)/5),n=d.roundTo2((t.allCorrectChars+t.spaces+t.incorrectChars+t.extraChars)*(60/e)/5),a=d.roundTo2(p());return{wpm:isNaN(o)?0:o,wpmRaw:isNaN(n)?0:n,acc:a,correctChars:t.correctWordChars,incorrectChars:t.incorrectChars,missedChars:t.missedChars,extraChars:t.extraChars,allChars:t.allCorrectChars+t.spaces+t.incorrectChars+t.extraChars,time:d.roundTo2(e),spaces:t.spaces,correctSpaces:t.correctSpaces}}},6084:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.start=t.getTimerStats=t.clear=t.enableTimerDebug=void 0;const r=i(o(6705)),d=r,u=i(o(8248)),l=i(o(8824)),c=i(o(3261)),p=i(o(2474)),f=i(o(4897)),h=i(o(9470)),m=i(o(7353)),g=i(o(3388)),v=i(o(3368)),y=i(o(4292)),b=i(o(210)),w=i(o(6443)),$=i(o(195)),C=i(o(6507));let S=0,_=null;let k=0,x=!1;t.enableTimerDebug=function(){x=!0},t.clear=function(){$.set(0),null!==_&&clearTimeout(_)};let T=[];t.getTimerStats=function(){return T},t.start=function(){return s(this,void 0,void 0,(function*(){b.clear(),S=0,T=[],k=p.start+1e3,function e(){const t=k-performance.now();T.push({dateNow:Date.now(),now:performance.now(),expected:k,nextDelay:t}),("time"===r.default.mode&&r.default.time<130&&r.default.time>0||"words"===r.default.mode&&r.default.words<250&&r.default.words>0)&&(t<500&&b.set(),t<100&&(S++,S>5&&(v.add('This could be caused by "efficiency mode" on Microsoft Edge.'),v.add("Stopping the test due to bad performance. This would cause test calculations to be incorrect. If this happens a lot, please report this.",-1),C.dispatch("fail","slow timer")))),_=setTimeout((function(){if(!w.get())return null!==_&&clearTimeout(_),b.clear(),void(S=0);(function(){s(this,void 0,void 0,(function*(){x&&console.time("timer step -----------------------------"),$.increment(),function(){x&&console.time("premid");const e=document.querySelector("#premidSecondsLeft");null!==e&&(e.innerHTML=(r.default.time-$.get()).toString()),x&&console.timeEnd("premid")}(),x&&console.time("timer progress update"),("time"===r.default.mode||"custom"===r.default.mode&&u.isTimeRandom)&&l.update(),x&&console.timeEnd("timer progress update");const e=function(){x&&console.time("calculate wpm and raw");const e=p.calculateWpmAndRaw();return x&&console.timeEnd("calculate wpm and raw"),x&&console.time("update live wpm"),c.update(e.wpm,e.raw),x&&console.timeEnd("update live wpm"),x&&console.time("push to history"),f.pushToWpmHistory(e.wpm),f.pushToRawHistory(e.raw),x&&console.timeEnd("push to history"),e}(),t=function(){x&&console.time("calculate acc");const e=g.roundTo2(p.calculateAccuracy());return x&&console.timeEnd("calculate acc"),e}();!function(e){x&&console.time("update monkey");const t=r.default.blindMode?e.raw:e.wpm;m.updateFastOpacity(t),x&&console.timeEnd("update monkey")}(e),function(){if(x&&console.time("layoutfluid"),"layoutfluid"===r.default.funbox&&"time"===r.default.mode){const e=r.default.customLayoutfluid?r.default.customLayoutfluid.split("#"):["qwerty","dvorak","colemak"],t=r.default.time/e.length,o=$.get(),n=e[Math.floor(o/t)],a=[];for(let o=1;o<e.length;o++)a.push(Math.floor(t*o));a.includes(o+3)?v.add("3",0,1):a.includes(o+2)?v.add("2",0,1):a.includes(o+1)&&v.add("1",0,1),r.default.layout!==n&&void 0!==n&&(v.add(`--- !!! ${n} !!! ---`,0),d.setLayout(n,!0),d.setKeymapLayout(n,!0))}x&&console.timeEnd("layoutfluid")}(),function(e,t){x&&console.time("fail conditions"),f.pushKeypressesToHistory(),"custom"===r.default.minWpm&&e.wpm<r.default.minWpmCustomSpeed&&h.words.currentIndex>3?(null!==_&&clearTimeout(_),b.clear(),S=0,C.dispatch("fail","min wpm")):"custom"===r.default.minAcc&&t<r.default.minAccCustom?(null!==_&&clearTimeout(_),b.clear(),S=0,C.dispatch("fail","min accuracy")):x&&console.timeEnd("fail conditions")}(e,t),function(){if(x&&console.time("times up check"),("time"==r.default.mode||"custom"===r.default.mode&&u.isTimeRandom)&&($.get()>=r.default.time&&0!==r.default.time&&"time"===r.default.mode||$.get()>=u.time&&0!==u.time&&"custom"===r.default.mode))return null!==_&&clearTimeout(_),y.hide(),f.input.pushHistory(),f.corrected.pushHistory(),b.clear(),S=0,void C.dispatch("finish");x&&console.timeEnd("times up check")}(),x&&console.timeEnd("timer step -----------------------------")}))})(),k+=1e3,e()}),t)}()}))}},8673:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.highlightBadWord=t.applyBurstHeatmap=t.toggleResultWords=t.arrangeCharactersLeftToRight=t.arrangeCharactersRightToLeft=t.lineJump=t.scrollTape=t.updateWordElement=t.screenshot=t.colorful=t.flipColors=t.addWord=t.showWords=t.updateActiveElement=t.focusWords=t.reset=t.setResultCalculating=t.setTestRestarting=t.setActiveWordTop=t.setCurrentWordElementIndex=t.setResultVisible=t.resultCalculating=t.currentTestLine=t.lineTransition=t.testRestartingPromise=t.testRestarting=t.activeWordTop=t.resultVisible=t.currentWordElementIndex=void 0;const d=i(o(3368)),u=i(o(4203)),l=i(o(6705)),c=l,p=i(o(6350)),f=i(o(9470)),h=i(o(4897)),m=i(o(8248)),g=i(o(4292)),v=i(o(1333)),y=i(o(4626)),b=i(o(3388)),w=i(o(210)),C=i(o(8526)),S=i(o(1446)),_=r(o(9546)),k=o(6617);let x;function T(){$("#wordsWrapper").hasClass("hidden")||$("#wordsInput").trigger("focus")}function P(e){const o=document.querySelector("#words .active");"zen"==l.default.mode&&e?null==o||o.remove():null!==o&&("word"==l.default.highlightMode&&o.querySelectorAll("letter").forEach((e=>{e.classList.remove("correct")})),o.classList.remove("active"));try{const e=document.querySelectorAll("#words .word")[t.currentWordElementIndex];e.classList.add("active"),e.classList.remove("error"),t.activeWordTop=document.querySelector("#words .active").offsetTop,"word"==l.default.highlightMode&&e.querySelectorAll("letter").forEach((e=>{e.classList.add("correct")}))}catch(e){}}function M(e){let t=!1,o="<div class='word'>";for(let n=0;n<e.length;n++)"arrows"===l.default.funbox?("↑"===e.charAt(n)&&(o+='<letter><i class="fas fa-arrow-up"></i></letter>'),"↓"===e.charAt(n)&&(o+='<letter><i class="fas fa-arrow-down"></i></letter>'),"←"===e.charAt(n)&&(o+='<letter><i class="fas fa-arrow-left"></i></letter>'),"→"===e.charAt(n)&&(o+='<letter><i class="fas fa-arrow-right"></i></letter>')):"\t"===e.charAt(n)?o+="<letter class='tabChar'><i class=\"fas fa-long-arrow-alt-right\"></i></letter>":"\n"===e.charAt(n)?(t=!0,o+="<letter class='nlChar'><i class=\"fas fa-angle-down\"></i></letter>"):o+="<letter>"+e.charAt(n)+"</letter>";return o+="</div>",t&&(o+="<div class='newline'></div>"),o}function O(e){e?$("#words").addClass("flipped"):$("#words").removeClass("flipped")}function L(e){e?$("#words").addClass("colorfulMode"):$("#words").removeClass("colorfulMode")}function W(){return s(this,void 0,void 0,(function*(){let e=!1,t=!1;function o(){$("#notificationCenter").removeClass("hidden"),$("#commandLineMobileButton").removeClass("hidden"),$(".pageTest .ssWatermark").addClass("hidden"),$(".pageTest .ssWatermark").text("monkeytype.com"),$(".pageTest .buttons").removeClass("hidden"),$("noscript").removeClass("hidden"),$("#nocss").removeClass("hidden"),t&&$("#cookiePopupWrapper").removeClass("hidden"),e&&$("#resultReplay").removeClass("hidden"),null==k.Auth.currentUser&&$(".pageTest .loginTip").removeClass("hidden")}$("#cookiePopupWrapper").hasClass("hidden")||(t=!0),$("#resultReplay").hasClass("hidden")||(e=!0,y.pauseReplay());const n=new Date(Date.now());$("#resultReplay").addClass("hidden"),$(".pageTest .ssWatermark").removeClass("hidden"),$(".pageTest .ssWatermark").text((0,_.default)(n,"dd MMM yyyy HH:mm")+" | monkeytype.com "),null!=k.Auth.currentUser&&$(".pageTest .ssWatermark").text(p.getSnapshot().name+" | "+(0,_.default)(n,"dd MMM yyyy HH:mm")+" | monkeytype.com  "),$(".pageTest .buttons").addClass("hidden");const a=$("#middle"),i=a.position().left,s=a.position().top,r=a.outerWidth(!0),l=a.outerHeight(!0);$("#notificationCenter").addClass("hidden"),$("#commandLineMobileButton").addClass("hidden"),$(".pageTest .loginTip").addClass("hidden"),$("noscript").addClass("hidden"),$("#nocss").addClass("hidden"),t&&$("#cookiePopupWrapper").addClass("hidden");try{const e=50,t=25;html2canvas(document.body,{backgroundColor:yield u.get("bg"),width:r+2*e,height:l+2*t,x:i-e,y:s-t}).then((e=>{e.toBlob((e=>{try{if(null===e)return;navigator.userAgent.toLowerCase().indexOf("firefox")>-1?(open(URL.createObjectURL(e)),o()):navigator.clipboard.write([new ClipboardItem(Object.defineProperty({},e.type,{value:e,enumerable:!0}))]).then((()=>{d.add("Copied to clipboard",1,2),o()})).catch((e=>{d.add(b.createErrorMessage(e,"Error saving image to clipboard"),-1),o()}))}catch(e){d.add(b.createErrorMessage(e,"Error saving image to clipboard"),-1),o()}}))}))}catch(e){d.add(b.createErrorMessage(e,"Error creating image"),-1),o()}setTimeout((()=>{o()}),3e3)}))}function A(e=!l.default.blindMode){const t=h.input.current,o=document.querySelector("#words .word.active"),n=f.words.getCurrent();if(!n&&"zen"!==l.default.mode)return;let a="",i=!1;if("zen"===l.default.mode)for(let e=0;e<h.input.current.length;e++)"\t"===h.input.current[e]?a+='<letter class=\'tabChar correct\' style="opacity: 0"><i class="fas fa-long-arrow-alt-right"></i></letter>':"\n"===h.input.current[e]?(i=!0,a+='<letter class=\'nlChar correct\' style="opacity: 0"><i class="fas fa-angle-down"></i></letter>'):a+=`<letter class="correct">${h.input.current[e]}</letter>`;else{let i=!1;const s=b.trailingComposeChars.test(t)?t.search(b.trailingComposeChars):t.length;t.search(b.trailingComposeChars)<n.length&&n.slice(0,s)===t.slice(0,s)&&(i=!0);let r=i?"correct":"incorrect";l.default.blindMode&&(r="correct");for(let o=0;o<t.length;o++){const i=n[o]==t[o];let s="correct";"off"==l.default.highlightMode&&(s="");let d=n[o],u="",c="";if("arrows"===l.default.funbox?("↑"===d&&(d='<i class="fas fa-arrow-up"></i>'),"↓"===d&&(d='<i class="fas fa-arrow-down"></i>'),"←"===d&&(d='<i class="fas fa-arrow-left"></i>'),"→"===d&&(d='<i class="fas fa-arrow-right"></i>')):"\t"===d?(u="tabChar",d='<i class="fas fa-long-arrow-alt-right"></i>'):"\n"===d&&(c="nlChar",d='<i class="fas fa-angle-down"></i>'),i)a+=`<letter class="${"word"==l.default.highlightMode?r:s} ${u}${c}">${d}</letter>`;else if(void 0!==d&&C.getComposing()&&o>=C.getStartPos())a+=`<letter class="${"word"==l.default.highlightMode?r:""} dead">${d}</letter>`;else if(e)if(void 0===d){if(!l.default.hideExtraLetters){let e=t[o];" "!=e&&"\t"!=e&&"\n"!=e||(e="_"),a+=`<letter class="${"word"==l.default.highlightMode?r:"incorrect"} extra ${u}${c}">${e}</letter>`}}else a+=`<letter class="${"word"==l.default.highlightMode?r:"incorrect"} ${u}${c}">`+("replace"===l.default.indicateTypos?" "==t[o]?"_":t[o]:d)+("below"===l.default.indicateTypos?`<hint>${t[o]}</hint>`:"")+"</letter>";else void 0!==d&&(a+=`<letter class="${"word"==l.default.highlightMode?r:s} ${u}${c}">${d}</letter>`)}for(let e=t.length;e<n.length;e++)"arrows"===l.default.funbox?("↑"===n[e]&&(a+='<letter><i class="fas fa-arrow-up"></i></letter>'),"↓"===n[e]&&(a+='<letter><i class="fas fa-arrow-down"></i></letter>'),"←"===n[e]&&(a+='<letter><i class="fas fa-arrow-left"></i></letter>'),"→"===n[e]&&(a+='<letter><i class="fas fa-arrow-right"></i></letter>')):"\t"===n[e]?a+="<letter class='tabChar'><i class=\"fas fa-long-arrow-alt-right\"></i></letter>":"\n"===n[e]?a+="<letter class='nlChar'><i class=\"fas fa-angle-down\"></i></letter>":a+=`<letter class="${"word"==l.default.highlightMode?r:""}">`+n[e]+"</letter>";"letter"===l.default.highlightMode&&l.default.hideExtraLetters&&(t.length>n.length&&!l.default.blindMode?$(o).addClass("error"):t.length==n.length&&$(o).removeClass("error"))}o.innerHTML=a,i&&$("#words").append("<div class='newline'></div>")}function B(){t.resultVisible&&($("#resultWordsHistory").stop(!0,!0).hasClass("hidden")?$("#showWordHistoryButton").hasClass("loaded")?(l.default.burstHeatmap&&E(),$("#resultWordsHistory").removeClass("hidden").css("display","none").slideDown(250)):($("#words").html('<div class="preloader"><i class="fas fa-fw fa-spin fa-circle-notch"></i></div>'),function(){return s(this,void 0,void 0,(function*(){$("#resultWordsHistory .words").empty();let e="";for(let t=0;t<h.input.history.length+2;t++){const o=h.input.getHistory(t),n=f.words.get(t);let a="";try{if(""===o)throw new Error("empty input word");if(a=void 0!==h.corrected.getHistory(t)&&""!==h.corrected.getHistory(t)?`<div class='word' burst="${h.burstHistory[t]}" input="${h.corrected.getHistory(t).replace(/"/g,"&quot;").replace(/ /g,"_")}">`:`<div class='word' burst="${h.burstHistory[t]}" input="${o.replace(/"/g,"&quot;").replace(/ /g,"_")}">`,t===h.input.history.length-1){const e={correct:0,incorrect:0,missed:0},i="zen"==l.default.mode?o.length:n.length;for(let t=0;t<i;t++)t<o.length?"zen"==l.default.mode||o[t]==n[t]?e.correct++:e.incorrect++:e.missed++;0===e.incorrect&&"time"===l.default.mode||"zen"!=l.default.mode&&o!==n&&(a=`<div class='word error' burst="${h.burstHistory[t]}" input="${o.replace(/"/g,"&quot;").replace(/ /g,"_")}">`)}else"zen"!=l.default.mode&&o!==n&&(a=`<div class='word error' burst="${h.burstHistory[t]}" input="${o.replace(/"/g,"&quot;").replace(/ /g,"_")}">`);let e;e="zen"==l.default.mode||o.length>n.length?o.length:n.length;for(let i=0;i<e;i++){let s;try{s=h.corrected.getHistory(t)[i]}catch(e){s=void 0}let r="";i+1===e&&void 0!==h.corrected.getHistory(t)&&h.corrected.getHistory(t).length>o.length&&(r="extraCorrected"),"zen"==l.default.mode||void 0!==n[i]?"zen"==l.default.mode||o[i]===n[i]?s===o[i]||void 0===s?a+=`<letter class="correct ${r}">${o[i]}</letter>`:a+=`<letter class="corrected ${r}">`+o[i]+"</letter>":o[i]===h.input.current?a+=`<letter class='correct ${r}'>`+n[i]+"</letter>":void 0===o[i]?a+="<letter>"+n[i]+"</letter>":a+=`<letter class="incorrect ${r}">`+n[i]+"</letter>":a+='<letter class="incorrect extra">'+o[i]+"</letter>"}a+="</div>"}catch(e){try{a="<div class='word'>";for(let e=0;e<n.length;e++)a+="<letter>"+n[e]+"</letter>";a+="</div>"}catch(e){}}e+=a}return $("#resultWordsHistory .words").html(e),$("#showWordHistoryButton").addClass("loaded"),!0}))}().then((()=>{l.default.burstHeatmap&&E(),$("#resultWordsHistory").removeClass("hidden").css("display","none").slideDown(250,(()=>{l.default.burstHeatmap&&E()}))}))):$("#resultWordsHistory").slideUp(250,(()=>{$("#resultWordsHistory").addClass("hidden")})))}function E(){var e,t;if(l.default.burstHeatmap){$("#resultWordsHistory .heatmapLegend").removeClass("hidden");let o=[...h.burstHistory];o=o.filter((e=>e!==1/0)),o=o.filter((e=>e<350)),(null===(e=h.input.getHistory(h.input.getHistory().length-1))||void 0===e?void 0:e.length)!==(null===(t=f.words.getCurrent())||void 0===t?void 0:t.length)&&(o=o.splice(0,o.length-1));const n=b.median(o),a=[];o.forEach((e=>{a.push(Math.abs(n-e))}));const i=b.mean(a),s=[{val:0,class:"heatmap0"},{val:n-1.5*i,class:"heatmap1"},{val:n-.5*i,class:"heatmap2"},{val:n+.5*i,class:"heatmap3"},{val:n+1.5*i,class:"heatmap4"}];s.forEach(((e,t)=>{let o="";o=0===t?`<${Math.round(s[t+1].val)}`:4===t?`${Math.round(e.val-1)}+`:`${Math.round(e.val)}-${Math.round(s[t+1].val)-1}`,$("#resultWordsHistory .heatmapLegend .box"+t).text(o)})),$("#resultWordsHistory .words .word").each(((e,t)=>{const o=parseInt($(t).attr("burst"));let n="";s.forEach((e=>{o>e.val&&(n=e.class)})),$(t).addClass(n)}))}else $("#resultWordsHistory .heatmapLegend").addClass("hidden"),$("#resultWordsHistory .words .word").removeClass("heatmap0"),$("#resultWordsHistory .words .word").removeClass("heatmap1"),$("#resultWordsHistory .words .word").removeClass("heatmap2"),$("#resultWordsHistory .words .word").removeClass("heatmap3"),$("#resultWordsHistory .words .word").removeClass("heatmap4")}S.subscribe(((e,t)=>{void 0!==t&&"boolean"==typeof t&&("flipTestColors"===e&&O(t),"colorfulMode"===e&&L(t),"highlightMode"===e&&A(t),"burstHeatmap"===e&&E())})),t.currentWordElementIndex=0,t.resultVisible=!1,t.activeWordTop=0,t.testRestarting=!1,t.lineTransition=!1,t.currentTestLine=0,t.resultCalculating=!1,t.setResultVisible=function(e){t.resultVisible=e},t.setCurrentWordElementIndex=function(e){t.currentWordElementIndex=e},t.setActiveWordTop=function(e){t.activeWordTop=e},t.setTestRestarting=function(e){t.testRestarting=e,!0===e?t.testRestartingPromise=new Promise((e=>{x=e})):(x&&x(),x=null)},t.setResultCalculating=function(e){t.resultCalculating=e},t.reset=function(){t.currentTestLine=0,t.currentWordElementIndex=0},t.focusWords=T,t.updateActiveElement=P,t.showWords=function(){$("#words").empty(),"off"!==l.default.tapeMode?($("#words").addClass("tape"),$("#wordsWrapper").addClass("tape")):($("#words").removeClass("tape"),$("#wordsWrapper").removeClass("tape")),"below"===l.default.indicateTypos?($("#words").addClass("indicateTyposBelow"),$("#wordsWrapper").addClass("indicateTyposBelow")):($("#words").removeClass("indicateTyposBelow"),$("#wordsWrapper").removeClass("indicateTyposBelow"));let e="";if("zen"!==l.default.mode)for(let t=0;t<f.words.length;t++)e+=M(f.words.get(t));else e='<div class="word">word height</div><div class="word active"></div>';$("#words").html(e),$("#wordsWrapper").removeClass("hidden");const t=$(document.querySelector(".word")).outerHeight(!0),o=$(document.querySelector("#words")).outerHeight(!0);if(!l.default.showAllLines||"time"==l.default.mode||m.isWordRandom&&0==m.word||m.isTimeRandom)if("off"!==l.default.tapeMode){const e=t;$("#words").css("height",2*t+"px").css("overflow","hidden").css("width","200%").css("margin-left","50%"),$("#wordsWrapper").css("height",e+"px").css("overflow","hidden"),$(".outOfFocusWarning").css("line-height",e+"px")}else $("#words").css("height",4*t+"px").css("overflow","hidden").css("width","100%").css("margin-left","unset"),$("#wordsWrapper").css("height",3*t+"px").css("overflow","hidden"),$(".outOfFocusWarning").css("line-height",3*t+"px");else{$("#words").css("height","auto"),$("#wordsWrapper").css("height","auto");let e=3*t;e>o&&(e=o),$(".outOfFocusWarning").css("line-height",e+"px")}"zen"===l.default.mode&&$(document.querySelector(".word")).remove(),P(),g.updatePosition()},t.addWord=function(e){$("#words").append(M(e))},t.flipColors=O,t.colorful=L,t.screenshot=W,t.updateWordElement=A,t.scrollTape=function(){var e,o,n;const a=document.querySelector("#wordsWrapper").offsetWidth;let i=0;const s=[];let r=0;if(t.currentWordElementIndex>0){for(let n=0;n<t.currentWordElementIndex;n++){const t=document.querySelectorAll("#words .word")[n];if(i+=null!==(e=$(t).outerWidth(!0))&&void 0!==e?e:0,Math.floor(t.offsetLeft)<0-Math.floor(t.offsetWidth)){const e=$($("#words .word")[n]);s.push(e),r+=null!==(o=e.outerWidth(!0))&&void 0!==o?o:0}}if(s.length>0){t.currentWordElementIndex-=s.length,s.forEach((e=>e.remove())),i-=r;const e=parseInt($("#words").css("margin-left"),10);$("#words").css("margin-left",`${e+r}px`)}}let d=0;if("letter"===l.default.tapeMode&&h.input.current.length>0)for(let e=0;e<h.input.current.length;e++){const o=document.querySelectorAll("#words .word");d+=null!==(n=$(o[t.currentWordElementIndex].querySelectorAll("letter")[e]).outerWidth(!0))&&void 0!==n?n:0}const u=a/2-(i+d);l.default.smoothLineScroll?$("#words").stop(!0,!1).animate({marginLeft:u},w.get()?0:125):$("#words").css("margin-left",`${u}px`)},t.lineJump=function(e){var o;if("off"===l.default.tapeMode&&t.currentTestLine>0||"off"!==l.default.tapeMode&&t.currentTestLine>=0){const n=e,a=[],i=$("#words .word");for(let e=0;e<t.currentWordElementIndex;e++)$(i[e]).hasClass("hidden")||Math.floor(i[e].offsetTop)<("off"===l.default.tapeMode?n-10:n+10)&&a.push($($("#words .word")[e]));const s=$(document.querySelector(".word")).outerHeight(!0);if(l.default.smoothLineScroll&&a.length>0){t.lineTransition=!0,$("#words").prepend(`<div class="smoothScroller" style="position: fixed;height:${s}px;width:100%"></div>`),$("#words .smoothScroller").animate({height:0},w.get()?0:125,(()=>{$("#words .smoothScroller").remove()})),$("#paceCaret").animate({top:(null===(o=document.querySelector("#paceCaret"))||void 0===o?void 0:o.offsetTop)-s},w.get()?0:125);const e={marginTop:`-${s}px`};if("off"!==l.default.tapeMode){const t=document.querySelector("#wordsWrapper").offsetWidth/2;e.marginLeft=`${t}px`}$("#words").animate(e,w.get()?0:125,(()=>{t.activeWordTop=document.querySelector("#words .active").offsetTop,t.currentWordElementIndex-=a.length,t.lineTransition=!1,a.forEach((e=>e.remove())),$("#words").css("marginTop","0")}))}else a.forEach((e=>e.remove())),t.currentWordElementIndex-=a.length,$("#paceCaret").css({top:document.querySelector("#paceCaret").offsetTop-s})}t.currentTestLine++},t.arrangeCharactersRightToLeft=function(){$("#words").addClass("rightToLeftTest"),$("#resultWordsHistory .words").addClass("rightToLeftTest"),$("#resultReplay .words").addClass("rightToLeftTest")},t.arrangeCharactersLeftToRight=function(){$("#words").removeClass("rightToLeftTest"),$("#resultWordsHistory .words").removeClass("rightToLeftTest"),$("#resultReplay .words").removeClass("rightToLeftTest")},t.toggleResultWords=B,t.applyBurstHeatmap=E,t.highlightBadWord=function(e,t){t&&$($("#words .word")[e]).addClass("error")},$(document.body).on("click","#saveScreenshotButton",(()=>{W()})),$("#saveScreenshotButton").on("keypress",(e=>{"Enter"===e.key&&W()})),$(document).on("click","#testModesNotice .textButton.blind",(()=>{c.setBlindMode(!l.default.blindMode)})),$(".pageTest #copyWordsListButton").on("click",(()=>s(void 0,void 0,void 0,(function*(){try{let e;e="zen"==l.default.mode?h.input.history.join(" "):f.words.get().slice(0,h.input.history.length).join(" "),yield navigator.clipboard.writeText(e),d.add("Copied to clipboard",0,2)}catch(e){d.add("Could not copy to clipboard: "+e,-1)}})))),$(".pageTest #toggleBurstHeatmap").on("click",(()=>s(void 0,void 0,void 0,(function*(){c.setBurstHeatmap(!l.default.burstHeatmap)})))),$(document).on("mouseleave","#resultWordsHistory .words .word",(()=>{$(".wordInputAfter").remove()})),$("#wpmChart").on("mouseleave",(()=>{$(".wordInputAfter").remove()})),$(document).on("mouseenter","#resultWordsHistory .words .word",(e=>{if(t.resultVisible){const t=$(e.currentTarget).attr("input"),o=parseInt($(e.currentTarget).attr("burst"));null!=t&&$(e.currentTarget).append(`<div class="wordInputAfter">\n          <div class="text">\n          ${t.replace(/\t/g,"_").replace(/\n/g,"_").replace(/</g,"&lt").replace(/>/g,"&gt")}\n          </div>\n          <div class="speed">\n          ${Math.round(l.default.alwaysShowCPM?5*o:o)}${l.default.alwaysShowCPM?"cpm":"wpm"}\n          </div>\n          </div>`)}})),$("#wordsInput").on("focus",(()=>{!t.resultVisible&&l.default.showOutOfFocusWarning&&v.hide(),g.show()})),$("#wordsInput").on("focusout",(()=>{!t.resultVisible&&l.default.showOutOfFocusWarning&&v.show(),g.hide()})),$(document).on("keypress","#showWordHistoryButton",(e=>{"Enter"===e.key&&B()})),$(document.body).on("click","#showWordHistoryButton",(()=>{B()})),$("#wordsWrapper").on("click",(()=>{T()}))},9470:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setHasTab=t.setRandomQuote=t.randomQuote=t.hasTab=t.words=void 0,t.words=new class{constructor(){this.list=[],this.length=0,this.currentIndex=0}get(e,t=!1){var o,n;return void 0===e?this.list:t?null===(n=null===(o=this.list[e])||void 0===o?void 0:o.replace(/[.?!":\-,]/g,""))||void 0===n?void 0:n.toLowerCase():this.list[e]}getCurrent(){return this.list[this.currentIndex]}getLast(){return this.list[this.list.length-1]}push(e){this.list.push(e),this.length=this.list.length}reset(){this.list=[],this.currentIndex=0,this.length=this.list.length}resetCurrentIndex(){this.currentIndex=0}decreaseCurrentIndex(){this.currentIndex--}increaseCurrentIndex(){this.currentIndex++}clean(){for(const e of this.list)if(/ +/.test(e)){const t=this.list.indexOf(e),o=e.split(" ");this.list.splice(t,1);for(let e=0;e<o.length;e++)this.list.splice(t+e,0,o[e])}}},t.hasTab=!1,t.randomQuote=null,t.setRandomQuote=function(e){t.randomQuote=e},t.setHasTab=function(e){t.hasTab=e}},8824:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.updateStyle=t.update=t.restart=t.hide=t.show=void 0;const r=s(o(6705)),d=i(o(8248)),u=i(o(3388)),l=i(o(9470)),c=i(o(4897)),p=i(o(195)),f=i(o(210)),h=i(o(6443)),m=i(o(1446));function g(){const e=r.default.showTimerProgress?r.default.timerOpacity:0;"zen"!=r.default.mode&&"bar"===r.default.timerStyle?$("#timerWrapper").stop(!0,!0).removeClass("hidden").animate({opacity:e},125):"text"===r.default.timerStyle?$("#timerNumber").stop(!0,!0).removeClass("hidden").css("opacity",0).animate({opacity:e},125):"zen"!=r.default.mode&&"mini"!==r.default.timerStyle||e>0&&$("#miniTimerAndLiveWpm .time").stop(!0,!0).removeClass("hidden").animate({opacity:e},125)}function v(){$("#timerWrapper").stop(!0,!0).animate({opacity:0},125),$("#miniTimerAndLiveWpm .time").stop(!0,!0).animate({opacity:0},125,(()=>{$("#miniTimerAndLiveWpm .time").addClass("hidden")})),$("#timerNumber").stop(!0,!0).animate({opacity:0},125)}t.show=g,t.hide=v,t.restart=function(){"bar"===r.default.timerStyle&&("time"===r.default.mode?$("#timer").stop(!0,!0).animate({width:"100vw"},0):"words"!==r.default.mode&&"custom"!==r.default.mode||$("#timer").stop(!0,!0).animate({width:"0vw"},0))};const y=document.querySelector("#timerNumber"),b=document.querySelector("#miniTimerAndLiveWpm .time");function w(){var e,t,o;const n=p.get();if("time"===r.default.mode||"custom"===r.default.mode&&d.isTimeRandom){let e=r.default.time;if("custom"===r.default.mode&&d.isTimeRandom&&(e=d.time),"bar"===r.default.timerStyle){const t=100-(n+1)/e*100;$("#timer").stop(!0,!0).animate({width:t+"vw"},f.get()?0:1e3,"linear")}else if("text"===r.default.timerStyle){let t=u.secondsToString(e-n);0===e&&(t=u.secondsToString(n)),null!==y&&(y.innerHTML="<div>"+t+"</div>")}else if("mini"===r.default.timerStyle){let t=u.secondsToString(e-n);0===e&&(t=u.secondsToString(n)),null!==b&&(b.innerHTML=t)}}else if("words"===r.default.mode||"custom"===r.default.mode||"quote"===r.default.mode){let n=l.words.length;if("words"===r.default.mode&&(n=r.default.words),"custom"===r.default.mode&&(n=d.isWordRandom?d.word:d.text.length),"quote"===r.default.mode&&(n=null!==(o=null===(t=null===(e=l.randomQuote)||void 0===e?void 0:e.textSplit)||void 0===t?void 0:t.length)&&void 0!==o?o:1),"bar"===r.default.timerStyle){const e=Math.floor((l.words.currentIndex+1)/n*100);$("#timer").stop(!0,!0).animate({width:e+"vw"},f.get()?0:250)}else"text"===r.default.timerStyle?0===n?null!==y&&(y.innerHTML=`<div>${c.input.history.length}</div>`):null!==y&&(y.innerHTML=`<div>${c.input.history.length}/${n}</div>`):"mini"===r.default.timerStyle&&(0===r.default.words?null!==b&&(b.innerHTML=`${c.input.history.length}`):null!==b&&(b.innerHTML=`${c.input.history.length}/${n}`))}else"zen"==r.default.mode&&("text"===r.default.timerStyle?null!==y&&(y.innerHTML=`<div>${c.input.history.length}</div>`):null!==b&&(b.innerHTML=`${c.input.history.length}`))}function C(){h.get()&&(v(),w(),setTimeout((()=>{g()}),125))}t.update=w,t.updateStyle=C,m.subscribe(((e,t)=>{"showTimerProgress"===e&&(!0===t&&h.get()?g():v()),"timerStyle"===e&&C()}))},2026:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.addAllFromToday=t.getString=t.addSeconds=void 0;const s=i(o(3388)),r=i(o(6350));let d,u=0,l=!1;t.addSeconds=function(e){l&&(new Date).getDate()>d?u=e:u+=e},t.getString=function(){return s.secondsToString(Math.round(u),!0,!0)+(!0===l?" today":" session")},t.addAllFromToday=function(){const e=new Date;e.setSeconds(0),e.setMinutes(0),e.setHours(0),e.setMilliseconds(0),d=e.getDate();const t=e.getTime();u=0;const o=r.getSnapshot().results;null==o||o.forEach((e=>{const o=new Date(e.timestamp);o.setSeconds(0),o.setMinutes(0),o.setHours(0),o.setMilliseconds(0),o.getTime()>=t&&(u+=e.testDuration+e.incompleteTestSeconds-e.afkDuration)})),l=!0}},6857:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.speak=t.clear=t.init=t.setLanguage=void 0;const d=r(o(6705)),u=i(o(3388)),l=i(o(1446));let c;function p(e=d.default.language){return s(this,void 0,void 0,(function*(){if(!c)return;const t=yield u.getLanguage(e),o=t.bcp47?t.bcp47:"en-US";c.lang=o}))}function f(){return s(this,void 0,void 0,(function*(){c=new SpeechSynthesisUtterance,p()}))}function h(){c=void 0}t.setLanguage=p,t.init=f,t.clear=h,t.speak=function(e){window.speechSynthesis.cancel(),void 0===c&&f(),void 0!==c&&(c.text=e,window.speechSynthesis.speak(c))},l.subscribe(((e,t)=>{"funbox"===e&&("none"===t?h():"tts"===t&&f()),"language"===e&&"tts"===d.default.funbox&&p()}))},5708:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getWord=t.updateScore=void 0;const s=i(o(4897)),r={};class d{constructor(){this.average=0,this.count=0}update(e){this.count<50&&this.count++;const t=1/this.count;this.average=e*t+this.average*(1-t)}}function u(e){let t=0,o=0;for(const n of e)n in r&&(t+=r[n].average,o++);return 0==o?0:t/o}t.updateScore=function(e,t){const o=s.keypressTimings.spacing.array;if(0===o.length||"string"==typeof o)return;let n=o[o.length-1];t||(n+=5e3),e in r||(r[e]=new d),r[e].update(n)},t.getWord=function(e){let t,o="";for(let n=0;n<20;n++){const a=e.randomWord(),i=u(a);(0==n||void 0===t||i>t)&&(o=a,t=i)}return o}},277:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getSection=t.getTLD=t.Section=void 0;const r=i(o(9817)),d=i(o(3388));class u{constructor(e,t,o){this.title=e,this.author=t,this.words=o}}function l(e){return s(this,void 0,void 0,(function*(){switch(e.name){case"english":default:return"en";case"spanish":return"es";case"french":return"fr";case"german":return"de";case"portuguese":return"pt";case"italian":return"it";case"dutch":return"nl"}}))}t.Section=u,t.getTLD=l,t.getSection=function(e){return s(this,void 0,void 0,(function*(){r.show();let t="en";const o=yield d.findCurrentGroup(e);void 0!==o&&(t=yield l(o));const n=`https://${t}.wikipedia.org/api/rest_v1/page/random/summary`,a={title:"",author:""},i=yield fetch(n);let s=0;if(200==i.status){const e=yield i.json();a.title=e.title,a.author=e.author,s=e.pageid}return new Promise(((e,o)=>{200!=i.status&&(r.hide(),o(i.status));const n=`https://${t}.wikipedia.org/w/api.php?action=query&format=json&pageids=${s}&prop=extracts&exintro=true&origin=*`,d=new XMLHttpRequest;d.onload=()=>{if(4==d.readyState)if(200==d.status){let t=JSON.parse(d.responseText).query.pages[s.toString()].extract;t=t.replace(/<\/p><p>+/g," "),t=$("<div/>").html(t).text(),t=t.replace(/\[\d+\]/gi,""),t=t.replace(/[\u200B-\u200D\uFEFF]/g,""),t=t.replace(/\s+/g," "),t=t.trim();const o=t.split(" "),n=new u(a.title,a.author,o);r.hide(),e(n)}else r.hide(),o(d.status)},d.open("GET",n),d.send()}))}))}},4905:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.withWords=t.Wordset=void 0;const n=o(3388);let a=null,i=null;class s{constructor(e){this.words=e,this.length=this.words.length}randomWord(){return(0,n.randomElementFromArray)(this.words)}}t.Wordset=s;class r{constructor(){this.chars={},this.count=0}addChar(e){this.count++,e in this.chars?this.chars[e]++:this.chars[e]=1}randomChar(){const e=(0,n.randomIntFromRange)(0,this.count-1);let t=0;for(const[o,n]of Object.entries(this.chars))if(t+=n,t>e)return o;return Object.keys(this.chars)[0]}}class d extends s{constructor(e){super(e),this.ngrams={},this.length=1/0;for(let t of e){t+=" ";let e="";for(const o of t)e in this.ngrams||(this.ngrams[e]=new r),this.ngrams[e].addChar(o),e=(e+o).substr(-2)}}randomWord(){let e="";for(;;){const t=e.substr(-2),o=this.ngrams[t];if(!o){e="";continue}const n=o.randomChar();if(" "==n)break;e+=n}return e}}t.withWords=function(e,t){return"pseudolang"==t?(null!=i&&e===i.words||(i=new d(e)),i):(null!=a&&e===a.words||(a=new s(e)),a)}},5209:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.updateKeytips=void 0;const d=r(o(6705)),u=i(o(4292)),l=i(o(3368)),c=i(o(8248)),p=i(o(6443)),f=i(o(1446)),h=o(2189),m=i(o(8673)),g=o(7346);function v(){"esc"===d.default.quickRestart?$(".pageSettings .tip").html("\n    tip: You can also change all these settings quickly using the\n    command line (<key>ctrl/cmd</key>+<key>shift</key>+<key>p</key>)"):$(".pageSettings .tip").html("\n    tip: You can also change all these settings quickly using the\n    command line (<key>esc</key> or <key>ctrl/cmd</key>+<key>shift</key>+<key>p</key>)"),"esc"===d.default.quickRestart?$("#bottom .keyTips").html("\n    <key>esc</key> - restart test<br>\n    <key>tab</key> or <key>ctrl/cmd</key>+<key>shift</key>+<key>p</key> - command line"):"tab"===d.default.quickRestart?$("#bottom .keyTips").html("\n    <key>tab</key> - restart test<br>\n      <key>esc</key> or <key>ctrl/cmd</key>+<key>shift</key>+<key>p</key> - command line"):$("#bottom .keyTips").html("\n    <key>tab</key> + <key>enter</key> - restart test<br>\n    <key>esc</key> or <key>ctrl/cmd</key>+<key>shift</key>+<key>p</key> - command line")}t.updateKeytips=v,"localhost"===window.location.hostname&&(window.onerror=function(e){l.add(e.toString(),-1)},$("#top .logo .top").text("localhost"),$("head title").text($("head title").text()+" (localhost)"),$("body").append('<div class="devIndicator tl">local</div><div class="devIndicator br">local</div>'),$(".pageSettings .discordIntegration .buttons a").attr("href","https://discord.com/api/oauth2/authorize?client_id=798272335035498557&redirect_uri=http%3A%2F%2Flocalhost%3A3000%2Fverify&response_type=token&scope=identify"),$(".pageSettings .discordIntegration .info #discordButtonGroup #updateDiscordAvatarButton").attr("href","https://discord.com/api/oauth2/authorize?client_id=798272335035498557&redirect_uri=http%3A%2F%2Flocalhost%3A3000%2Fverify&response_type=token&scope=identify")),window.addEventListener("keydown",(function(e){"Space"===e.code&&e.target===document.body&&e.preventDefault()})),window.addEventListener("beforeunload",(e=>{"words"===d.default.mode&&d.default.words<1e3||"time"===d.default.mode&&d.default.time<3600||"quote"===d.default.mode||"custom"===d.default.mode&&c.isWordRandom&&c.word<1e3||"custom"===d.default.mode&&c.isTimeRandom&&c.time<1e3||"custom"===d.default.mode&&!c.isWordRandom&&c.text.length<1e3||p.get()&&(e.preventDefault(),e.returnValue="")}));const y=(0,h.debounce)(250,(()=>s(void 0,void 0,void 0,(function*(){u.updatePosition(),"off"===d.default.tapeMode||"test"!==(0,g.get)()||m.resultVisible||m.scrollTape(),setTimeout((()=>{u.show()}),250)})))),b=(0,h.throttle)(250,(()=>{u.hide()}));$(window).on("resize",(()=>{b(),y()})),f.subscribe((e=>{"quickRestart"===e&&v()}))},3388:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.clearTimeouts=t.canQuickRestart=t.mapRange=t.isUsernameValid=t.cleanTypographySymbols=t.escapeHTML=t.escapeRegExp=t.remove_non_ascii=t.getWords=t.toggleFullscreen=t.objectToQueryString=t.findGetParameter=t.getPositionString=t.getArrows=t.getASCII=t.getSpecials=t.convertNumberToArabicIndic=t.getNumbers=t.secondsToString=t.getGibberish=t.findLineByLeastSquares=t.roundTo2=t.whorf=t.kogasa=t.isASCIILetter=t.capitalizeFirstLetterOfEachWord=t.getLastChar=t.getReleasesFromGitHub=t.median=t.mean=t.stdDev=t.smooth=t.getChallengeList=t.findCurrentGroup=t.getCurrentLanguage=t.getLanguage=t.getLanguageGroups=t.getLanguageList=t.getContributorsList=t.getSupportersList=t.getFontsList=t.getLayout=t.getLayoutsList=t.getFunbox=t.getFunboxList=t.getSortedThemesList=t.getThemesList=t.isColorDark=t.isColorLight=t.getuid=void 0,t.getDiscordAvatarUrl=t.isAnyPopupVisible=t.createErrorMessage=t.randomElementFromObject=t.randomElementFromArray=t.shuffle=t.randomIntFromRange=t.downloadResultsCSV=t.getMode2=t.swapElements=t.convertRemToPixels=t.trailingComposeChars=t.convertRGBtoHEX=t.regexIndexOf=t.setCharAt=void 0;const d=i(o(9817)),u=r(o(9546)),l=o(6617);function c(e){let t,o,n;4==e.length?(t="0x"+e[1]+e[1],o="0x"+e[2]+e[2],n="0x"+e[3]+e[3]):7==e.length?(t="0x"+e[1]+e[2],o="0x"+e[3]+e[4],n="0x"+e[5]+e[6]):(t=0,o=0,n=0),t/=255,o/=255,n/=255;const a=Math.min(t,o,n),i=Math.max(t,o,n),s=i-a;let r=0,d=0,u=0;return r=0==s?0:i==t?(o-n)/s%6:i==o?(n-t)/s+2:(t-o)/s+4,r=Math.round(60*r),r<0&&(r+=360),u=(i+a)/2,d=0==s?0:s/(1-Math.abs(2*u-1)),d=+(100*d).toFixed(1),u=+(100*u).toFixed(1),{hue:r,sat:d,lgt:u,string:"hsl("+r+","+d+"%,"+u+"%)"}}t.getuid=function(){var e;console.error("Only share this uid with Miodec and nobody else!"),console.log(null===(e=l.Auth.currentUser)||void 0===e?void 0:e.uid),console.error("Only share this uid with Miodec and nobody else!")},t.isColorLight=function(e){return c(e).lgt>=50},t.isColorDark=function(e){return c(e).lgt<50};let p=[];function f(){return s(this,void 0,void 0,(function*(){return 0==p.length?$.getJSON("/./themes/_list.json",(function(e){const t=e.sort((function(e,t){const o=e.name.toLowerCase(),n=t.name.toLowerCase();return o<n?-1:o>n?1:0}));return p=t,p})):p}))}t.getThemesList=f;let h=[];t.getSortedThemesList=function(){return s(this,void 0,void 0,(function*(){if(0===h.length){0===p.length&&(yield f());let e=[...p];return e=e.sort(((e,t)=>{const o=c(e.bgColor);return c(t.bgColor).lgt-o.lgt})),h=e,h}return h}))};let m=[];function g(){return s(this,void 0,void 0,(function*(){return 0===m.length?$.getJSON("/./funbox/_list.json",(function(e){return m=e.sort((function(e,t){const o=e.name.toLowerCase(),n=t.name.toLowerCase();return o<n?-1:o>n?1:0})),m})):m}))}t.getFunboxList=g,t.getFunbox=function(e){return s(this,void 0,void 0,(function*(){return(yield g()).find((function(t){return t.name==e}))}))};let v={};function y(){return s(this,void 0,void 0,(function*(){return 0===Object.keys(v).length?$.getJSON("/./layouts/_list.json",(function(e){return v=e,v})):v}))}t.getLayoutsList=y,t.getLayout=function(e){return s(this,void 0,void 0,(function*(){return 0===Object.keys(v).length&&(yield y()),v[e]}))};let b=[];t.getFontsList=function(){return s(this,void 0,void 0,(function*(){return 0===b.length?$.getJSON("/./fonts/_list.json",(function(e){return b=e.sort((function(e,t){const o=e.name.toLowerCase(),n=t.name.toLowerCase();return o<n?-1:o>n?1:0})),b})):b}))};let w=[];t.getSupportersList=function(){return s(this,void 0,void 0,(function*(){return 0===w.length?$.getJSON("/./about/supporters.json",(function(e){return w=e,w})):w}))};let C=[];t.getContributorsList=function(){return s(this,void 0,void 0,(function*(){return 0===C.length?$.getJSON("/./about/contributors.json",(function(e){return C=e,C})):C}))};let S=[];t.getLanguageList=function(){return s(this,void 0,void 0,(function*(){return 0===S.length?$.getJSON("/./languages/_list.json",(function(e){return S=e,S})):S}))};let _,k=[];function x(){return s(this,void 0,void 0,(function*(){return 0===k.length?$.getJSON("/./languages/_groups.json",(function(e){return k=e,k})):k}))}function T(e){return s(this,void 0,void 0,(function*(){try{return null!=_&&_.name===e||(console.log("getting language json"),yield $.getJSON(`/./languages/${e}.json`,(function(e){_=e}))),_}catch(e){return console.error("error getting language"),console.error(e),yield $.getJSON("/./languages/english.json",(function(e){_=e})),_}}))}t.getLanguageGroups=x,t.getLanguage=T,t.getCurrentLanguage=function(e){return s(this,void 0,void 0,(function*(){return yield T(e)}))},t.findCurrentGroup=function(e){return s(this,void 0,void 0,(function*(){let t;return(yield x()).forEach((o=>{void 0===t&&o.languages.includes(e)&&(t=o)})),t}))};let P=[];function M(e){return Math.round(100*(e+Number.EPSILON))/100}function O(e,t){const o=Math.ceil(e),n=Math.floor(t);return Math.floor(Math.random()*(n-o+1)+o)}function L(e){return e[O(0,e.length-1)]}t.getChallengeList=function(){return s(this,void 0,void 0,(function*(){return 0===P.length?$.getJSON("/./challenges/_list.json",(function(e){return P=e,P})):P}))},t.smooth=function(e,t,o=(e=>e)){const n=o,a=[];for(let o=0;o<e.length;o+=1){const i=o-t,s=o+t+1;let r=0,d=0;for(let t=i>=0?i:0;t<s&&t<e.length;t+=1)d+=n(e[t]),r+=1;a[o]=d/r}return a},t.stdDev=function(e){try{const t=e.length,o=e.reduce(((e,t)=>e+t))/t;return Math.sqrt(e.map((e=>Math.pow(e-o,2))).reduce(((e,t)=>e+t))/t)}catch(e){return 0}},t.mean=function(e){try{return e.reduce(((e,t)=>t+e))/e.length}catch(e){return 0}},t.median=function(e){try{const t=Math.floor(e.length/2),o=[...e].sort(((e,t)=>e-t));return e.length%2!=0?o[t]:(o[t-1]+o[t])/2}catch(e){return 0}},t.getReleasesFromGitHub=function(){return s(this,void 0,void 0,(function*(){return $.getJSON("https://api.github.com/repos/Miodec/monkeytype/releases",(e=>{$("#bottom .version .text").text(e[0].name),$("#bottom .version").css("opacity",1),$("#versionHistory .releases").empty(),e.forEach((e=>{e.draft||e.prerelease||$("#versionHistory .releases").append(`\n          <div class="release">\n            <div class="title">${e.name}</div>\n            <div class="date">${(0,u.default)(new Date(e.published_at),"dd MMM yyyy")}</div>\n            <div class="body">${e.body.replace(/\r\n/g,"<br>")}</div>\n          </div>\n        `)}))}))}))},t.getLastChar=function(e){try{return e.charAt(e.length-1)}catch(e){return""}},t.capitalizeFirstLetterOfEachWord=function(e){return e.split(/ +/).map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")},t.isASCIILetter=function(e){return 1===e.length&&/[a-z]/i.test(e)},t.kogasa=function(e){return 100*(1-Math.tanh(e+Math.pow(e,3)/3+Math.pow(e,5)/5))},t.whorf=function(e,t){return Math.min(e,Math.floor(e*Math.pow(1.03,-2*(t-3))))},t.roundTo2=M,t.findLineByLeastSquares=function(e){let t=0,o=0,n=0,a=0,i=0,s=0,r=0;const d=e.length;if(0===d)return[[],[]];for(let u=0;u<d;u++)s=u+1,r=e[u],t+=s,o+=r,a+=s*s,n+=s*r,i++;const u=(i*n-t*o)/(i*a-t*t),l=o/i-u*t/i;return[[1,1*u+l],[d,d*u+l]]},t.getGibberish=function(){const e=O(1,7);let t="";for(let o=0;o<e;o++)t+=String.fromCharCode(97+O(0,25));return t},t.secondsToString=function(e,t=!1,o=!1,n=":",a=!0,i=!1){e=Math.abs(e);let s,r=0;i?(r=Math.floor(e/86400),s=Math.floor(e%86400/3600)):s=Math.floor(e/3600);const d=Math.floor(e%3600/60),u=M(e%3600%60);let l,c,p,f;i&&(l=r<10&&"text"!==n?"0"+r:r),c=s<10&&"text"!==n?"0"+s:s,p=d<10&&"text"!==n?"0"+d:d,f=u<10&&(d>0||s>0||t)&&"text"!==n?"0"+u:u;let h="";return r>0&&i&&(h+=l,h+="text"===n?1==r?" day ":" days ":n),(s>0||o)&&(h+=c,h+="text"===n?1==s?" hour ":" hours ":n),(d>0||s>0||t)&&(h+=p,"text"===n?h+=1==d?" minute ":" minutes ":a&&(h+=n)),a&&(h+=f,"text"===n&&(h+=1==u?" second":" seconds")),0!==s||0!==d||a||"text"!==n||(h="less than 1 minute"),h.trim()},t.getNumbers=function(e){const t=O(1,e);let o="";for(let e=0;e<t;e++){let t;t=O(0===e?1:0,9),o+=t.toString()}return o},t.convertNumberToArabicIndic=function(e){let t="";for(let o=0;o<e.length;o++)t+="٠١٢٣٤٥٦٧٨٩"[parseInt(e[o])];return t},t.getSpecials=function(){const e=O(1,7);let t="";const o=["!","@","#","$","%","^","&","*","(",")","-","_","=","+","{","}","[","]","'",'"',"/","\\","|"];for(let n=0;n<e;n++)t+=L(o);return t},t.getASCII=function(){const e=O(1,10);let t="";for(let o=0;o<e;o++){const e=33+O(0,93);t+=String.fromCharCode(e)}return t},t.getArrows=function(){const e=["←","↑","→","↓"];let t,o="";for(let n=0;n<5;n++){let n=L(e);for(;n===t;)n=L(e);t=n,o+=n}return o},t.getPositionString=function(e){let t="th";const o=e%10,n=e%100;return 1==o&&11!=n&&(t="st"),2==o&&12!=n&&(t="nd"),3==o&&13!=n&&(t="rd"),e+t},t.findGetParameter=function(e,t){let o=null,n=[],a=location.search;return t&&(a=t),a.substr(1).split("&").forEach((function(t){n=t.split("="),n[0]===e&&(o=decodeURIComponent(n[1]))})),o},t.objectToQueryString=function(e){const t=[];for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return t.join("&")},t.toggleFullscreen=function(){const e=document.documentElement;document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)},t.getWords=function(){return[...document.querySelectorAll("#words .word")].map((e=>[...e.querySelectorAll("letter")].map((e=>e.textContent)).join(""))).join(" ")},t.remove_non_ascii=function(e){return null===e||""===e?"":(e=e.toString()).replace(/[^\x20-\x7E]/g,"")},t.escapeRegExp=function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},t.escapeHTML=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},t.cleanTypographySymbols=function(e){const t={"“":'"',"”":'"',"’":"'","‘":"'",",":",","—":"-","…":"...","«":"<<","»":">>","–":"-"," ":" "," ":" "," ":" "};return e.replace(/[“”’‘—,…«»–\u2007\u202F\u00A0]/g,(e=>t[e]||""))},t.isUsernameValid=function(e){return null!=e&&""!==e&&!/miodec/.test(e.toLowerCase())&&!/bitly/.test(e.toLowerCase())&&!(e.length>14)&&!/^\..*/.test(e.toLowerCase())&&/^[0-9a-zA-Z_.-]+$/.test(e)},t.mapRange=function(e,t,o,n,a){let i=(e-t)*(a-n)/(o-t)+n;return n>a?i>n?i=n:i<a&&(i=a):i<n?i=n:i>a&&(i=a),i},t.canQuickRestart=function(e,t,o,n){return!!("words"===e&&t<1e3||"time"===e&&o<3600||"quote"===e||"custom"===e&&n.isWordRandom&&n.word<1e3||"custom"===e&&n.isTimeRandom&&n.time<3600||"custom"===e&&!n.isWordRandom&&n.text.length<1e3)},t.clearTimeouts=function(e){e.forEach((e=>{clearTimeout(e)}))},t.setCharAt=function(e,t,o){return t>e.length-1?e:e.substring(0,t)+o+e.substring(t+1)},t.regexIndexOf=function(e,t,o){const n=e.substring(o||0).search(t);return n>=0?n+(o||0):n},t.convertRGBtoHEX=function(e){const t=e.match(/^rgb\((\d+), \s*(\d+), \s*(\d+)\)$/);if(null!==t&&!(t.length<3))return"#"+o(t[1])+o(t[2])+o(t[3]);function o(e){return("0"+parseInt(e).toString(16)).slice(-2)}},String.prototype.lastIndexOfRegex=function(e){const t=this.match(e);return t?this.lastIndexOf(t[t.length-1]):-1},t.trailingComposeChars=/[\u02B0-\u02FF`´^¨~]+$|⎄.*$/,t.convertRemToPixels=function(e){return e*parseFloat(getComputedStyle(document.documentElement).fontSize)},t.swapElements=function(e,t,o,n=function(){return Promise.resolve()},a=function(){return Promise.resolve()}){return s(this,void 0,void 0,(function*(){if(e.hasClass("hidden")&&!t.hasClass("hidden")||!e.hasClass("hidden")&&t.hasClass("hidden")){if(e.hasClass("hidden"))return yield a(),yield n(),!1;$(e).removeClass("hidden").css("opacity",1).animate({opacity:0},o/2,(()=>s(this,void 0,void 0,(function*(){yield a(),$(e).addClass("hidden"),$(t).removeClass("hidden").css("opacity",0).animate({opacity:1},o/2,(()=>{n()}))}))))}else e.hasClass("hidden")&&t.hasClass("hidden")?(yield a(),$(t).removeClass("hidden").css("opacity",0).animate({opacity:1},o,(()=>s(this,void 0,void 0,(function*(){yield n()}))))):(yield a(),yield n())}))},t.getMode2=function(e,t){const o=e.mode;return"time"===o?e.time.toString():"words"===o?e.words.toString():"custom"===o?"custom":"zen"===o?"zen":"quote"===o?t.id.toString():""},t.downloadResultsCSV=function(e){return s(this,void 0,void 0,(function*(){d.show();const t=[["_id","isPb","wpm","acc","rawWpm","consistency","charStats","mode","mode2","quoteLength","restartCount","testDuration","afkDuration","incompleteTestSeconds","punctuation","numbers","language","funbox","difficulty","lazyMode","blindMode","bailedOut","tags","timestamp"],...e.map((e=>[e._id,e.isPb,e.wpm,e.acc,e.rawWpm,e.consistency,e.charStats.join(","),e.mode,e.mode2,e.quoteLength,e.restartCount,e.testDuration,e.afkDuration,e.incompleteTestSeconds,e.punctuation,e.numbers,e.language,e.funbox,e.difficulty,e.lazyMode,e.blindMode,e.bailedOut,e.tags.join(","),e.timestamp]))].map((e=>e.join("|"))).join("\n"),o=new Blob([t],{type:"text/csv"}),n=window.URL.createObjectURL(o),a=document.createElement("a");a.setAttribute("href",n),a.setAttribute("download","results.csv"),document.body.appendChild(a),a.click(),a.remove(),d.hide()}))},t.randomIntFromRange=O,t.shuffle=function(e){for(let t=e.length-1;t>0;--t){const o=O(0,t),n=e[o];e[o]=e[t],e[t]=n}},t.randomElementFromArray=L,t.randomElementFromObject=function(e){return L(Object.values(e))},t.createErrorMessage=function(e,t){if(e instanceof Error)return`${t}: ${e.message}`;const o=e;return(null==o?void 0:o.message)?`${t}: ${o.message}`:t},t.isAnyPopupVisible=function(){const e=document.querySelectorAll(".popupWrapper");let t=!1;for(const o of e)if("none"!==window.getComputedStyle(o).display){t=!0;break}return t},t.getDiscordAvatarUrl=function(e,t,o=32){return s(this,void 0,void 0,(function*(){if(!e||!t)return null;try{const n=`https://cdn.discordapp.com/avatars/${e}/${t}.png?size=${o}`;return(yield fetch(n)).ok?n:null}catch(e){}return null}))}},6690:function(e,t,o){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.buildSearchService=void 0;const a=o(1161),i=n(o(7718)),s={fuzzyMatchSensitivity:.2,scoreForSimilarMatch:.5,scoreForExactMatch:1};function r(e){return e.match(/[^\\\][.,"/#!?$%^&*;:{}=\-_`~()\s]+/g)||[]}t.buildSearchService=(e,t,o=s)=>{const n={},d={};e.forEach(((e,o)=>{const i=r(t(e)),s={id:o,termFrequencies:{},maxTermFrequency:0};let u=0;i.forEach((e=>{const t=(0,a.stemmer)(e);t in d||(d[t]=new Set),d[t].add(e),t in n||(n[t]=new Set),n[t].add(s),t in s.termFrequencies||(s.termFrequencies[t]=0),s.termFrequencies[t]++,u=Math.max(u,s.termFrequencies[t])})),s.maxTermFrequency=u}));const u=Object.keys(n);return{query:t=>{const s={results:[],matchedQueryTerms:[]},l=new Set(r(t).map((e=>(0,a.stemmer)(e))));if(0===l.size)return s;const c=new Map,p=new Set;l.forEach((t=>{u.forEach((a=>{const{similarity:s}=(0,i.default)(t,a),r=a===t,u=s>=1-o.fuzzyMatchSensitivity;if(r||u){const t=n[a],i=(l=e.length,0===(f=t.size)?0:Math.log10(l/f));t.forEach((e=>{var t;const n=null!==(t=c.get(e.id))&&void 0!==t?t:0,s=function(e,t){return.4+t.termFrequencies[e]/t.maxTermFrequency*.6}(a,e),d=((r?o.scoreForExactMatch:0)+(u?o.scoreForSimilarMatch:0))*i*s;c.set(e.id,n+d)})),d[a].forEach((e=>{p.add(e)}))}var l,f}))}));const f=[...c].sort(((e,t)=>t[1]-e[1])).map((t=>e[t[0]]));return s.results=f,s.matchedQueryTerms=[...p],s}}}},6037:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.splitByAndKeep=void 0,t.splitByAndKeep=function(e,t){const o=[];let n=[];const a=new Set(t);for(const t of e)a.has(t)?(n.length>0&&o.push(n.join("")),o.push(t),n=[]):n.push(t);return n.length>0&&o.push(n.join("")),o}},9608:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t},s=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(e){i(e)}}function r(e){try{d(n.throw(e))}catch(e){i(e)}}function d(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,r)}d((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.loadTestSettingsFromUrl=t.loadCustomThemeFromUrl=t.linkDiscord=void 0;const d=i(o(3388)),u=i(o(6705)),l=u,c=i(o(3368)),p=o(6965),f=i(o(2338)),h=i(o(2203)),m=i(o(8248)),g=r(o(7355)),v=i(o(8835)),y=i(o(6350)),b=i(o(9817)),w=i(o(5344)),$=o(3013);t.linkDiscord=function(e){return s(this,void 0,void 0,(function*(){if(!e)return;const t=new URLSearchParams(e.slice(1));if(t.has("access_token")){history.replaceState(null,"","/");const e=t.get("access_token"),o=t.get("token_type");b.show();const n=yield g.default.users.linkDiscord(o,e);if(b.hide(),200!==n.status)return c.add("Failed to link Discord: "+n.message,-1);c.add(n.message,1);const a=y.getSnapshot(),{discordId:i,discordAvatar:s}=n.data;i?a.discordId=i:a.discordAvatar=s,y.setSnapshot(a),w.update(i,s),v.updateDiscordSection()}}))},t.loadCustomThemeFromUrl=function(e){var t;const o=d.findGetParameter("customTheme",e);if(null===o)return;const n=o.split(","),a=JSON.parse(null!==(t=atob(o))&&void 0!==t?t:"");let i=[];if(Array.isArray(n)&&10===n.length?i=n:Array.isArray(a)&&10===a.length&&(i=a),0===i.length)return c.add("Invalid custom theme ",0);const s=u.default.customTheme,r=u.default.customThemeColors;try{l.setCustomThemeColors(i),c.add("Custom theme applied",1),u.default.customTheme||l.setCustomTheme(!0)}catch(e){c.add("Something went wrong. Reverting to previous state.",0),console.error(e),l.setCustomTheme(s),l.setCustomThemeColors(r)}},t.loadTestSettingsFromUrl=function(e){var t;const o=d.findGetParameter("testSettings",e);if(null===o)return;const n=JSON.parse(null!==(t=(0,p.decompressFromURI)(o))&&void 0!==t?t:""),a={};if(n[0]&&(l.setMode(n[0],!0),a.mode=n[0]),n[1]&&("time"===u.default.mode?l.setTimeConfig(parseInt(n[1],10),!0):"words"===u.default.mode?l.setWordCount(parseInt(n[1],10),!0):"quote"===u.default.mode&&(l.setQuoteLength(-2,!1),f.setSelectedId(parseInt(n[1],10)),h.set()),a.mode2=n[1]),n[2]){const e=n[2];m.setText(e.text),m.setIsTimeRandom(e.isTimeRandom),m.setIsWordRandom(e.isWordRandom),e.isTimeRandom&&m.setWord(e.time),e.isWordRandom&&m.setTime(e.word),m.setDelimiter(e.delimiter),a["custom text settings"]=""}n[3]&&(l.setPunctuation(n[3],!0),a.punctuation=n[3]?"on":"off"),n[4]&&(l.setNumbers(n[4],!0),a.numbers=n[4]?"on":"off"),n[5]&&(l.setLanguage(n[5],!0),a.language=n[5]),n[6]&&(l.setDifficulty(n[6],!0),a.difficulty=n[6]),n[7]&&(l.setFunbox(n[7],!0),a.funbox=n[7]),(0,$.restart)();let i="";Object.keys(a).forEach((e=>{const t=a[e];i+=`${e}${t?": "+t:""}<br>`})),""!==i&&c.add("Settings applied from URL:<br><br>"+i,1,10,void 0,void 0,void 0,!0)}}},o={};function n(e){var a=o[e];if(void 0!==a)return a.exports;var i=o[e]={exports:{}};return t[e].call(i.exports,i,i.exports,n),i.exports}n.m=t,e=[],n.O=(t,o,a,i)=>{if(!o){var s=1/0;for(l=0;l<e.length;l++){for(var[o,a,i]=e[l],r=!0,d=0;d<o.length;d++)(!1&i||s>=i)&&Object.keys(n.O).every((e=>n.O[e](o[d])))?o.splice(d--,1):(r=!1,i<s&&(s=i));if(r){e.splice(l--,1);var u=a();void 0!==u&&(t=u)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[o,a,i]},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={96:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var a,i,[s,r,d]=o,u=0;if(s.some((t=>0!==e[t]))){for(a in r)n.o(r,a)&&(n.m[a]=r[a]);if(d)var l=d(n)}for(t&&t(o);u<s.length;u++)i=s[u],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(l)},o=self.webpackChunkmonkeytype_frontend=self.webpackChunkmonkeytype_frontend||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var a=n.O(void 0,[736],(()=>n(9294)));a=n.O(a)})();